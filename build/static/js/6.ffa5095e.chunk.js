(this["webpackJsonppaint-builder"]=this["webpackJsonppaint-builder"]||[]).push([[6],{1103:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),o=a(3),c=a(13),l=a(19),i=a(6),s=a(361),d=a(33),u=a(0),b=a.n(u),j=a(48),h=a.n(j),O=a(37),f=a(589),y=a.n(f),p=a(82),g=a(16),m=a(324),x=a(8),_=a(86),C=a(34),w=a(326),v=a(134),k=a(350),L=a(322),S=a(1057),R=a(1112),I=a(1058),F=a(1059),M=a(1060),B=a(1052),T=a(17),E=Object(T.a)((function(e){return{tooltip:{backgroundColor:"white",color:"rgba(0, 0, 0, 0.87)",boxShadow:"rgba(0, 0, 0, 0.2)",fontSize:11},arrow:{color:"white"}}}))(B.a),D=a(1110),N=a(1055),P=a(1056),A=a(7),z=Object(d.c)(D.a).withConfig({displayName:"ZoomPopover__CustomOutlinedInput",componentId:"sc-72h4yq-0"})(["&.MuiOutlinedInput-root{width:100px !important;}.MuiOutlinedInput-input{padding:6px 14px;border-bottom:none;width:40px;}"]),Y=function(e){var t=e.anchorEl,a=e.zoom,n=e.setZoom,r=e.onZoomIn,o=e.onZoomOut,c=e.onZoomFit,l=e.onClose;return Object(A.jsx)(N.a,{open:Boolean(t),anchorEl:t,onClose:l,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:Object(A.jsxs)(m.a,{display:"flex",flexDirection:"column",p:4,width:"200px",children:[Object(A.jsxs)(m.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(A.jsx)(L.a,{onClick:r,children:"Zoom in"}),Object(A.jsx)(v.a,{variant:"body2",children:"Shift +"})]}),Object(A.jsxs)(m.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(A.jsx)(L.a,{onClick:o,children:"Zoom out"}),Object(A.jsx)(v.a,{variant:"body2",children:"Shift -\xa0"})]}),Object(A.jsxs)(m.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(A.jsx)(L.a,{onClick:c,children:"Zoom to fit"}),Object(A.jsx)(v.a,{variant:"body2",children:"Shift 9"})]}),Object(A.jsxs)(m.a,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[Object(A.jsx)(L.a,{onClick:function(){n(1)},children:"Zoom to 100%"}),Object(A.jsx)(v.a,{variant:"body2",children:"Shift 0"})]}),Object(A.jsx)(z,{id:"zoom-value",value:100*a,onChange:function(e){n(parseInt(e.target.value||0)/100)},endAdornment:Object(A.jsx)(P.a,{position:"end",children:"%"}),labelWidth:0,autoFocus:!0})]})})},W=b.a.memo(Y),X=Object(d.c)(v.a).withConfig({displayName:"Toolbar__Typography",componentId:"sc-1sow5sy-0"})(w.b),U=Object(d.c)(S.a).withConfig({displayName:"Toolbar__ToggleButton",componentId:"sc-1sow5sy-1"})(w.b),G=Object(d.c)(k.a).withConfig({displayName:"Toolbar__IconButton",componentId:"sc-1sow5sy-2"})(w.b),K=d.c.div.withConfig({displayName:"Toolbar__Wrapper",componentId:"sc-1sow5sy-3"})(["width:100%;height:50px;display:flex;padding:10px 20px;background:#151515;z-index:1201;"]),H=Object(d.c)(L.a).withConfig({displayName:"Toolbar__ZoomButton",componentId:"sc-1sow5sy-4"})(["&.MuiButton-contained{color:#fff;background-color:rgba(255,255,255,0.12);}"]),V=b.a.memo((function(e){var t=e.onZoomIn,a=e.onZoomOut,n=e.onZoomFit,r=e.onChangePaintingGuides,o=Object(u.useState)(null),c=Object(s.a)(o,2),l=c[0],i=c[1],d=Object(O.d)(),b=Object(O.e)((function(e){return e.boardReducer.paintingGuides})),j=Object(O.e)((function(e){return e.boardReducer.actionHistoryIndex})),h=Object(O.e)((function(e){return e.boardReducer.actionHistory})),f=Object(O.e)((function(e){return e.boardReducer.zoom})),y=Object(u.useCallback)((function(e,t){r(t)}),[r]),p=Object(u.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];d(e?Object(C.b)():Object(C.c)())}),[d]),g=Object(u.useCallback)((function(e){i(e.currentTarget)}),[i]),_=Object(u.useCallback)((function(){i(null)}),[i]),w=Object(u.useCallback)((function(e){d(Object(C.j)(e))}),[d]);return Object(A.jsx)(K,{children:Object(A.jsxs)(m.a,{display:"flex",justifyContent:"space-between",alignContent:"center",width:"100%",children:[Object(A.jsx)(m.a,{display:"flex",justifyContent:"start",alignContent:"center",children:Object(A.jsxs)(R.a,{value:b,onChange:y,"aria-label":"Painting Guides",children:[Object(A.jsx)(U,{value:x.g.CARMASK,"aria-label":"car-mask",children:Object(A.jsx)(X,{variant:"caption",children:"car mask"})}),Object(A.jsx)(U,{value:x.g.WIREFRAME,"aria-label":"wireframe",children:Object(A.jsx)(X,{variant:"caption",children:"wireframe"})}),Object(A.jsx)(U,{value:x.g.SPONSORBLOCKS,"aria-label":"sponsor-blocks",children:Object(A.jsx)(X,{variant:"caption",children:"sponsor blocks"})}),Object(A.jsx)(U,{value:x.g.NUMBERBLOCKS,"aria-label":"number-blocks",children:Object(A.jsx)(X,{variant:"caption",children:"number blocks"})}),Object(A.jsx)(U,{value:x.g.GRID,"aria-label":"grid",children:Object(A.jsx)(X,{variant:"caption",children:"grid"})})]})}),Object(A.jsxs)(m.a,{display:"flex",justifyContent:"flex-end",alignContent:"center",children:[Object(A.jsx)(E,{title:"Undo",arrow:!0,children:Object(A.jsx)(G,{disabled:-1===j,onClick:function(){return p(!0)},children:Object(A.jsx)(I.a,{})})}),Object(A.jsx)(E,{title:"Redo",arrow:!0,children:Object(A.jsx)(G,{disabled:j===h.length-1,onClick:function(){return p(!1)},children:Object(A.jsx)(F.a,{})})}),Object(A.jsxs)(H,{variant:"contained",endIcon:Object(A.jsx)(M.a,{}),onClick:g,children:[(100*f).toFixed(2)," %"]}),Object(A.jsx)(W,{anchorEl:l,zoom:f,setZoom:w,onZoomIn:t,onZoomOut:a,onZoomFit:n,onClose:_})]})]})})})),J=a(591),Z=a.n(J),q=a(409),Q=a(883),$=a(1061),ee=a(1062),te=a(422),ae=a(631),ne=a(491),re=a.n(ne),oe=a(43),ce=function(e){var t=e.src,a=e.tellSize,n=e.onSelect,c=e.onChange,l=e.onHover,d=e.filterColor,b=e.frameSize,j=e.allowFit,h=e.layer_data,O=Object(te.a)(e,["src","tellSize","onSelect","onChange","onHover","filterColor","frameSize","allowFit","layer_data"]),f=Object(u.useRef)(null),y=Object(u.useRef)(),p=Object(u.useState)(null),g=Object(s.a)(p,2),m=g[0],x=g[1],_=[];d&&d.length&&_.push(re.a.Filters.RGBA);var C=function(e){return f.current?Math.max(1,f.current.width/e.width(),f.current.height/e.height()):1};Object(u.useEffect)((function(){return v(),function(){f.current&&f.current.removeEventListener("load",w)}}),[]),Object(u.useEffect)((function(){y.current&&(d&&d.length?y.current.cache({pixelRatio:C(y.current),imageSmoothingEnabled:!0}):y.current.clearCache())}),[d]);var w=function(){var e=Object(o.a)(r.a.mark((function e(){var n,o,l,i,s,u,h;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!j||f.current.width<=b.width/2&&f.current.height<=b.height/2?f.current.width:b.width/2,o=!j||f.current.width<=b.width/2&&f.current.height<=b.height/2?f.current.height:b.width/2*f.current.height/f.current.width,l=O.width||n,i=O.height||o,!t.toLowerCase().includes(".svg")||f.current.width&&f.current.height){e.next=19;break}return s=document.createElement("canvas"),u=s.getContext("2d"),e.next=9,ae.a.from(u,t,{enableRedraw:!0});case 9:return h=e.sent,console.log(h),l=l||h.documentElement.node.width.baseVal.value||200,i=i||h.documentElement.node.height.baseVal.value||200,h.resize(l,i,"none"),e.next=16,h.render();case 16:x(s),e.next=20;break;case 19:x(f.current);case 20:!c||O.width||O.height||c({left:Object(oe.h)(O.x-l/2),top:Object(oe.h)(O.y-i/2),width:Object(oe.h)(l),height:Object(oe.h)(i)}),d&&d.length&&y.current.cache({pixelRatio:C(y.current),imageSmoothingEnabled:!0}),a&&a({width:l,height:i});case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(o.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new window.Image).src=t+"?timestamp=".concat((new Date).toISOString()),a.crossOrigin="anonymous",f.current=a,f.current.addEventListener("load",w);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.jsx)(q.e,Object(i.a)(Object(i.a)({},O),{},{image:m,onClick:n,onTap:n,ref:y,draggable:c,filters:_.length?_:null,red:d&&d.length?Object(oe.g)(d).r:null,green:d&&d.length?Object(oe.g)(d).g:null,blue:d&&d.length?Object(oe.g)(d).b:null,alpha:d&&d.length?Object(oe.g)(d).a/255:null,onDragStart:function(e){n()},onDragEnd:function(e){c&&c({left:Object(oe.h)(e.target.x()),top:Object(oe.h)(e.target.y())})},onTransformEnd:function(e){if(c){var t=y.current,a=t.scaleX(),n=t.scaleY();console.log("scaleX, scaleY: ",a,n),t.scaleX(a>0?1:-1),t.scaleY(n>0?1:-1);var r=Math.abs(1!==Math.abs(Object(oe.h)(n))?n:a);c({left:Object(oe.h)(t.x()),top:Object(oe.h)(t.y()),width:Object(oe.h)(Math.max(1,t.width()*Math.abs(a))),height:Object(oe.h)(Math.max(1,t.height()*Math.abs(n))),rotation:Object(oe.h)(t.rotation())||0,flop:a>0?0:1,flip:n>0?0:1,shadowBlur:Object(oe.h)(t.shadowBlur()*r),shadowOffsetX:Object(oe.h)(h.shadowOffsetX*Math.abs(a)),shadowOffsetY:Object(oe.h)(h.shadowOffsetY*Math.abs(n))}),d&&d.length?t.cache({pixelRatio:C(y.current),imageSmoothingEnabled:!0}):t.clearCache()}},perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,onMouseOver:function(){return O.listening&&l&&l(!0)},onMouseOut:function(){return O.listening&&l&&l(!1)}}))},le=a(77),ie=function(e){var t=e.paintingGuides,a=e.currentCarMake,n=e.handleImageSize,r=e.frameSize,o=e.guideData,c=o.grid_padding||10,l=o.grid_stroke||.1;return Object(A.jsxs)(A.Fragment,{children:[t.includes(x.g.WIREFRAME)?Object(A.jsx)(ce,{src:"".concat(le.a.assetsURL,"/templates/").concat(a.folder_directory.replace(" ","_"),"/wireframe.png"),tellSize:n,filterColor:o.wireframe_color,opacity:o.wireframe_opacity,listening:!1}):Object(A.jsx)(A.Fragment,{}),t.includes(x.g.GRID)?Object(A.jsxs)(A.Fragment,{children:[Array.from(Array(Math.round(r.width/c)),(function(e,t){return Object(A.jsx)(q.g,{points:[Math.round(t*c),0,Math.round(t*c),r.width],stroke:o.grid_color||"#ddd",opacity:o.grid_opacity||1,strokeWidth:l,listening:!1},"x-".concat(t))})),Array.from(Array(Math.round(r.height/c)),(function(e,t){return Object(A.jsx)(q.g,{points:[0,Math.round(t*c),r.height,Math.round(t*c)],stroke:o.grid_color||"#ddd",opacity:o.grid_opacity||1,strokeWidth:l,listening:!1},"y-".concat(t))}))]}):Object(A.jsx)(A.Fragment,{})]})},se=b.a.memo(ie),de=function(e){var t=e.paintingGuides,a=e.currentCarMake,n=e.handleImageSize,r=e.guideData;return Object(A.jsx)(A.Fragment,{children:t.includes(x.g.CARMASK)?Object(A.jsx)(ce,{src:"".concat(le.a.assetsURL,"/templates/").concat(a.folder_directory.replace(" ","_"),"/mask.png"),tellSize:n,filterColor:r.carmask_color,opacity:r.carmask_opacity,listening:!1}):Object(A.jsx)(A.Fragment,{})})},ue=b.a.memo(de),be=function(e){var t=e.paintingGuides,a=e.currentCarMake,n=e.handleImageSize,r=e.guideData;return Object(A.jsxs)(A.Fragment,{children:[t.includes(x.g.SPONSORBLOCKS)?Object(A.jsx)(ce,{src:"".concat(le.a.assetsURL,"/templates/").concat(a.folder_directory.replace(" ","_"),"/sponsor_blocks.png"),tellSize:n,filterColor:r.sponsor_color,opacity:r.sponsor_opacity,listening:!1}):Object(A.jsx)(A.Fragment,{}),t.includes(x.g.NUMBERBLOCKS)?Object(A.jsx)(ce,{src:"".concat(le.a.assetsURL,"/templates/").concat(a.folder_directory.replace(" ","_"),"/number_blocks.png"),tellSize:n,filterColor:r.numberblock_color,opacity:r.numberblock_opacity,listening:!1}):Object(A.jsx)(A.Fragment,{})]})},je=b.a.memo(be),he=function(e){var t=e.layers,a=e.currentCarMake,n=e.handleImageSize,r=Object(u.useMemo)((function(){return h.a.orderBy(t.filter((function(e){return e.layer_type===x.e.CAR&&e.layer_visible})),["layer_order"],["desc"])}),[t]);return Object(A.jsx)(A.Fragment,{children:r.map((function(e){return Object(A.jsx)(ce,{src:le.a.assetsURL+"/templates/"+a.folder_directory.replace(" ","_")+"/".concat(e.layer_data.img),tellSize:n,filterColor:e.layer_data.color,listening:!1},e.id)}))})},Oe=b.a.memo(he),fe=function(e){var t=e.layers,a=e.handleImageSize,n=Object(u.useMemo)((function(){return h.a.orderBy(t.filter((function(e){return e.layer_type===x.e.BASE&&e.layer_visible})),["layer_order","desc"])}),[t]);return Object(A.jsx)(A.Fragment,{children:n.map((function(e){return Object(A.jsx)(ce,{src:"".concat(le.a.assetsURL,"/bases/").concat(e.layer_data.id,"/").concat(e.layer_data.img),tellSize:a,opacity:e.layer_data.opacity,filterColor:e.layer_data.color,listening:!1},e.id)}))})},ye=b.a.memo(fe),pe=function(e){var t=e.layers,a=e.setCurrentLayer,n=e.frameSize,r=e.mouseMode,o=e.boardRotate,c=e.onChange,l=e.onHover,i=Object(u.useMemo)((function(){return h.a.orderBy(t.filter((function(e){return e.layer_type===x.e.OVERLAY&&e.layer_visible})),["layer_order"],["desc"])}),[t]),s=Object(u.useCallback)((function(e){return Object(oe.f)(o,{x:e.layer_data.shadowOffsetX,y:e.layer_data.shadowOffsetY})}),[o]);return Object(A.jsx)(A.Fragment,{children:i.map((function(e){var t=s(e);return Object(A.jsx)(ce,{name:e.id.toString(),src:"".concat(le.a.assetsURL,"/").concat(e.layer_data.source_file),x:parseFloat(e.layer_data.left||0),y:parseFloat(e.layer_data.top||0),allowFit:!0,filterColor:e.layer_data.color,width:e.layer_data.width,height:e.layer_data.height,rotation:e.layer_data.rotation,boardRotate:o,opacity:e.layer_data.opacity,scaleX:1===e.layer_data.flop?-1:1,scaleY:1===e.layer_data.flip?-1:1,shadowColor:e.layer_data.shadowColor,shadowBlur:e.layer_data.shadowBlur,shadowOpacity:e.layer_data.shadowOpacity,shadowOffsetX:t.x,shadowOffsetY:t.y,onSelect:function(){return a(e)},listening:!e.layer_locked&&r===x.f.DEFAULT,frameSize:n,layer_data:e.layer_data,onChange:function(t){return c(e,t)},onHover:function(t){return l(e,t)}},e.id)}))})},ge=b.a.memo(pe),me=function(e){var t=e.fontFamily,a=e.fontFile,n=e.loadedFontList,r=(e.loadedList,e.shadowColor),o=e.shadowBlur,c=e.shadowOpacity,l=e.shadowOffsetX,d=e.shadowOffsetY,b=e.onSelect,j=e.onChange,h=e.onFontLoad,O=e.onHover,f=Object(te.a)(e,["fontFamily","fontFile","loadedFontList","loadedList","shadowColor","shadowBlur","shadowOpacity","shadowOffsetX","shadowOffsetY","onSelect","onChange","onFontLoad","onHover"]),y=Object(u.useState)(null),p=Object(s.a)(y,2),g=p[0],m=p[1],x=Object(u.useRef)();Object(u.useEffect)((function(){t&&a&&(n.includes(t)?m(t):_())}),[t,a]);var _=function(){new FontFace(t,a).load().then((function(e){document.fonts.add(e),h(t),m(t)})).catch((function(e){console.warn(e,t)}))};return Object(A.jsx)(q.m,Object(i.a)(Object(i.a)({},f),{},{fontFamily:g,onClick:b,onTap:b,ref:x,shadowColor:x.current?r:null,shadowBlur:x.current?o:null,shadowOpacity:x.current?c:null,shadowOffsetX:x.current?l:null,shadowOffsetY:x.current?d:null,draggable:j,onDragStart:function(e){b()},onDragEnd:function(e){if(j){var t=x.current;j({left:Object(oe.h)(e.target.x()),top:Object(oe.h)(e.target.y()),width:Object(oe.h)(Math.max(5,t.width())),height:Object(oe.h)(Math.max(5,t.height()))})}},onTransformEnd:function(e){if(j){var t=x.current,a=t.scaleX(),n=t.scaleY();j({left:Object(oe.h)(t.x()),top:Object(oe.h)(t.y()),width:Object(oe.h)(Math.max(5,t.width())),height:Object(oe.h)(Math.max(5,t.height())),rotation:Object(oe.h)(t.rotation())||0,scaleX:Object(oe.h)(Math.max(.01,a)),scaleY:Object(oe.h)(Math.max(.01,n)),flop:a>0?0:1,flip:n>0?0:1})}},perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,onMouseOver:function(){return f.listening&&O&&O(!0)},onMouseOut:function(){return f.listening&&O&&O(!1)}}))},xe=function(e){var t=e.layers,a=e.loadedFontList,n=e.fonts,r=e.frameSize,o=e.mouseMode,c=e.setCurrentLayer,l=e.boardRotate,i=e.onChange,s=e.onFontLoad,d=e.onHover,b=Object(u.useMemo)((function(){return h.a.orderBy(t.filter((function(e){return(e.layer_type===x.e.LOGO||e.layer_type===x.e.UPLOAD||e.layer_type===x.e.TEXT)&&e.layer_visible})),["layer_order"],["desc"])}),[t]),j=Object(u.useCallback)((function(e){return n.length?n.find((function(t){return t.id===e.layer_data.font})):{}}),[n]),O=Object(u.useCallback)((function(e){return Object(oe.f)(l,{x:e.layer_data.shadowOffsetX,y:e.layer_data.shadowOffsetY})}),[l]);return Object(A.jsx)(A.Fragment,{children:b.map((function(e){var t=O(e);if(e.layer_type!==x.e.TEXT)return Object(A.jsx)(ce,{name:e.id.toString(),src:"".concat(le.a.assetsURL,"/").concat(e.layer_data.source_file),x:parseFloat(e.layer_data.left||0),y:parseFloat(e.layer_data.top||0),allowFit:!0,width:e.layer_data.width,height:e.layer_data.height,frameSize:r,rotation:e.layer_data.rotation,boardRotate:l,scaleX:1===e.layer_data.flop?-1:1,scaleY:1===e.layer_data.flip?-1:1,shadowColor:e.layer_data.shadowColor,shadowBlur:e.layer_data.shadowBlur,shadowOpacity:e.layer_data.shadowOpacity,shadowOffsetX:t.x,shadowOffsetY:t.y,opacity:e.layer_data.opacity,layer_data:e.layer_data,onSelect:function(){return c(e)},listening:!e.layer_locked&&o===x.f.DEFAULT,onChange:function(t){return i(e,t)},onHover:function(t){return d(e,t)}},e.id);var n=j(e);return Object(A.jsx)(me,{name:e.id.toString(),text:e.layer_data.text,fontFamily:n.font_name,fontFile:n.font_file?"url(".concat(le.a.assetsURL,"/").concat(n.font_file,")"):null,loadedFontList:a,onFontLoad:s,fontSize:e.layer_data.size,fill:e.layer_data.color,strokeWidth:e.layer_data.stroke,stroke:e.layer_data.scolor,strokeEnabled:!0,x:parseFloat(e.layer_data.left||0),y:parseFloat(e.layer_data.top||0),offsetX:0,offsetY:0,opacity:e.layer_data.opacity,rotation:e.layer_data.rotation,scaleX:(e.layer_data.scaleX||1)*(1===e.layer_data.flop?-1:1),scaleY:(e.layer_data.scaleY||1)*(1===e.layer_data.flip?-1:1),shadowColor:e.layer_data.shadowColor,shadowBlur:e.layer_data.shadowBlur,shadowOpacity:e.layer_data.shadowOpacity,shadowOffsetX:t.x,shadowOffsetY:t.y,onSelect:function(){return c(e)},listening:!e.layer_locked&&o===x.f.DEFAULT,onChange:function(t){return i(e,t)},onHover:function(t){return d(e,t)}},e.id)}))})},_e=b.a.memo(xe),Ce=function(e){var t=e.type,a=e.x,n=e.y,r=e.width,o=e.height,c=e.radius,l=e.points,s=e.lineCap,d=e.lineJoin,b=e.pointerLength,j=e.pointerWidth,O=e.innerRadius,f=e.outerRadius,y=e.cornerRadius,p=e.numPoints,g=e.angle,m=e.onSelect,_=e.onChange,C=e.onHover,w=e.shadowColor,v=e.shadowBlur,k=e.shadowOpacity,L=e.shadowOffsetX,S=e.shadowOffsetY,R=e.layer_data,I=Object(te.a)(e,["type","x","y","width","height","radius","points","lineCap","lineJoin","pointerLength","pointerWidth","innerRadius","outerRadius","cornerRadius","numPoints","angle","onSelect","onChange","onHover","shadowColor","shadowBlur","shadowOpacity","shadowOffsetX","shadowOffsetY","layer_data"]),F=Object(u.useRef)(),M=function(e){m()},B=function(e){if(_){var a=x.a[x.e.SHAPE][t];_(h.a.pick({left:Object(oe.h)(e.target.x()),top:Object(oe.h)(e.target.y())},a.filter((function(e){return e.includes("layer_data.")})).map((function(e){return e.replace("layer_data.","")}))))}},T=function(e){if(_){var a=x.a[x.e.SHAPE][t],n=F.current,r=n.scaleX(),o=n.scaleY(),c=t!==x.f.ELLIPSE?n.width():n.radiusX(),i=t!==x.f.ELLIPSE?n.height():n.radiusY(),s=Math.abs(1!==Math.abs(Object(oe.h)(o))?o:r);n.scaleX(r>0?1:-1),n.scaleY(o>0?1:-1),_(h.a.pick({left:Object(oe.h)(n.x()),top:Object(oe.h)(n.y()),width:Object(oe.h)(Math.max(1,c*Math.abs(r))),height:Object(oe.h)(Math.max(1,i*Math.abs(o))),radius:n.radius?Object(oe.h)(Math.max(1,n.radius()*Math.abs(o))):0,innerRadius:n.innerRadius?Object(oe.h)(Math.max(1,n.innerRadius()*Math.abs(o))):0,outerRadius:n.outerRadius?Object(oe.h)(Math.max(1,n.outerRadius()*Math.abs(o))):0,rotation:Object(oe.h)(n.rotation())||0,flop:r>0?0:1,flip:o>0?0:1,stroke:Object(oe.h)(n.strokeWidth()*s),shadowBlur:Object(oe.h)(n.shadowBlur()*s),shadowOffsetX:Object(oe.h)(R.shadowOffsetX*Math.abs(r)),shadowOffsetY:Object(oe.h)(R.shadowOffsetY*Math.abs(o)),cornerTopLeft:Object(oe.h)(R.cornerTopLeft*s),cornerTopRight:Object(oe.h)(R.cornerTopRight*s),cornerBottomLeft:Object(oe.h)(R.cornerBottomLeft*s),cornerBottomRight:Object(oe.h)(R.cornerBottomRight*s),points:l.map((function(e,t){return t%2===0?Object(oe.h)(e*Math.abs(r)):Object(oe.h)(e*Math.abs(o))}))},a.filter((function(e){return e.includes("layer_data.")})).map((function(e){return e.replace("layer_data.","")}))))}};return Object(A.jsx)(A.Fragment,{children:t===x.f.RECT?Object(A.jsx)(q.h,Object(i.a)(Object(i.a)({},I),{},{ref:F,shadowColor:F.current?w:null,shadowBlur:F.current?v:null,shadowOpacity:F.current?k:null,shadowOffsetX:F.current?L:null,shadowOffsetY:F.current?S:null,cornerRadius:y,x:a,y:n,width:r,height:o,draggable:_,onClick:m,onDragStart:M,onDragEnd:B,onTransformEnd:T,shadowForStrokeEnabled:!1,onMouseOver:function(){return I.listening&&C&&C(!0)},onMouseOut:function(){return I.listening&&C&&C(!1)}})):t===x.f.CIRCLE?Object(A.jsx)(q.c,Object(i.a)(Object(i.a)({},I),{},{ref:F,x:a,y:n,radius:c,shadowColor:F.current?w:null,shadowBlur:F.current?v:null,shadowOpacity:F.current?k:null,shadowOffsetX:F.current?L:null,shadowOffsetY:F.current?S:null,draggable:_,onClick:m,onDragStart:M,onDragEnd:B,onTransformEnd:T,shadowForStrokeEnabled:!1,onMouseOver:function(){return I.listening&&C&&C(!0)},onMouseOut:function(){return I.listening&&C&&C(!1)}})):t===x.f.ELLIPSE?Object(A.jsx)(q.d,Object(i.a)(Object(i.a)({},I),{},{ref:F,x:a,y:n,radiusX:r,radiusY:o,shadowColor:F.current?w:null,shadowBlur:F.current?v:null,shadowOpacity:F.current?k:null,shadowOffsetX:F.current?L:null,shadowOffsetY:F.current?S:null,draggable:_,onClick:m,onDragStart:M,onDragEnd:B,onTransformEnd:T,shadowForStrokeEnabled:!1,onMouseOver:function(){return I.listening&&C&&C(!0)},onMouseOut:function(){return I.listening&&C&&C(!1)}})):t===x.f.STAR?Object(A.jsx)(q.l,Object(i.a)(Object(i.a)({},I),{},{ref:F,x:a,y:n,innerRadius:O,outerRadius:f,numPoints:p,shadowColor:F.current?w:null,shadowBlur:F.current?v:null,shadowOpacity:F.current?k:null,shadowOffsetX:F.current?L:null,shadowOffsetY:F.current?S:null,draggable:_,onClick:m,onDragStart:M,onDragEnd:B,onTransformEnd:T,shadowForStrokeEnabled:!1,onMouseOver:function(){return I.listening&&C&&C(!0)},onMouseOut:function(){return I.listening&&C&&C(!1)}})):t===x.f.RING?Object(A.jsx)(q.j,Object(i.a)(Object(i.a)({},I),{},{ref:F,x:a,y:n,innerRadius:O,outerRadius:f,shadowColor:F.current?w:null,shadowBlur:F.current?v:null,shadowOpacity:F.current?k:null,shadowOffsetX:F.current?L:null,shadowOffsetY:F.current?S:null,draggable:_,onClick:m,onDragStart:M,onDragEnd:B,onTransformEnd:T,shadowForStrokeEnabled:!1,onMouseOver:function(){return I.listening&&C&&C(!0)},onMouseOut:function(){return I.listening&&C&&C(!1)}})):t===x.f.REGULARPOLYGON?Object(A.jsx)(q.i,Object(i.a)(Object(i.a)({},I),{},{ref:F,x:a,y:n,radius:c,sides:p,shadowColor:F.current?w:null,shadowBlur:F.current?v:null,shadowOpacity:F.current?k:null,shadowOffsetX:F.current?L:null,shadowOffsetY:F.current?S:null,draggable:_,onClick:m,onDragStart:M,onDragEnd:B,onTransformEnd:T,shadowForStrokeEnabled:!1,onMouseOver:function(){return I.listening&&C&&C(!0)},onMouseOut:function(){return I.listening&&C&&C(!1)}})):t===x.f.WEDGE?Object(A.jsx)(q.o,Object(i.a)(Object(i.a)({},I),{},{ref:F,x:a,y:n,radius:c,angle:g,shadowColor:F.current?w:null,shadowBlur:F.current?v:null,shadowOpacity:F.current?k:null,shadowOffsetX:F.current?L:null,shadowOffsetY:F.current?S:null,draggable:_,onClick:m,onDragStart:M,onDragEnd:B,onTransformEnd:T,shadowForStrokeEnabled:!1,onMouseOver:function(){return I.listening&&C&&C(!0)},onMouseOut:function(){return I.listening&&C&&C(!1)}})):t===x.f.ARC?Object(A.jsx)(q.a,Object(i.a)(Object(i.a)({},I),{},{ref:F,x:a,y:n,innerRadius:O,outerRadius:f,angle:g,shadowColor:F.current?w:null,shadowBlur:F.current?v:null,shadowOpacity:F.current?k:null,shadowOffsetX:F.current?L:null,shadowOffsetY:F.current?S:null,draggable:_,onClick:m,onDragStart:M,onDragEnd:B,onTransformEnd:T,shadowForStrokeEnabled:!1,onMouseOver:function(){return I.listening&&C&&C(!0)},onMouseOut:function(){return I.listening&&C&&C(!1)}})):t===x.f.LINE||t===x.f.PEN?Object(A.jsx)(q.g,Object(i.a)(Object(i.a)({},I),{},{ref:F,x:a,y:n,points:l,lineCap:s,lineJoin:d,shadowColor:F.current?w:null,shadowBlur:F.current?v:null,shadowOpacity:F.current?k:null,shadowOffsetX:F.current?L:null,shadowOffsetY:F.current?S:null,draggable:_,onClick:m,onDragStart:M,onDragEnd:B,onTransformEnd:T,onMouseOver:function(){return I.listening&&C&&C(!0)},onMouseOut:function(){return I.listening&&C&&C(!1)}})):t===x.f.POLYGON?Object(A.jsx)(q.g,Object(i.a)(Object(i.a)({},I),{},{ref:F,x:a,y:n,points:l,lineCap:s,lineJoin:d,shadowColor:F.current?w:null,shadowBlur:F.current?v:null,shadowOpacity:F.current?k:null,shadowOffsetX:F.current?L:null,shadowOffsetY:F.current?S:null,draggable:_,closed:!0,onClick:m,onDragStart:M,onDragEnd:B,onTransformEnd:T,onMouseOver:function(){return I.listening&&C&&C(!0)},onMouseOut:function(){return I.listening&&C&&C(!1)}})):t===x.f.ARROW?Object(A.jsx)(q.b,Object(i.a)(Object(i.a)({},I),{},{ref:F,x:a,y:n,points:l,lineCap:s,lineJoin:d,pointerLength:b,pointerWidth:j,shadowColor:F.current?w:null,shadowBlur:F.current?v:null,shadowOpacity:F.current?k:null,shadowOffsetX:F.current?L:null,shadowOffsetY:F.current?S:null,draggable:_,onClick:m,onDragStart:M,onDragEnd:B,onTransformEnd:T,onMouseOver:function(){return I.listening&&C&&C(!0)},onMouseOut:function(){return I.listening&&C&&C(!1)}})):Object(A.jsx)(A.Fragment,{})})},we=function(e){var t=e.layers,a=e.drawingLayer,n=e.setCurrentLayer,r=e.boardRotate,o=e.mouseMode,c=e.onChange,l=e.onHover,i=Object(u.useMemo)((function(){return h.a.orderBy(t.filter((function(e){return e.layer_type===x.e.SHAPE&&e.layer_visible})),["layer_order"],["desc"])}),[t]),s=Object(u.useCallback)((function(e){return Object(oe.f)(r,{x:e.layer_data.shadowOffsetX,y:e.layer_data.shadowOffsetY})}),[r]);return Object(A.jsxs)(A.Fragment,{children:[i.map((function(e){var t=s(e);return Object(A.jsx)(Ce,{type:e.layer_data.type,x:parseFloat(e.layer_data.left||0),y:parseFloat(e.layer_data.top||0),width:e.layer_data.width,height:e.layer_data.height,radius:e.layer_data.radius,points:e.layer_data.points?Object(oe.l)(e.layer_data.points):[],pointerLength:e.layer_data.pointerLength,pointerWidth:e.layer_data.pointerWidth,lineCap:e.layer_data.lineCap,lineJoin:e.layer_data.lineJoin,innerRadius:e.layer_data.innerRadius,outerRadius:e.layer_data.outerRadius,numPoints:e.layer_data.numPoints,cornerRadius:[e.layer_data.cornerTopLeft,e.layer_data.cornerTopRight,e.layer_data.cornerBottomLeft,e.layer_data.cornerBottomRight],rotation:e.layer_data.rotation,angle:e.layer_data.angle,opacity:e.layer_data.opacity,scaleX:1===e.layer_data.flop?-1:1,scaleY:1===e.layer_data.flip?-1:1,shadowColor:e.layer_data.shadowColor,shadowBlur:e.layer_data.shadowBlur,shadowOpacity:e.layer_data.shadowOpacity,shadowOffsetX:t.x,shadowOffsetY:t.y,fill:e.layer_data.color,strokeWidth:e.layer_data.stroke,stroke:e.layer_data.scolor,strokeEnabled:!0,name:e.id.toString(),layer_data:e.layer_data,perfectDrawEnabled:!1,onSelect:function(){return n(e)},listening:!e.layer_locked&&o===x.f.DEFAULT,onChange:function(t){return c(e,t)},onHover:function(t){return l(e,t)}},e.id)})),a?Object(A.jsx)(Ce,{type:a.layer_data.type,x:parseFloat(a.layer_data.left||0),y:parseFloat(a.layer_data.top||0),width:a.layer_data.width,height:a.layer_data.height,radius:a.layer_data.radius,angle:a.layer_data.angle,points:a.layer_data.points?Object(oe.l)(a.layer_data.points):[],pointerLength:a.layer_data.pointerLength,pointerWidth:a.layer_data.pointerWidth,lineCap:a.layer_data.lineCap,lineJoin:a.layer_data.lineJoin,innerRadius:a.layer_data.innerRadius,outerRadius:a.layer_data.outerRadius,numPoints:a.layer_data.numPoints,fill:a.layer_data.color,strokeWidth:a.layer_data.stroke,stroke:a.layer_data.scolor,strokeEnabled:!0,layer_data:a.layer_data,perfectDrawEnabled:!1}):Object(A.jsx)(A.Fragment,{})]})},ve=b.a.memo(we),ke=function(e){var t=e.selectedLayer,a=e.pressedKey,n=e.hoveredTransform,r=Object(u.useRef)(),o=Object(u.useMemo)((function(){return t&&(t.layer_data.sizeLocked||t.layer_data.scaleLocked||[x.f.CIRCLE,x.f.STAR,x.f.RING,x.f.REGULARPOLYGON,x.f.WEDGE,x.f.ARC].includes(t.layer_data.type)||"shift"===a)}),[t,a]);Object(u.useEffect)((function(){!function(){if(t){var e=r.current.getStage().findOne("."+t.id);if(e===r.current.node())return;e?r.current.nodes([e]):r.current.detach(),r.current.getLayer().batchDraw()}}()}));var c=function(e,t){return function(e,t,a){var n=Math.round(a.x+(e.x-a.x)*Math.cos(t)-(e.y-a.y)*Math.sin(t)),r=Math.round(a.y+(e.x-a.x)*Math.sin(t)+(e.y-a.y)*Math.cos(t));return Object(i.a)(Object(i.a)({},e),{},{rotation:e.rotation+t,x:n,y:r})}(e,t,function(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}(e))};return t?Object(A.jsx)(q.n,{ref:r,keepRatio:o,enabledAnchors:n?[]:o?["top-left","top-right","bottom-left","bottom-right"]:["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],rotateEnabled:!n,boundBoxFunc:function(e,t){var n=function(e){var t=e<0?2*Math.PI+e:e,a=Math.PI/12;return Math.round(t/a)*a}(t.rotation)-e.rotation;return"shift"===a?t.rotation-e.rotation===0?t:Math.abs(n)>0?c(e,n):e:t},borderStroke:n?"red":null}):Object(A.jsx)(A.Fragment,{})},Le=a(140),Se=a(40),Re=Object(d.c)(k.a).withConfig({displayName:"Board__IconButton",componentId:"sc-13eabpa-0"})(w.b),Ie=Object(d.c)(Re).withConfig({displayName:"Board__RotationButton",componentId:"sc-13eabpa-1"})(["background:black;border-radius:0;&:hover{background:#444;}"]),Fe=function(e){var t=e.hoveredLayerJSON,a=e.onChangeHoverJSONItem,n=e.onChangeBoardRotation,r=e.stageRef,o=e.baseLayerRef,l=e.mainLayerRef,d=e.carMaskLayerRef,b=Object(u.useState)({}),j=Object(s.a)(b,2),h=j[0],f=j[1],y=Object(u.useRef)(null),p=Object(u.useRef)(0),g=Object(u.useRef)(0),_=Object(u.useState)(0),w=Object(s.a)(_,2),v=w[0],k=w[1],L=Object(O.d)(),S=Object(Q.a)(),R=S.width,I=S.height,F=S.ref,M=Object(O.e)((function(e){return e.boardReducer.frameSize})),B=Object(O.e)((function(e){return e.boardReducer.zoom})),T=Object(O.e)((function(e){return e.boardReducer.paintingGuides})),D=Object(O.e)((function(e){return e.boardReducer.pressedKey})),N=Object(O.e)((function(e){return e.boardReducer.boardRotate})),P=Object(O.e)((function(e){return e.boardReducer.mouseMode})),z=Object(O.e)((function(e){return e.carMakeReducer.current})),Y=Object(O.e)((function(e){return e.schemeReducer.current})),W=Object(O.e)((function(e){return e.fontReducer.list})),X=Object(O.e)((function(e){return e.fontReducer.loadedList})),U=Object(O.e)((function(e){return e.layerReducer.list})),G=Object(O.e)((function(e){return e.layerReducer.current})),K=Object(O.e)((function(e){return e.layerReducer.drawingStatus}));Object(u.useEffect)((function(){switch(K){case Se.a.ADD_TO_SHAPE:if(y.current){var e=Object(i.a)(Object(i.a)({},y.current),{},{layer_data:Object(i.a)(Object(i.a)({},y.current.layer_data),{},{points:Object(oe.l)(y.current.layer_data.points)})});L(Object(Se.g)(Y.id,e)),L(Object(C.g)(x.f.DEFAULT))}break;case Se.a.CLEAR_COMMAND:y.current=null,L(Object(Se.o)(null))}}),[K]),Z()((function(){P!==x.f.DEFAULT&&k(v+1)}),50*(Math.min(g.current-p.current>4?g.current-p.current:(g.current-p.current)/2,20)||1)),Z()((function(){P!==x.f.DEFAULT&&(g.current=g.current+1)}),5);var H=Object(u.useCallback)((function(e){P===x.f.DEFAULT&&(e.target===e.target.getStage()&&G&&L(Object(Se.n)(null)))}),[L,P,G]),V=Object(u.useCallback)((function(e){if(P!==x.f.DEFAULT){var t=Object(oe.e)(r.current);if(y.current){if([x.f.LINE,x.f.ARROW,x.f.POLYGON].includes(P)){var a=Object(i.a)(Object(i.a)({},y.current),{},{layer_data:Object(i.a)(Object(i.a)({},y.current.layer_data),{},{points:Object(oe.l)(y.current.layer_data.points)})});a.layer_data.points=a.layer_data.points.concat([t.x-y.current.layer_data.left,t.y-y.current.layer_data.top,t.x-y.current.layer_data.left,t.y-y.current.layer_data.top]),y.current=a}}else{var n=Object(i.a)(Object(i.a)({},x.b),{},{layer_type:x.e.SHAPE,layer_data:Object(i.a)(Object(i.a)({},x.b.layer_data),{},{type:P,name:P,left:t.x,top:t.y,color:"#000000",scolor:"#000000",stroke:1})});[x.f.LINE,x.f.ARROW,x.f.POLYGON].includes(P)&&(n.layer_data.stroke=5,n.layer_data.points=[0,0,0,0]),P===x.f.PEN&&(n.layer_data.stroke=5,n.layer_data.points=[0,0]),y.current=n}}}),[P,oe.e,y.current,r.current]),J=Object(u.useCallback)((function(){if(P!==x.f.DEFAULT&&y.current){var e=Object(oe.e)(r.current),t=e.x-y.current.layer_data.left,a=e.y-y.current.layer_data.top,n=e.x-y.current.layer_data.left,o=e.y-y.current.layer_data.top;if((y.current.layer_data.points.length<2||n!==y.current.layer_data.points[y.current.layer_data.points.length-2]||o!==y.current.layer_data.points[y.current.layer_data.points.length-1])&&(g.current-p.current>1||y.current.layer_data.points.length<2||Math.abs(n-y.current.layer_data.points[y.current.layer_data.points.length-2])>10||Math.abs(o-y.current.layer_data.points[y.current.layer_data.points.length-1])>10)){var l=Object(i.a)(Object(i.a)({},y.current),{},{layer_data:Object(i.a)(Object(i.a)({},y.current.layer_data),{},{points:Object(c.a)(y.current.layer_data.points),width:t,height:a,radius:Math.abs(t),innerRadius:Math.abs(t)/2.5,outerRadius:Math.abs(t)})});[x.f.LINE,x.f.ARROW,x.f.POLYGON].includes(P)&&l.layer_data.points.splice(-2,2,n,o),P===x.f.PEN&&(l.layer_data.points.push(n),l.layer_data.points.push(o)),y.current=l}p.current=g.current}}),[P,y.current,oe.e,r.current,g.current]),te=Object(u.useCallback)((function(e){[x.f.DEFAULT,x.f.LINE,x.f.ARROW,x.f.POLYGON].includes(P)||L(Object(Se.o)(Se.a.ADD_TO_SHAPE));var t=Object(oe.e)(r.current);f(t)}),[L,P,oe.e,f]),ae=Object(u.useCallback)((function(e){var t=Object(oe.e)(r.current);[x.f.DEFAULT,x.f.LINE,x.f.ARROW,x.f.POLYGON].includes(P)&&y.current&&h.x===t.x&&h.y===t.y&&L(Object(Se.o)(Se.a.ADD_TO_SHAPE))}),[L,P,oe.e,y.current,h]),ne=Object(u.useCallback)((function(e){if(e.evt.preventDefault(),null!==r.current&&e.evt.ctrlKey){var t=r.current,a=t.scaleX(),n=t.getPointerPosition(),o=n.x,c=n.y,l={x:(o-t.x())/a,y:(c-t.y())/a},i=Math.max(Math.min(e.evt.deltaY>0?a/1.2:1.2*a,10),.25);L(Object(C.j)(i));var s={x:o-l.x*i,y:c-l.y*i};t.position(s),t.batchDraw()}}),[L,r.current]),re=Object(u.useCallback)((function(e){(M.width<e.width||M.height<e.height)&&L(Object(C.f)({width:Math.max(M.width,e.width),height:Math.max(M.height,e.height)}))}),[L,M]),ce=Object(u.useCallback)((function(e,t){L(Object(Se.q)(Object(i.a)(Object(i.a)({},e),{},{layer_data:Object(i.a)(Object(i.a)({},e.layer_data),t)})))}),[L]),le=Object(u.useCallback)((function(e){L(Object(Se.n)(e))}),[L]),ie=Object(u.useCallback)((function(e,t){a(e.id,t)}),[a]),de=Object(u.useCallback)((function(e){L(Object(Le.c)(e))}),[L]),be=Object(u.useCallback)((function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?(e=N+90)>=360&&(e=0):(e=N-90)<0&&(e=270),n(e)}),[N,n]);return Object(A.jsxs)(m.a,{width:"100%",height:"100%",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",margin:"auto",position:"relative",id:"board-wrapper",ref:F,children:[Object(A.jsxs)(q.k,{width:R,height:I,onMousedown:H,onContentMousedown:V,onContentMousemove:J,onContentMouseup:te,onDblClick:ae,onTouchStart:H,onWheel:ne,scaleX:B||1,scaleY:B||1,rotation:N,x:R-M.width/2,y:I-M.height/2,offsetX:R/2,offsetY:I/2,ref:r,draggable:P===x.f.DEFAULT,style:{cursor:P===x.f.DEFAULT?"default":"crosshair"},children:[Object(A.jsxs)(q.f,{ref:o,listening:!1,children:[Object(A.jsx)(q.h,{x:0,y:0,width:M.width,height:M.height,fill:"transparent"===Y.base_color?Y.base_color:"#"+Y.base_color,listening:!1}),Object(A.jsx)(ye,{layers:U,handleImageSize:re})]}),Object(A.jsx)(q.f,{listening:!1,children:Object(A.jsx)(je,{currentCarMake:z,paintingGuides:T,handleImageSize:re,guideData:Y.guide_data})}),Object(A.jsxs)(q.f,{ref:l,children:[Object(A.jsx)(Oe,{layers:U,currentCarMake:z,handleImageSize:re}),Object(A.jsx)(ge,{layers:U,handleImageSize:re,frameSize:M,boardRotate:N,currentLayer:G,mouseMode:P,setCurrentLayer:le,onChange:ce,onHover:ie}),Object(A.jsx)(ve,{layers:U,drawingLayer:y.current,boardRotate:N,mouseMode:P,setCurrentLayer:le,currentLayer:G,onChange:ce,onHover:ie}),Object(A.jsx)(_e,{layers:U,fonts:W,loadedFontList:X,frameSize:M,mouseMode:P,boardRotate:N,setCurrentLayer:le,currentLayer:G,onChange:ce,onFontLoad:de,onHover:ie})]}),Object(A.jsx)(q.f,{ref:d,listening:!1,children:Object(A.jsx)(ue,{currentCarMake:z,paintingGuides:T,handleImageSize:re,guideData:Y.guide_data})}),Object(A.jsxs)(q.f,{children:[Object(A.jsx)(se,{currentCarMake:z,paintingGuides:T,handleImageSize:re,frameSize:M,guideData:Y.guide_data}),Object(A.jsx)(ke,{selectedLayer:G,pressedKey:D}),!t||G&&t[G.id]?Object(A.jsx)(A.Fragment,{}):Object(A.jsx)(ke,{selectedLayer:U.find((function(e){return t[e.id]})),hoveredTransform:!0})]})]}),Object(A.jsxs)(m.a,{position:"absolute",right:G?"350px":0,top:0,children:[Object(A.jsx)(E,{title:"Rotate Left",position:"bottom",arrow:!0,children:Object(A.jsx)(Ie,{onClick:function(){return be(!1)},children:Object(A.jsx)($.a,{})})}),Object(A.jsx)(E,{title:"Rotate Right",position:"bottom",arrow:!0,children:Object(A.jsx)(Ie,{onClick:function(){return be(!0)},children:Object(A.jsx)(ee.a,{})})})]})]})},Me=a(64),Be=a(1069),Te=a(436),Ee=a(1078),De=a(1079),Ne=a(1080),Pe=a(484),Ae=a(487),ze=a(486),Ye=a(1071),We=a(1108),Xe=a(1074),Ue=a(1064),Ge=a(1109),Ke=a(1075),He=a(1076),Ve=a(1077),Je=a(1073),Ze=a(1063),qe=a(1113),Qe=Object(d.c)(v.a).withConfig({displayName:"SliderInput__Typography",componentId:"sc-7loe1z-0"})(w.b),$e=Object(d.c)(Ze.a).withConfig({displayName:"SliderInput__CustomInput",componentId:"sc-7loe1z-1"})([".MuiInputBase-inputMarginDense{padding-top:4px;padding-bottom:5px;width:50px;}"]),et=Object(d.c)(m.a).withConfig({displayName:"SliderInput__SliderWrapper",componentId:"sc-7loe1z-2"})(["width:80px;margin-left:8px;margin-right:8px;height:28px;"]),tt=Object(d.c)(Ue.a).withConfig({displayName:"SliderInput__Wrapper",componentId:"sc-7loe1z-3"})(["height:100%;align-items:center;"]),at=function(e){var t=e.label,a=e.min,n=e.max,r=e.value,o=e.setValue,c=e.step;return Object(A.jsxs)(tt,{container:!0,children:[Object(A.jsx)(Ue.a,{item:!0,xs:6,children:Object(A.jsx)(Qe,{variant:"body1",color:"textSecondary",mr:2,children:t})}),Object(A.jsx)(Ue.a,{item:!0,xs:6,children:Object(A.jsxs)(m.a,{display:"flex",alignItems:"center",children:[Object(A.jsx)(et,{children:Object(A.jsx)(qe.a,{min:a,max:n,step:c,value:r,onChange:function(e,t){return o(t)},"aria-labelledby":"shape-size",ValueLabelComponent:function(e){return Object(A.jsx)(B.a,{open:e.open,enterTouchDelay:0,placement:"top",title:e.value,children:e.children})}})}),Object(A.jsx)($e,{value:r,margin:"dense",type:"number",step:c||1,onChange:function(e){return o(""===e.target.value?a||0:Number(e.target.value))},onBlur:function(){r<a?o(a):r>n&&o(n)},inputProps:{min:a,max:n,"aria-labelledby":"input-slider"}})]})})]})},nt=a(992),rt=Object(d.c)(Be.a).withConfig({displayName:"ColorPickerInput__ColorInputField",componentId:"sc-98haji-0"})(["width:80px;"]),ot=function(e){var t=e.value,a=e.onChange,n=e.onInputChange,r=e.error,o=e.helperText;return Object(A.jsxs)(m.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(A.jsxs)(m.a,{display:"flex",alignItems:"center",children:[Object(A.jsx)(nt.a,{value:t||"",onChange:function(e){return a(e.css.backgroundColor)},palette:x.h,deferred:!0,hideTextfield:!0}),Object(A.jsx)(rt,{value:t||"",onChange:function(e){return n(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&a(e.target.value)}})]}),r?Object(A.jsx)(v.a,{color:"secondary",variant:"body2",children:o}):Object(A.jsx)(A.Fragment,{})]})},ct=Object(d.c)(L.a).withConfig({displayName:"SchemeSettingsDialog__Button",componentId:"sc-1bdw1wi-0"})(w.b),lt=Object(d.c)(v.a).withConfig({displayName:"SchemeSettingsDialog__Typography",componentId:"sc-1bdw1wi-1"})(w.b),it=Object(d.c)(Ye.a).withConfig({displayName:"SchemeSettingsDialog__CustomAccordionSummary",componentId:"sc-1bdw1wi-2"})(["background:#3f3f3f;border-radius:5px;"]),st=function(e){var t=e.label,a=e.colorKey,n=e.opacityKey,r=e.errors,o=(e.handleBlur,e.handleChange,e.setFieldValue),c=(e.touched,e.values),l=e.extraChildren,i=Object(u.useState)(!0),d=Object(s.a)(i,2),b=d[0],j=d[1];return Object(A.jsxs)(We.a,{expanded:b,onChange:function(){return j(!b)},children:[Object(A.jsx)(it,{expandIcon:Object(A.jsx)(Je.a,{}),children:Object(A.jsx)(lt,{children:t})}),Object(A.jsx)(Xe.a,{children:Object(A.jsxs)(m.a,{display:"flex",flexDirection:"column",width:"100%",mb:1,children:[Object(A.jsxs)(Ue.a,{container:!0,spacing:2,children:[Object(A.jsx)(Ue.a,{item:!0,xs:12,sm:6,children:Object(A.jsxs)(m.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[Object(A.jsx)(lt,{variant:"body1",color:"textSecondary",mr:2,children:"Color"}),Object(A.jsx)(ot,{value:c[a],onChange:function(e){return o(a,e)},onInputChange:function(e){return o(a,e)},error:Boolean(r[a]),helperText:r[a]})]})}),Object(A.jsx)(Ue.a,{item:!0,xs:12,sm:6,children:Object(A.jsx)(at,{label:"Opacity",min:0,max:1,step:.01,value:c[n],setValue:function(e){return o(n,e)}})})]}),l]})})]})},dt=function(e){var t=e.onCancel,a=e.open,n=e.onApply,r=Object(O.e)((function(e){return e.schemeReducer.current.guide_data}));return Object(A.jsxs)(Ge.a,{"aria-labelledby":"insert-text-title",open:a,onClose:t,fullWidth:!0,maxWidth:"sm",children:[Object(A.jsx)(Ke.a,{id:"insert-text-title",children:"Settings"}),Object(A.jsx)(ze.b,{initialValues:{carmask_color:r.carmask_color||"",carmask_opacity:r.carmask_opacity||1,wireframe_color:r.wireframe_color||"",wireframe_opacity:r.wireframe_opacity||1,sponsor_color:r.sponsor_color||"",sponsor_opacity:r.sponsor_opacity||1,numberblock_color:r.numberblock_color||"",numberblock_opacity:r.numberblock_opacity||1,grid_color:r.grid_color||"",grid_opacity:r.grid_opacity||1,grid_padding:r.grid_padding||10,grid_stroke:r.grid_stroke||.1},validationSchema:Ae.b().shape({carmask_color:Ae.c().nullable().test("color-validation","Incorrect Color Format",oe.b),wireframe_color:Ae.c().nullable().test("color-validation","Incorrect Color Format",oe.b),sponsor_color:Ae.c().nullable().test("color-validation","Incorrect Color Format",oe.b),numberblock_color:Ae.c().nullable().test("color-validation","Incorrect Color Format",oe.b),grid_color:Ae.c().nullable().test("color-validation","Incorrect Color Format",oe.b)}),validate:function(e){return console.log(e),{}},onSubmit:n,children:function(e){return Object(A.jsxs)(ze.a,{onSubmit:e.handleSubmit,noValidate:!0,children:[Object(A.jsxs)(He.a,{dividers:!0,id:"insert-text-dialog-content",children:[Object(A.jsx)(st,Object(i.a)({label:"Car Mask",colorKey:"carmask_color",opacityKey:"carmask_opacity"},e)),Object(A.jsx)(st,Object(i.a)({label:"Wireframe",colorKey:"wireframe_color",opacityKey:"wireframe_opacity"},e)),Object(A.jsx)(st,Object(i.a)({label:"Sponsor Blocks",colorKey:"sponsor_color",opacityKey:"sponsor_opacity"},e)),Object(A.jsx)(st,Object(i.a)({label:"Number Blocks",colorKey:"numberblock_color",opacityKey:"numberblock_opacity"},e)),Object(A.jsx)(st,Object(i.a)(Object(i.a)({label:"Grid",colorKey:"grid_color",opacityKey:"grid_opacity"},e),{},{extraChildren:Object(A.jsxs)(Ue.a,{container:!0,spacing:2,children:[Object(A.jsx)(Ue.a,{item:!0,xs:12,sm:6,children:Object(A.jsx)(at,{label:"Column Size",min:5,max:50,step:1,value:e.values.grid_padding,setValue:function(t){return e.setFieldValue("grid_padding",t)}})}),Object(A.jsx)(Ue.a,{item:!0,xs:12,sm:6,children:Object(A.jsx)(at,{label:"Stroke Width",min:.01,max:3,step:.01,value:e.values.grid_stroke,setValue:function(t){return e.setFieldValue("grid_stroke",t)}})})]})}))]}),Object(A.jsxs)(Ve.a,{children:[Object(A.jsx)(ct,{onClick:t,color:"secondary",children:"Cancel"}),Object(A.jsx)(ct,{type:"submit",color:"primary",variant:"outlined",disabled:e.isSubmitting||!e.isValid,children:"Apply"})]})]})}})]})},ut=b.a.memo(dt),bt={DELETE:"Delete Layer",ENTER:"Complete Drawing",1:"Toggle Car Mask Guide",2:"Toggle Wireframe Guide",3:"Toggle Sponsor Block Guide",4:"Toggle Number Block Guide",5:"Toggle Grid Guide",T:"Insert Text",S:"Insert Overlay",L:"Insert Logo",B:"Insert Basepaint","\u2191":"Move Layer Up","\u2193":"Move Layer Down","\u2190":"Move Lyer Left","\u2192":"Move Lyer Right","Shift \u2191":"10x Move Layer Up","Shift \u2193":"10x Move Layer Down","Shift \u2190":"10x Move Lyer Left","Shift \u2192":"10x Move Lyer Right","Shift +":"Zoom In","Shift -":"Zoom Out","Shift 9":"Zoom To Fit","Shift 0":"Zoom To 100%","Shift D":"Default Mouse Mode","Shift B":"Brush Drawing Mode","Shift R":"Rectangle Drawing Mode","Shift C":"Circle Drawing Mode","Shift E":"Ellipse Drawing Mode","Shift S":"Star Drawing Mode","Shift G":"Ring Drawing Mode","Shift O":"Regular-Polygon Drawing Mode","Shift W":"Wedge Drawing Mode","Shift A":"Arc Drawing Mode","Shift P":"Polygon Drawing Mode","Shift L":"Line Drawing Mode","Shift >":"Arrow Drawing Mode","Ctrl/Meta C":"Copy Layer To Clipboard","Ctrl/Meta V":"Paste Layer From Clipboard","Ctrl/Meta Z":"Undo Action","Ctrl/Meta Y":"Redo Action"},jt=Object(d.c)(Ue.a).withConfig({displayName:"ShortCutsDialog__Grid",componentId:"sc-3fzz2e-0"})(w.b),ht=Object(d.c)(v.a).withConfig({displayName:"ShortCutsDialog__KeyText",componentId:"sc-3fzz2e-1"})(["color:#ca812c;background:#000000;width:fit-content;padding:0px 10px;border-radius:3px;"]),Ot=Object(d.c)(v.a).withConfig({displayName:"ShortCutsDialog__DescriptionText",componentId:"sc-3fzz2e-2"})(["width:fit-content;padding:0px;"]),ft=function(e){var t=e.onCancel,a=e.open;return Object(A.jsxs)(Ge.a,{"aria-labelledby":"short-cuts-title",open:a,onClose:t,fullWidth:!0,maxWidth:"sm",children:[Object(A.jsx)(Ke.a,{id:"short-cuts-title",children:"Shortcuts"}),Object(A.jsx)(He.a,{dividers:!0,id:"short-cuts-dialog-content",children:Object.keys(bt).map((function(e,t){return Object(A.jsxs)(jt,{container:!0,mb:2,children:[Object(A.jsx)(jt,{item:!0,xs:6,children:Object(A.jsx)(ht,{children:e})}),Object(A.jsx)(jt,{item:!0,xs:6,children:Object(A.jsx)(Ot,{children:bt[e]})})]},t)}))})]})},yt=b.a.memo(ft),pt=Object(d.c)(Te.a).withConfig({displayName:"TitleBar__CustomIcon",componentId:"sc-6ardfy-0"})(["width:20px !important;"]),gt="SHORTCUTS",mt="SETTINGS",xt=Object(d.c)(Be.a).withConfig({displayName:"TitleBar__NameInput",componentId:"sc-6ardfy-1"})(["width:",";"],(function(e){return e.width})),_t=function(){var e=Object(g.f)(),t=Object(O.d)(),a=Object(u.useState)(""),n=Object(s.a)(a,2),r=n[0],o=n[1],c=Object(u.useState)(null),l=Object(s.a)(c,2),d=l[0],b=l[1],j=Object(O.e)((function(e){return e.schemeReducer.current})),h=Object(u.useCallback)((function(e){o(e.target.value)}),[o]),f=Object(u.useCallback)((function(){t(Object(Me.b)(j.id,r))}),[t,j&&j.id,r]),y=Object(u.useCallback)((function(){o(j.name)}),[o,j&&j.name]),p=Object(u.useCallback)((function(){t(Object(Me.c)()),e.push("/")}),[e,t]),x=Object(u.useCallback)((function(e){t(Object(Me.h)(Object(i.a)(Object(i.a)({},j),{},{guide_data:e}))),b(null)}),[t,j,b]);return Object(u.useEffect)((function(){j&&o(j.name)}),[j&&j.name]),Object(A.jsxs)(m.a,{display:"flex",justifyContent:"space-between",alignItems:"center",px:1,my:1,children:[Object(A.jsx)(xt,{value:r,onChange:h,width:j&&r!==j.name?"105px":"185px"}),Object(A.jsxs)(m.a,{display:"flex",children:[j&&r!==j.name?Object(A.jsx)(E,{title:"Discard Change",arrow:!0,children:Object(A.jsx)(k.a,{onClick:y,color:"secondary",children:Object(A.jsx)(Ee.a,{})})}):Object(A.jsx)(A.Fragment,{}),j&&r!==j.name?Object(A.jsx)(E,{title:"Save",arrow:!0,children:Object(A.jsx)(k.a,{onClick:f,children:Object(A.jsx)(De.a,{})})}):Object(A.jsx)(A.Fragment,{}),Object(A.jsx)(E,{title:"Back",arrow:!0,children:Object(A.jsx)(k.a,{onClick:p,children:Object(A.jsx)(pt,{icon:Pe.b,size:"xs"})})}),Object(A.jsx)(E,{title:"Shortcuts",arrow:!0,children:Object(A.jsx)(k.a,{onClick:function(){return b(gt)},children:Object(A.jsx)(pt,{icon:Pe.k,size:"xs"})})}),Object(A.jsx)(E,{title:"Settings",arrow:!0,children:Object(A.jsx)(k.a,{onClick:function(){return b(mt)},children:Object(A.jsx)(Ne.a,{})})})]}),Object(A.jsx)(yt,{open:d===gt,onCancel:function(){return b(null)}}),Object(A.jsx)(ut,{open:d===mt,onApply:x,onCancel:function(){return b(null)}})]})},Ct=b.a.memo(_t),wt=a(12),vt=a(993),kt=a(1085),Lt=a(1086),St=a(1087),Rt=a(1088),It=a(1072),Ft=a(1089),Mt=a(1067),Bt=a(1081),Tt=a(1082),Et=a(1083),Dt=a(1084),Nt=Object(d.c)(m.a).withConfig({displayName:"PartItem__Wrapper",componentId:"sc-1vufzst-0"})(["cursor:pointer;&.sortable-chosen{background:rgba(255,255,255,0.2);}&.activeItem{background:rgba(0,0,0,0.5);}&.hoveredItem{background:rgba(0,0,0,0.2);}"]),Pt=Object(d.c)(v.a).withConfig({displayName:"PartItem__CustomTypography",componentId:"sc-1vufzst-1"})(["color:",";"],(function(e){return"true"===e.active?"white":"darkgray"})),At=Object(d.c)(k.a).withConfig({displayName:"PartItem__SmallIconButton",componentId:"sc-1vufzst-2"})([".MuiSvgIcon-root{width:18px;height:18px;}"]),zt=function(e){var t=e.layer_visible,a=e.layer_locked,n=e.text,r=e.toggleVisible,o=e.toggleLocked,c=e.selected,l=e.disableLock,i=e.onSelect,s=e.hovered,d=e.onHover,b=Object(u.useRef)(null),j=Object(u.useCallback)((function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),r()}),[r]),h=Object(u.useCallback)((function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),o()}),[r]);return Object(A.jsx)(Nt,{ref:b,px:2,py:1,mb:1,display:"flex",width:"100%",border:1,borderColor:"grey.700",borderRadius:5,onClick:i,onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},className:Object(wt.a)(c&&"activeItem",s&&"hoveredItem"),children:Object(A.jsxs)(m.a,{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",children:[Object(A.jsx)(Pt,{variant:"body2",active:t?"true":"false",noWrap:!0,children:n}),Object(A.jsxs)(m.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[!l&&(c||s||a)?Object(A.jsx)(m.a,{mr:1,children:Object(A.jsx)(At,{onClick:h,size:"small",children:a?Object(A.jsx)(Bt.a,{}):Object(A.jsx)(Tt.a,{})})}):Object(A.jsx)(m.a,{width:"24px",height:"24px",mr:1}),c||s||!t?Object(A.jsx)(At,{onClick:j,size:"small",children:t?Object(A.jsx)(Et.a,{}):Object(A.jsx)(Dt.a,{})}):Object(A.jsx)(m.a,{width:"24px",height:"24px"})]})]})})},Yt=b.a.memo(zt),Wt=Object(Mt.a)((function(e){return{expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}})),Xt=Object(d.c)(L.a).withConfig({displayName:"PartGroup__Button",componentId:"d20ix9-0"})(w.b),Ut=Object(d.c)(kt.a).withConfig({displayName:"PartGroup__ButtonGroup",componentId:"d20ix9-1"})(w.b),Gt=Object(d.c)(Xt).withConfig({displayName:"PartGroup__AddButton",componentId:"d20ix9-2"})(["min-width:40px;padding:3px 5px;.MuiButton-startIcon{margin-right:2px;}.MuiButton-endIcon{margin:0;}.fa-lg{font-size:1.3333333333em !important;}"]),Kt=Object(d.c)(Lt.a).withConfig({displayName:"PartGroup__CustomCardHeader",componentId:"d20ix9-3"})([".MuiCardHeader-title{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;}.MuiCardHeader-content{width:calc(100% - 50px);}"]),Ht=Object(d.c)(St.a).withConfig({displayName:"PartGroup__CustomCardContent",componentId:"d20ix9-4"})(["padding-top:0;"]),Vt=function(e){var t=Wt(),a=Object(O.d)(),n=Object(u.useState)(!0),r=Object(s.a)(n,2),o=r[0],c=r[1],d=Object(O.e)((function(e){return e.layerReducer.current})),b=e.layerList,j=e.title,f=e.actions,y=e.extraChildren,p=e.disableLock,g=e.disableDnd,_=e.hoveredLayerJSON,w=e.onChangeHoverJSONItem,v=Object(u.useMemo)((function(){return h.a.orderBy(b,["layer_order"],["asc"])}),[b]);Object(u.useEffect)((function(){for(var e in v)v[e].layer_order!==parseInt(e)+1&&a(Object(Se.q)(Object(i.a)(Object(i.a)({},v[e]),{},{layer_order:parseInt(e)+1}),!1))}),[b.length]);var L=Object(u.useCallback)((function(){c((function(e){return!e}))}),[c]),S=Object(u.useCallback)((function(e){var t=function(t){var n=b.find((function(a){return a.id==e[t].id}));n&&n.layer_order!==parseInt(t)+1&&a(Object(Se.q)(Object(i.a)(Object(i.a)({},n),{},{layer_order:parseInt(t)+1}),!1))};for(var n in e)t(n)}),[b,a]),R=Object(u.useCallback)((function(e,t){var n=b.find((function(t){return t.id===e}));a(Object(Se.q)(Object(i.a)(Object(i.a)({},n),{},Object(l.a)({},t,n[t]?0:1))))}),[b,a]),I=Object(u.useCallback)((function(e){a(Object(Se.n)(e)),a(Object(C.g)(x.f.DEFAULT))}),[a]),F=Object(u.useCallback)((function(e,t){w(e.id,t)}),[w]);return Object(A.jsx)(m.a,{mb:2,children:Object(A.jsxs)(Rt.a,{children:[Object(A.jsx)(Kt,{title:j,action:Object(A.jsxs)(m.a,{display:"flex",children:[f?Object(A.jsx)(Ut,{mr:1,children:f.map((function(e,t){return Object(A.jsx)(Gt,{onClick:e.onClick,size:"small",startIcon:Object(A.jsx)(Ft.a,{}),endIcon:Object(A.jsx)(Te.a,{icon:e.icon,size:"lg"}),variant:"outlined"},t)}))}):Object(A.jsx)(A.Fragment,{}),Object(A.jsx)(k.a,{onClick:L,className:Object(wt.a)(t.expand,Object(l.a)({},t.expandOpen,o)),children:Object(A.jsx)(Je.a,{})})]})}),Object(A.jsx)(It.a,{in:o,children:Object(A.jsxs)(Ht,{children:[Object(A.jsx)(vt.ReactSortable,{list:v,setList:S,animation:150,onChoose:function(e){return console.log(e)},onSelect:function(e){return console.log(e)},sort:!g,children:v.map((function(e){return Object(A.jsx)(Yt,{text:e.layer_data.name,layer_visible:e.layer_visible,layer_locked:e.layer_locked,toggleVisible:function(){return R(e.id,"layer_visible")},toggleLocked:function(){return R(e.id,"layer_locked")},selected:d&&d.id===e.id,hovered:_[e.id],onSelect:function(){return I(e)},onHover:function(t){return F(e,t)},disableLock:p},e.id)}))}),y]})})]})})},Jt=a(1068),Zt=a(1116),qt=a(1096),Qt=a(1095),$t=a(1097),ea=a(1098),ta=a(1023),aa=a(421),na=a(138),ra=a(1090),oa=a(1091),ca=a(1092),la=Object(d.c)(L.a).withConfig({displayName:"BasePaintDialog__Button",componentId:"sc-1dconu8-0"})(w.b),ia=Object(d.c)(aa.a).withConfig({displayName:"BasePaintDialog__CustomInfiniteScroll",componentId:"sc-1dconu8-1"})(["&.infinite-scroll-component{overflow:hidden !important;}"]),sa=Object(d.c)(ra.a).withConfig({displayName:"BasePaintDialog__CustomGridList",componentId:"sc-1dconu8-2"})(["overflow:hidden !important;margin:0 !important;"]),da=Object(d.c)(oa.a).withConfig({displayName:"BasePaintDialog__CustomGridListTile",componentId:"sc-1dconu8-3"})(["cursor:pointer;"]),ua=d.c.img.withConfig({displayName:"BasePaintDialog__CustomImg",componentId:"sc-1dconu8-4"})(["width:100%;height:100%;position:relative;object-fit:contain;"]),ba=b.a.memo((function(e){var t=Object(u.useState)(15),a=Object(s.a)(t,2),n=a[0],r=a[1],o=e.basePaints,c=e.onCancel,l=e.open,i=e.onOpenBase;return Object(A.jsxs)(Ge.a,{"aria-labelledby":"base-paints-title",open:l,onClose:c,children:[Object(A.jsx)(Ke.a,{id:"base-paints-title",children:"Select Base Paint"}),Object(A.jsx)(He.a,{dividers:!0,id:"base-paint-dialog-content",children:Object(A.jsx)(ia,{dataLength:n,next:function(){r(n+15)},hasMore:n<o.length,loader:Object(A.jsx)(na.a,{}),scrollableTarget:"base-paint-dialog-content",children:Object(A.jsx)(sa,{cellHeight:178,cols:3,children:o.slice(0,n).map((function(e){return Object(A.jsxs)(da,{cols:1,onClick:function(){return i(e)},children:[Object(A.jsx)(ua,{src:"".concat(le.a.assetsURL,"/bases/").concat(e.id,"/preview.jpg"),alt:e.base_description}),Object(A.jsx)(ca.a,{title:e.base_name,subtitle:e.base_description})]},e.id)}))})})}),Object(A.jsx)(Ve.a,{children:Object(A.jsx)(la,{onClick:c,color:"secondary",children:"Cancel"})})]})})),ja=a(444),ha=Object(d.c)(L.a).withConfig({displayName:"ShapeDialog__Button",componentId:"sc-12nk2gq-0"})(w.b),Oa=Object(d.c)(aa.a).withConfig({displayName:"ShapeDialog__CustomInfiniteScroll",componentId:"sc-12nk2gq-1"})(["&.infinite-scroll-component{overflow:hidden !important;}"]),fa=Object(d.c)(ra.a).withConfig({displayName:"ShapeDialog__CustomGridList",componentId:"sc-12nk2gq-2"})(["overflow:hidden !important;margin:0 !important;"]),ya=Object(d.c)(oa.a).withConfig({displayName:"ShapeDialog__CustomGridListTile",componentId:"sc-12nk2gq-3"})(["cursor:pointer;"]),pa=Object(d.c)(He.a).withConfig({displayName:"ShapeDialog__CustomDialogContent",componentId:"sc-12nk2gq-4"})(["width:600px;"]),ga=d.c.img.withConfig({displayName:"ShapeDialog__CustomImg",componentId:"sc-12nk2gq-5"})(["width:100%;height:100%;position:relative;object-fit:contain;"]),ma=function(e){var t=Object(u.useState)(15),a=Object(s.a)(t,2),n=a[0],r=a[1],o=Object(u.useState)(""),c=Object(s.a)(o,2),l=c[0],i=c[1],d=e.shapes,b=e.onCancel,j=e.open,h=e.onOpenShape,O=d.filter((function(e){return e.name.toLowerCase().includes(l.toLowerCase())||e.description.toLowerCase().includes(l.toLowerCase())}));return Object(A.jsxs)(Ge.a,{"aria-labelledby":"shape-title",open:j,onClose:b,children:[Object(A.jsx)(Ke.a,{id:"shape-title",children:"Insert Shape"}),Object(A.jsxs)(pa,{dividers:!0,children:[Object(A.jsx)(m.a,{mb:2,children:Object(A.jsx)(ja.a,{value:l,onChange:function(e){return i(e)}})}),Object(A.jsx)(m.a,{id:"shape-dialog-content",overflow:"auto",height:"70vh",children:Object(A.jsx)(Oa,{dataLength:n,next:function(){r(n+15)},hasMore:n<O.length,loader:Object(A.jsx)(na.a,{}),scrollableTarget:"shape-dialog-content",children:Object(A.jsx)(fa,{cellHeight:178,cols:3,children:O.slice(0,n).map((function(e){return Object(A.jsxs)(ya,{cols:1,onClick:function(){return h(e)},children:[Object(A.jsx)(ga,{src:"".concat(le.a.assetsURL,"/").concat(e.overlay_thumb),alt:e.name}),Object(A.jsx)(ca.a,{title:e.name,subtitle:e.description})]},e.id)}))})})})]}),Object(A.jsx)(Ve.a,{children:Object(A.jsx)(ha,{onClick:b,color:"secondary",children:"Cancel"})})]})},xa=b.a.memo(ma),_a=a(1105),Ca=a(1093),wa=Object(d.c)(L.a).withConfig({displayName:"LogoDialog__Button",componentId:"sc-39n1mp-0"})(w.b),va=Object(d.c)(v.a).withConfig({displayName:"LogoDialog__Typography",componentId:"sc-39n1mp-1"})(w.b),ka=Object(d.c)(aa.a).withConfig({displayName:"LogoDialog__CustomInfiniteScroll",componentId:"sc-39n1mp-2"})(["&.infinite-scroll-component{overflow:hidden !important;}"]),La=Object(d.c)(ra.a).withConfig({displayName:"LogoDialog__CustomGridList",componentId:"sc-39n1mp-3"})(["overflow:hidden !important;margin:0 !important;"]),Sa=Object(d.c)(oa.a).withConfig({displayName:"LogoDialog__CustomGridListTile",componentId:"sc-39n1mp-4"})(["cursor:pointer;"]),Ra=Object(d.c)(He.a).withConfig({displayName:"LogoDialog__CustomDialogContent",componentId:"sc-39n1mp-5"})(["width:600px;"]),Ia=d.c.img.withConfig({displayName:"LogoDialog__CustomImg",componentId:"sc-39n1mp-6"})(["width:100%;height:100%;position:relative;object-fit:contain;"]),Fa=Object(T.a)({indicator:{display:"flex",justifyContent:"center",backgroundColor:"transparent","& > span":{maxWidth:40,width:"100%",backgroundColor:"#635ee7"}}})((function(e){return Object(A.jsx)(_a.a,Object(i.a)(Object(i.a)({},e),{},{TabIndicatorProps:{children:Object(A.jsx)("span",{})}}))})),Ma=Object(T.a)((function(e){return{root:{textTransform:"none",color:"#fff",fontWeight:e.typography.fontWeightRegular,fontSize:"1rem",marginRight:0,padding:"6px 5px",minWidth:60,"&:focus":{opacity:1}}}}))((function(e){return Object(A.jsx)(Ca.a,Object(i.a)({disableRipple:!0},e))})),Ba=function(e){var t=e.children,a=e.value,n=e.index,r=Object(te.a)(e,["children","value","index"]);return Object(A.jsx)("div",Object(i.a)(Object(i.a)({role:"tabpanel",hidden:a!==n,id:"logo-tabpanel-".concat(n),"aria-labelledby":"logo-tab-".concat(n)},r),{},{children:a===n&&Object(A.jsx)(A.Fragment,{children:t})}))};function Ta(e){return{id:"logo-tab-".concat(e),"aria-controls":"logo-tabpanel-".concat(e)}}var Ea=function(e){var t=Object(u.useState)(15),a=Object(s.a)(t,2),n=a[0],r=a[1],o=Object(u.useState)(15),c=Object(s.a)(o,2),l=c[0],d=c[1],b=Object(u.useState)(0),j=Object(s.a)(b,2),h=j[0],O=j[1],f=Object(u.useState)(""),y=Object(s.a)(f,2),p=y[0],g=y[1],x=e.logos,_=e.onCancel,C=e.open,w=e.onOpenLogo,v=x.filter((function(e){return e.name.toLowerCase().includes(p.toLowerCase())&&"flag"!==e.type})),k=x.filter((function(e){return e.name.toLowerCase().includes(p.toLowerCase())&&"flag"===e.type}));return Object(A.jsxs)(Ge.a,{"aria-labelledby":"logo-title",open:C,onClose:_,children:[Object(A.jsx)(Ke.a,{id:"logo-title",children:Object(A.jsxs)(m.a,{display:"flex",flexDirection:"row",alignItems:"center",children:[Object(A.jsx)(va,{variant:"h5",mr:2,children:"Insert:"}),Object(A.jsxs)(Fa,{value:h,onChange:function(e,t){O(t),g("")},"aria-label":"logo tab",children:[Object(A.jsx)(Ma,Object(i.a)({label:"Logo"},Ta(0))),Object(A.jsx)(Ma,Object(i.a)({label:"Flag"},Ta(1)))]})]})}),Object(A.jsxs)(Ra,{dividers:!0,children:[Object(A.jsx)(m.a,{mb:2,children:Object(A.jsx)(ja.a,{value:p,onChange:function(e){return g(e)}})}),Object(A.jsx)(Ba,{value:h,index:0,children:Object(A.jsx)(m.a,{id:"logo-dialog-content",overflow:"auto",height:"70vh",children:Object(A.jsx)(ka,{dataLength:n,next:function(){r(n+15)},hasMore:n<v.length,loader:Object(A.jsx)(na.a,{}),scrollableTarget:"logo-dialog-content",children:Object(A.jsx)(La,{cellHeight:178,cols:3,children:v.slice(0,n).map((function(e){return Object(A.jsxs)(Sa,{cols:1,onClick:function(){return w(e)},children:[Object(A.jsx)(Ia,{src:"".concat(le.a.assetsURL,"/").concat(e.preview_file),alt:e.name}),Object(A.jsx)(ca.a,{title:e.name})]},e.id)}))})})})}),Object(A.jsx)(Ba,{value:h,index:1,children:Object(A.jsx)(m.a,{id:"flag-dialog-content",overflow:"auto",height:"70vh",children:Object(A.jsx)(ka,{dataLength:l,next:function(){d(l+15)},hasMore:l<k.length,loader:Object(A.jsx)(na.a,{}),scrollableTarget:"flag-dialog-content",children:Object(A.jsx)(La,{cellHeight:178,cols:3,children:k.slice(0,l).map((function(e){return Object(A.jsxs)(Sa,{cols:1,onClick:function(){return w(e)},children:[Object(A.jsx)(Ia,{src:"".concat(le.a.assetsURL,"/").concat(e.preview_file),alt:e.name}),Object(A.jsx)(ca.a,{title:e.name})]},e.id)}))})})})})]}),Object(A.jsx)(Ve.a,{children:Object(A.jsx)(wa,{onClick:_,color:"secondary",children:"Cancel"})})]})},Da=b.a.memo(Ea),Na=Object(d.c)(L.a).withConfig({displayName:"ConfirmDialog__Button",componentId:"sc-1cd3vhn-0"})(w.b),Pa=b.a.memo((function(e){var t=e.text,a=e.open,n=e.onCancel,r=e.onConfirm;return Object(A.jsxs)(Ge.a,{"aria-labelledby":"confirm-title",open:a,children:[Object(A.jsx)(Ke.a,{id:"confirm-title",children:"Confirm"}),Object(A.jsx)(He.a,{dividers:!0,children:Object(A.jsx)(v.a,{variant:"body1",children:t})}),Object(A.jsxs)(Ve.a,{children:[Object(A.jsx)(Na,{onClick:n,color:"primary",children:"Cancel"}),Object(A.jsx)(Na,{onClick:r,color:"default",variant:"outlined",autoFocus:!0,children:"Confirm"})]})]})})),Aa=Object(d.c)(L.a).withConfig({displayName:"YesNoDialog__Button",componentId:"uvsbdx-0"})(w.b),za=Object(d.c)(m.a).withConfig({displayName:"YesNoDialog__TextWrapper",componentId:"uvsbdx-1"})(["font-size:1rem;"]),Ya=function(e){var t=e.text,a=e.open,n=e.onYes,r=e.onNo;return Object(A.jsxs)(Ge.a,{"aria-labelledby":"confirm-title",open:a,children:[Object(A.jsx)(Ke.a,{id:"confirm-title",children:"Confirm"}),Object(A.jsx)(He.a,{dividers:!0,children:Object(A.jsx)(za,{children:t})}),Object(A.jsxs)(Ve.a,{children:[Object(A.jsx)(Aa,{onClick:n,color:"secondary",variant:"outlined",autoFocus:!0,children:"Yes"}),Object(A.jsx)(Aa,{onClick:r,color:"primary",variant:"outlined",children:"No"})]})]})},Wa=b.a.memo(Ya),Xa=a(1094),Ua=a(1024),Ga=a(142),Ka=a(11),Ha=a(52),Va=Object(d.c)(L.a).withConfig({displayName:"UploadDialog__Button",componentId:"vk7mct-0"})(w.b),Ja=Object(d.c)(aa.a).withConfig({displayName:"UploadDialog__CustomInfiniteScroll",componentId:"vk7mct-1"})(["&.infinite-scroll-component{overflow:hidden !important;}"]),Za=Object(d.c)(ra.a).withConfig({displayName:"UploadDialog__CustomGridList",componentId:"vk7mct-2"})(["overflow:hidden !important;margin:0 !important;"]),qa=Object(d.c)(oa.a).withConfig({displayName:"UploadDialog__CustomGridListTile",componentId:"vk7mct-3"})(["cursor:pointer;"]),Qa=Object(d.c)(He.a).withConfig({displayName:"UploadDialog__CustomDialogContent",componentId:"vk7mct-4"})(["width:600px;"]),$a=d.c.img.withConfig({displayName:"UploadDialog__CustomImg",componentId:"vk7mct-5"})(["width:100%;height:100%;position:relative;object-fit:contain;"]),en=Object(d.c)(k.a).withConfig({displayName:"UploadDialog__DeleteButton",componentId:"vk7mct-6"})(["color:#ccc;"]),tn=function(e){var t=Object(O.d)(),a=Object(O.e)((function(e){return e.authReducer.user})),n=Object(O.e)((function(e){return e.schemeReducer.current})),c=Object(u.useState)(null),l=Object(s.a)(c,2),i=l[0],d=l[1],b=Object(u.useState)([]),j=Object(s.a)(b,2),h=j[0],f=j[1],y=Object(u.useState)(15),p=Object(s.a)(y,2),g=p[0],x=p[1],_=Object(u.useState)([]),C=Object(s.a)(_,2),w=C[0],v=C[1],k=Object(u.useState)(1),L=Object(s.a)(k,2),S=L[0],R=L[1],I=e.uploads,F=e.onCancel,M=e.open,B=e.onOpenUpload,T=function(e){return e.substring(e.lastIndexOf("uploads/")+"uploads/".length,e.lastIndexOf("."))},E=function(){var e=Object(o.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Deleting: ",i),e.prev=1,e.next=4,Ha.a.getSchemeListByUploadID(i.id);case 4:(a=e.sent).length?f(a):(t(Object(Ga.b)(i,!0)),d(null)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),t(Object(Ka.b)({message:e.t0.message})),d(null);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(t(Object(Se.j)(i.id)),t(Object(Se.n)(null))),t(Object(Ga.b)(i,e)),d(null),f([])};return Object(A.jsxs)(Ge.a,{"aria-labelledby":"upload-title",open:M,onClose:F,children:[Object(A.jsx)(Ke.a,{id:"upload-title",children:"My Uploads"}),Object(A.jsxs)(Qa,{dividers:!0,children:[Object(A.jsx)(Ua.a,{onChange:function(e){v(e),console.log(e)},value:w,showFileNamesInPreview:!0,showFileNames:!0,maxFiles:10},S),w.length?Object(A.jsx)(m.a,{mt:1,width:"100%",display:"flex",justifyContent:"center",children:Object(A.jsx)(Va,{variant:"contained",color:"primary",onClick:function(){console.log(w),t(Object(Ga.d)(a.id,n.id,w)),v([]),R(S+1)},children:"Save To My Upload List"})}):Object(A.jsx)(A.Fragment,{}),Object(A.jsx)(m.a,{id:"upload-dialog-content",overflow:"auto",height:"40vh",mt:1,children:Object(A.jsx)(Ja,{dataLength:g,next:function(){x(g+15)},hasMore:g<I.length,loader:Object(A.jsx)(na.a,{}),scrollableTarget:"upload-dialog-content",children:Object(A.jsx)(Za,{cellHeight:178,cols:3,children:I.slice(0,g).map((function(e){return Object(A.jsxs)(qa,{cols:1,onClick:function(){return B(e)},children:[Object(A.jsx)($a,{src:"".concat(le.a.assetsURL,"/").concat(e.file_name),alt:T(e.file_name)}),Object(A.jsx)(ca.a,{title:T(e.file_name),actionIcon:Object(A.jsx)(en,{onClick:function(t){return function(e,t){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),d(t)}(t,e)},children:Object(A.jsx)(Xa.a,{})})})]},e.id)}))})})})]}),Object(A.jsx)(Ve.a,{children:Object(A.jsx)(Va,{onClick:F,color:"secondary",children:"Cancel"})}),Object(A.jsx)(Pa,{text:i?'Are you sure to delete "'.concat(T(i.file_name),'"?'):"",open:!!i,onCancel:function(){return d(null)},onConfirm:E}),Object(A.jsx)(Wa,{text:h.length?Object(A.jsxs)(A.Fragment,{children:["The Projects below have the associated file:",Object(A.jsx)("ul",{children:h.map((function(e,t){return Object(A.jsx)("li",{children:e.name},t)}))}),"Would you like delete all of them?"]}):"",open:!!h.length,onYes:function(){return D(!0)},onNo:function(){return D(!1)}})]})},an=b.a.memo(tn),nn=a(1065),rn=a(1114),on=a(1104),cn=Object(d.c)(on.a).withConfig({displayName:"FontSelect__Select",componentId:"sc-79nr26-0"})(w.b),ln=Object(d.c)(cn).withConfig({displayName:"FontSelect__CustomSelect",componentId:"sc-79nr26-1"})([".MuiSelect-selectMenu{display:flex;align-items:center;height:2rem;}"]),sn=d.c.img.withConfig({displayName:"FontSelect__FontImage",componentId:"sc-79nr26-2"})(["width:506px;filter:invert(1);"]),dn=function(e){var t=e.fontList,a=e.value,n=e.onChange;return Object(A.jsx)(ln,{labelId:"font-select-label",id:"font-select-outlined",value:a,onChange:n,label:"Font",mb:4,renderValue:function(e){var a=t.find((function(t){return t.id===e}));return a?Object(A.jsx)(sn,{src:"".concat(le.a.assetsURL,"/").concat(a.font_preview),alt:a.font_name}):Object(A.jsx)(A.Fragment,{children:"Select Font"})},children:t.map((function(e){return Object(A.jsx)(Zt.a,{value:e.id,children:Object(A.jsx)(sn,{src:"".concat(le.a.assetsURL,"/").concat(e.font_preview),alt:e.font_name})},e.id)}))})},un=Object(d.c)(L.a).withConfig({displayName:"TextDialog__Button",componentId:"sc-18v4ol9-0"})(w.b),bn=Object(d.c)(Be.a).withConfig({displayName:"TextDialog__TextField",componentId:"sc-18v4ol9-1"})(w.b),jn=Object(d.c)(v.a).withConfig({displayName:"TextDialog__Typography",componentId:"sc-18v4ol9-2"})(w.b),hn=Object(d.c)(bn).withConfig({displayName:"TextDialog__CustomeTextField",componentId:"sc-18v4ol9-3"})([".MuiInputBase-input{height:2rem;}"]),On=Object(d.c)(m.a).withConfig({displayName:"TextDialog__TextPreviewWrapper",componentId:"sc-18v4ol9-4"})(["overflow:auto;background:#",";"],(function(e){return e.backColor})),fn=Object(d.c)(m.a).withConfig({displayName:"TextDialog__TextPreview",componentId:"sc-18v4ol9-5"})(["color:",";-webkit-text-stroke-width:","px;-webkit-text-stroke-color:",";font-size:","px;font-family:",";transform:rotate(","deg);"],(function(e){return e.color}),(function(e){return e.stroke}),(function(e){return e.scolor}),(function(e){return e.size}),(function(e){return e.font}),(function(e){return e.rotate})),yn=b.a.memo((function(e){var t=e.fontList,a=e.errors,n=e.handleBlur,r=e.handleChange,o=e.setFieldValue,c=e.touched,l=e.values,i=e.baseColor,s=Object(O.d)(),d=Object(O.e)((function(e){return e.fontReducer.loadedList}));return Object(u.useEffect)((function(){var e,a,n=t.length?t.find((function(e){return e.id===l.font})):null;n&&!d.includes(n.font_name)&&(e=n.font_name,a="url(".concat(le.a.assetsURL,"/").concat(n.font_file,")"),new FontFace(e,a).load().then((function(t){document.fonts.add(t),s(Object(Le.c)(e))})).catch((function(t){console.warn(t,e)})))}),[l.font]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(hn,{name:"text",label:"Text",placeholder:"Input Text here",variant:"outlined",value:l.text,error:Boolean(c.text&&a.text),helperText:c.text&&a.text,onBlur:n,onChange:r,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0},autoFocus:!0}),Object(A.jsxs)(nn.a,{variant:"outlined",children:[Object(A.jsx)(rn.a,{id:"font-select-label",children:"Font"}),Object(A.jsx)(dn,{value:l.font,onChange:function(e){return o("font",e.target.value)},fontList:t})]}),Object(A.jsxs)(Ue.a,{container:!0,spacing:2,children:[Object(A.jsx)(Ue.a,{item:!0,xs:12,sm:6,children:Object(A.jsx)(at,{label:"Font Size",min:6,max:72,value:l.size,setValue:function(e){return o("size",e)}})}),Object(A.jsx)(Ue.a,{item:!0,xs:12,sm:6,children:Object(A.jsxs)(m.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[Object(A.jsx)(jn,{variant:"body1",color:"textSecondary",mr:2,children:"Font Color"}),Object(A.jsx)(ot,{value:l.color,onChange:function(e){return o("color",e)},onInputChange:function(e){return o("color",e)},error:Boolean(a.color),helperText:a.color})]})})]}),Object(A.jsxs)(Ue.a,{container:!0,spacing:2,children:[Object(A.jsx)(Ue.a,{item:!0,xs:12,sm:6,children:Object(A.jsx)(at,{label:"Stroke Width",min:0,max:10,value:l.stroke,setValue:function(e){return o("stroke",e)}})}),Object(A.jsx)(Ue.a,{item:!0,xs:12,sm:6,children:Object(A.jsxs)(m.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[Object(A.jsx)(jn,{variant:"body1",color:"textSecondary",mr:2,children:"Stroke Color"}),Object(A.jsx)(ot,{value:l.scolor,onChange:function(e){return o("scolor",e)},onInputChange:function(e){return o("scolor",e)},error:Boolean(a.scolor),helperText:a.scolor})]})})]}),Object(A.jsx)(Ue.a,{container:!0,spacing:2,children:Object(A.jsx)(Ue.a,{item:!0,xs:12,sm:6,children:Object(A.jsx)(at,{label:"Rotation",min:-179,max:179,value:l.rotation,setValue:function(e){return o("rotation",e)}})})}),Object(A.jsx)(On,{width:"100%",height:"200px",my:2,display:"flex",justifyContent:"center",alignItems:"center",backColor:i,children:Object(A.jsx)(fn,{color:l.color,stroke:l.stroke,scolor:l.scolor,size:l.size,rotate:l.rotation,font:t.find((function(e){return e.id===l.font})).font_name,children:l.text})})]})})),pn=function(e){var t=e.fontList,a=e.onCancel,n=e.open,r=e.baseColor,o=e.onCreate;return Object(A.jsxs)(Ge.a,{"aria-labelledby":"insert-text-title",open:n,onClose:a,children:[Object(A.jsx)(Ke.a,{id:"insert-text-title",children:"Insert Text"}),Object(A.jsx)(ze.b,{initialValues:{text:"",font:1,size:14,color:"#000000",stroke:0,scolor:"#000000",rotation:0},validationSchema:Ae.b().shape({text:Ae.c().required("Required"),color:Ae.c().nullable().test("color-validation","Incorrect Color Format",oe.b),scolor:Ae.c().nullable().test("color-validation","Incorrect Color Format",oe.b)}),validate:function(e){return console.log(e),{}},onSubmit:o,children:function(e){return Object(A.jsxs)(ze.a,{onSubmit:e.handleSubmit,children:[Object(A.jsx)(He.a,{dividers:!0,id:"insert-text-dialog-content",children:Object(A.jsx)(yn,Object(i.a)(Object(i.a)({},e),{},{fontList:t,baseColor:r}))}),Object(A.jsxs)(Ve.a,{children:[Object(A.jsx)(un,{onClick:a,color:"secondary",children:"Cancel"}),Object(A.jsx)(un,{type:"submit",color:"primary",variant:"outlined",disabled:e.isSubmitting,children:"Create"})]})]})}})]})},gn=b.a.memo(pn),mn=Object(d.c)(Jt.a).withConfig({displayName:"DrawerBar__Divider",componentId:"sc-1d7p22o-0"})(w.b),xn=Object(d.c)(m.a).withConfig({displayName:"DrawerBar__Wrapper",componentId:"sc-1d7p22o-1"})(["background:#666666;padding:0px 10px 0 15px;"]),_n=Object(d.c)(m.a).withConfig({displayName:"DrawerBar__ToolWrapper",componentId:"sc-1d7p22o-2"})(["background:#444;border-radius:5px;padding:5px 1px;"]),Cn=Object(d.c)(Zt.a).withConfig({displayName:"DrawerBar__CustomItem",componentId:"sc-1d7p22o-3"})(["display:flex;justify-content:center;padding:7px 10px;background-color:",";"],(function(e){return"true"===e.active?"rgba(255, 255, 255, 0.08)":"none"})),wn=Object(d.c)(Te.a).withConfig({displayName:"DrawerBar__CustomFontAwesomeIcon",componentId:"sc-1d7p22o-4"})(["transform:",";"],(function(e){return"true"===e.isstretch?"scaleX(1.2) scaleY(0.8)":"none"})),vn=[{value:x.f.DEFAULT,label:"Default Mode",icon:Object(A.jsx)(wn,{icon:Pe.i})},{value:x.f.POLYGON,label:"Polygon Mode",icon:Object(A.jsx)(wn,{icon:Pe.e})},{value:x.f.LINE,label:"Line Mode",icon:Object(A.jsx)(Qt.a,{})},{value:x.f.PEN,label:"Brush Mode",icon:Object(A.jsx)(wn,{icon:Pe.j})},{value:x.f.RECT,label:"Rectangle Mode",icon:Object(A.jsx)(wn,{icon:Pe.n})},{value:x.f.CIRCLE,label:"Circle Mode",icon:Object(A.jsx)(wn,{icon:Pe.c})},{value:x.f.ELLIPSE,label:"Ellipse Mode",icon:Object(A.jsx)(wn,{icon:Pe.c,isstretch:"true"})},{value:x.f.STAR,label:"Star Mode",icon:Object(A.jsx)(wn,{icon:Pe.o})},{value:x.f.RING,label:"Ring Mode",icon:Object(A.jsx)(wn,{icon:Pe.d})},{value:x.f.REGULARPOLYGON,label:"Regular Polygon Mode",icon:Object(A.jsx)(qt.a,{size:17})},{value:x.f.WEDGE,label:"Wedge Mode",icon:Object(A.jsx)($t.a,{fontSize:"small"})},{value:x.f.ARC,label:"Arc Mode",icon:Object(A.jsx)(wn,{icon:ta.a})},{value:x.f.ARROW,label:"Arrow Mode",icon:Object(A.jsx)(ea.a,{fontSize:"small"})}],kn=[{value:x.c.UPLOAD,label:"Insert My Logo/Upload New Logo",icon:Object(A.jsx)(wn,{icon:Pe.f})},{value:x.c.LOGO,label:"Insert Logo",icon:Object(A.jsx)(wn,{icon:Pe.h})},{value:x.c.TEXT,label:"Insert Text",icon:Object(A.jsx)(wn,{icon:Pe.g})},{value:x.c.SHAPE,label:"Insert Overlay",icon:Object(A.jsx)(wn,{icon:Pe.l})},{value:x.c.BASEPAINT,label:"Insert BasePaint",icon:Object(A.jsx)(wn,{icon:Pe.a})}],Ln=function(e){var t=e.dialog,a=e.setDialog,n=e.focusBoard,r=Object(O.d)(),o=Object(O.e)((function(e){return e.boardReducer.mouseMode})),c=Object(O.e)((function(e){return e.schemeReducer.current})),l=Object(O.e)((function(e){return e.overlayReducer.list})),i=Object(O.e)((function(e){return e.logoReducer.list})),s=Object(O.e)((function(e){return e.uploadReducer.list})),d=Object(O.e)((function(e){return e.fontReducer.list})),b=Object(O.e)((function(e){return e.boardReducer.frameSize})),j=Object(O.e)((function(e){return e.basePaintReducer.list})),h=Object(u.useCallback)((function(e){r(Object(C.g)(e)),e!==x.f.DEFAULT&&r(Object(Se.n)(null))}),[r]),f=Object(u.useCallback)((function(e){r(Object(C.g)(x.f.DEFAULT)),r(Object(Se.f)(c.id,e)),a(null),n()}),[r,a,n,c&&c.id]),y=Object(u.useCallback)((function(e){r(Object(C.g)(x.f.DEFAULT)),r(Object(Se.d)(c.id,e,b)),a(null),n()}),[r,a,n,c&&c.id,b]),p=Object(u.useCallback)((function(e){r(Object(C.g)(x.f.DEFAULT)),r(Object(Se.c)(c.id,e,b)),a(null),n()}),[r,a,n,c&&c.id,b]),g=Object(u.useCallback)((function(e){r(Object(C.g)(x.f.DEFAULT)),r(Object(Se.e)(c.id,e,b)),a(null),n()}),[r,a,n,c&&c.id,b]),m=Object(u.useCallback)((function(e){r(Object(C.g)(x.f.DEFAULT)),r(Object(Se.h)(c.id,e,b)),a(null),n()}),[r,a,n,c&&c.id,b]);return Object(A.jsxs)(xn,{children:[Object(A.jsxs)(_n,{children:[vn.map((function(e){return Object(A.jsx)(E,{title:e.label,arrow:!0,placement:"right",children:Object(A.jsx)(Cn,{value:e.value,onClick:function(){return h(e.value)},active:e.value===o?"true":"false",children:e.icon})},e.value)})),Object(A.jsx)(mn,{my:1}),kn.map((function(e){return Object(A.jsx)(E,{title:e.label,arrow:!0,placement:"right",children:Object(A.jsx)(Cn,{value:e.value,onClick:function(){return a(e.value)},children:e.icon})},e.value)}))]}),Object(A.jsx)(ba,{open:t===x.c.BASEPAINT,basePaints:j,onOpenBase:f,onCancel:function(){return a(null)}}),Object(A.jsx)(xa,{open:t===x.c.SHAPE,shapes:l,onOpenShape:y,onCancel:function(){return a(null)}}),Object(A.jsx)(Da,{open:t===x.c.LOGO,logos:i,onOpenLogo:p,onCancel:function(){return a(null)}}),Object(A.jsx)(an,{open:t===x.c.UPLOAD,uploads:s,onOpenUpload:g,onCancel:function(){return a(null)}}),Object(A.jsx)(gn,{open:t===x.c.TEXT,fontList:d,baseColor:c.base_color,onCreate:m,onCancel:function(){return a(null)}})]})},Sn=b.a.memo(Ln),Rn=Object(d.c)(m.a).withConfig({displayName:"sideBar__LayerWrapper",componentId:"sc-10zcfrv-0"})(["width:300px;background:#666666;overflow:auto;"]),In=Object(d.c)(m.a).withConfig({displayName:"sideBar__TitleWrapper",componentId:"sc-10zcfrv-1"})(["background:#666666;"]),Fn=Object(d.c)(m.a).withConfig({displayName:"sideBar__Wrapper",componentId:"sc-10zcfrv-2"})(["height:calc(100% - 46px);position:relative;"]),Mn=Object(d.c)(L.a).withConfig({displayName:"sideBar__ColorApplyButton",componentId:"sc-10zcfrv-3"})(["padding:3px 15px 5px;"]),Bn=function(e){var t=e.dialog,a=e.setDialog,n=e.focusBoard,r=e.hoveredLayerJSON,o=e.onChangeHoverJSONItem,c=Object(O.d)(),l=Object(O.e)((function(e){return e.schemeReducer.current})),i=Object(O.e)((function(e){return e.layerReducer.list})),d=Object(O.e)((function(e){return e.carMakeReducer.current})),b=Object(u.useMemo)((function(){return"transparent"===l.base_color?l.base_color:"#"+l.base_color}),[l.base_color]),j=Object(u.useState)(b),h=Object(s.a)(j,2),f=h[0],y=h[1],p=Object(u.useState)(!1),g=Object(s.a)(p,2),_=g[0],C=g[1];Object(u.useEffect)((function(){y(b)}),[b]);var w=Object(u.useCallback)((function(e){c(Object(Me.a)(l.id,e)),y(e),C(!1)}),[c,l&&l.id,y,C]),v=Object(u.useCallback)((function(e){y(e),C(e!==b)}),[b,y,C]),k=Object(u.useCallback)((function(){c(Object(Me.a)(l.id,f)),C(!1)}),[c,l&&l.id,f,C]);return Object(A.jsxs)(m.a,{display:"flex",flexDirection:"column",children:[Object(A.jsx)(In,{px:3,children:Object(A.jsx)(Ct,{})}),Object(A.jsxs)(Fn,{display:"flex",children:[Object(A.jsx)(Sn,{dialog:t,setDialog:a,focusBoard:n}),Object(A.jsxs)(Rn,{pr:3,pb:2,children:[Object(A.jsx)(Vt,{title:d?d.name:"",layerList:i.filter((function(e){return e.layer_type===x.e.CAR})),disableLock:!0,disableDnd:!0,hoveredLayerJSON:r,onChangeHoverJSONItem:o}),Object(A.jsx)(Vt,{title:"Logos & Text",layerList:i.filter((function(e){return e.layer_type===x.e.LOGO||e.layer_type===x.e.TEXT||e.layer_type===x.e.UPLOAD})),hoveredLayerJSON:r,onChangeHoverJSONItem:o}),Object(A.jsx)(Vt,{title:"Shapes",layerList:i.filter((function(e){return e.layer_type===x.e.SHAPE})),hoveredLayerJSON:r,onChangeHoverJSONItem:o}),Object(A.jsx)(Vt,{title:"Overlays",layerList:i.filter((function(e){return e.layer_type===x.e.OVERLAY})),hoveredLayerJSON:r,onChangeHoverJSONItem:o}),Object(A.jsx)(Vt,{title:"Base Paint",layerList:i.filter((function(e){return e.layer_type===x.e.BASE})),disableLock:!0,hoveredLayerJSON:r,onChangeHoverJSONItem:o,extraChildren:Object(A.jsxs)(m.a,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[Object(A.jsx)(ot,{value:f,onChange:w,onInputChange:v}),_?Object(A.jsx)(Mn,{onClick:k,variant:"outlined",children:"Apply"}):Object(A.jsx)(A.Fragment,{})]})})]})]})]})},Tn=Object(d.c)(Be.a).withConfig({displayName:"GeneralProperty__CustomeTextField",componentId:"sc-55yoxm-0"})([".MuiInputBase-input{height:2rem;}"]),En=function(e){var t=e.errors,a=e.handleBlur,n=e.handleChange,r=e.setFieldValue,o=e.touched,c=e.values,l=e.toggleField,i=Object(u.useState)(!0),d=Object(s.a)(i,2),b=d[0],j=d[1],h=Object(u.useMemo)((function(){return c.layer_type!==x.e.SHAPE?x.a[c.layer_type]:x.a[c.layer_type][c.layer_data.type]}),[c]);return"{}"!==JSON.stringify(t)&&console.log(t),h.includes("layer_data.name")||h.includes("layer_data.text")||h.includes("layer_data.numPoints")||h.includes("layer_data.angle")?Object(A.jsxs)(We.a,{expanded:b,onChange:function(){return j(!b)},children:[Object(A.jsx)(Ye.a,{expandIcon:Object(A.jsx)(Je.a,{}),children:Object(A.jsx)(v.a,{children:"General"})}),Object(A.jsx)(Xe.a,{children:Object(A.jsxs)(m.a,{display:"flex",flexDirection:"column",width:"100%",children:[h.includes("layer_data.name")?Object(A.jsx)(Tn,{name:"layer_data.name",label:"Name",variant:"outlined",value:c.layer_data.name,error:Boolean(o.layer_data&&o.layer_data.name&&t.layer_data&&t.layer_data.name),helperText:o.layer_data&&o.layer_data.name&&t.layer_data&&t.layer_data.name,onBlur:a,onChange:n,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{}),h.includes("layer_data.text")?Object(A.jsx)(Tn,{name:"layer_data.text",label:"Text",variant:"outlined",value:c.layer_data.text,error:Boolean(o.layer_data&&o.layer_data.text&&t.layer_data&&t.layer_data.text),helperText:o.layer_data&&o.layer_data.text&&t.layer_data&&t.layer_data.text,onBlur:a,onChange:n,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{}),h.includes("layer_data.numPoints")?Object(A.jsx)(Tn,{name:"layer_data.numPoints",label:"Number of Points",variant:"outlined",type:"number",value:Math.round(c.layer_data.numPoints),error:Boolean(o.layer_data&&o.layer_data.numPoints&&t.layer_data&&t.layer_data.numPoints),helperText:o.layer_data&&o.layer_data.numPoints&&t.layer_data&&t.layer_data.numPoints,onBlur:a,onChange:n,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{}),h.includes("layer_data.angle")?Object(A.jsx)(at,{label:"Angle",min:0,max:360,value:Math.round(c.layer_data.angle),setValue:function(e){return r("layer_data.angle",e)}}):Object(A.jsx)(A.Fragment,{}),h.includes("layer_visible")?Object(A.jsxs)(m.a,{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"space-between",children:[Object(A.jsx)(v.a,{variant:"body1",color:"textSecondary",mr:2,children:"Visibility"}),Object(A.jsx)(k.a,{onClick:function(){return l("layer_visible")},size:"small",children:c.layer_visible?Object(A.jsx)(Et.a,{}):Object(A.jsx)(Dt.a,{})})]}):Object(A.jsx)(A.Fragment,{}),h.includes("layer_locked")?Object(A.jsxs)(m.a,{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"space-between",children:[Object(A.jsx)(v.a,{variant:"body1",color:"textSecondary",mr:2,children:"Locking"}),Object(A.jsx)(k.a,{onClick:function(){return l("layer_locked")},size:"small",children:c.layer_locked?Object(A.jsx)(Bt.a,{}):Object(A.jsx)(Tt.a,{})})]}):Object(A.jsx)(A.Fragment,{})]})})]}):Object(A.jsx)(A.Fragment,{})},Dn=b.a.memo(En),Nn=a(1099),Pn=a(1100),An=Object(d.c)(Be.a).withConfig({displayName:"SizeProperty__CustomeTextField",componentId:"sc-8yv6lk-0"})([".MuiInputBase-input{height:2rem;}"]),zn=Object(d.c)(k.a).withConfig({displayName:"SizeProperty__CustomIconButton",componentId:"sc-8yv6lk-1"})(["margin:0 5px;height:50px;"]),Yn=function(e){var t=e.errors,a=e.handleBlur,n=e.handleChange,r=e.setFieldValue,o=e.touched,c=e.values,l=e.toggleLayerDataField,i=e.currentLayer,d=e.pressedKey,b=Object(u.useState)(!0),j=Object(s.a)(b,2),h=j[0],O=j[1],f=Object(u.useMemo)((function(){return c.layer_type!==x.e.SHAPE?x.a[c.layer_type]:x.a[c.layer_type][c.layer_data.type]}),[c]),y=Object(u.useMemo)((function(){return"shift"===d}),[d]),p=Object(u.useCallback)((function(e){var t=parseFloat(e.target.value)||0;c.layer_data.sizeLocked&&r("layer_data.height",t*i.layer_data.height/i.layer_data.width),r("layer_data.width",parseFloat(e.target.value)||0)}),[r,i&&i.layer_data.height,i&&i.layer_data.width]),g=Object(u.useCallback)((function(e){var t=parseFloat(e.target.value)||0;c.layer_data.sizeLocked&&r("layer_data.width",t*i.layer_data.width/i.layer_data.height),r("layer_data.height",parseFloat(e.target.value)||0)}),[r,i&&i.layer_data.height,i&&i.layer_data.width]),_=Object(u.useCallback)((function(e){var t=parseFloat(e.target.value)||0;c.layer_data.scaleLocked&&r("layer_data.scaleY",t*i.layer_data.scaleY/i.layer_data.scaleX),r("layer_data.scaleX",parseFloat(e.target.value)||0)}),[r,i&&i.layer_data.scaleY,i&&i.layer_data.scaleX]),C=Object(u.useCallback)((function(e){var t=parseFloat(e.target.value)||0;c.layer_data.scaleLocked&&r("layer_data.scaleX",t*i.layer_data.scaleX/i.layer_data.scaleY),r("layer_data.scaleY",parseFloat(e.target.value)||0)}),[r,i&&i.layer_data.scaleY,i&&i.layer_data.scaleX]),w=Object(u.useCallback)((function(e){var t=parseFloat(e.target.value)||0;c.layer_data.scaleLocked&&r("layer_data.outerRadius",t*i.layer_data.outerRadius/i.layer_data.innerRadius),r("layer_data.innerRadius",parseFloat(e.target.value)||0)}),[r,i&&i.layer_data.outerRadius,i&&i.layer_data.innerRadius]),k=Object(u.useCallback)((function(e){var t=parseFloat(e.target.value)||0;c.layer_data.scaleLocked&&r("layer_data.innerRadius",t*i.layer_data.innerRadius/i.layer_data.outerRadius),r("layer_data.outerRadius",parseFloat(e.target.value)||0)}),[r,i&&i.layer_data.outerRadius,i&&i.layer_data.innerRadius]);return f.includes("layer_data.width")||f.includes("layer_data.height")||f.includes("layer_data.scaleX")||f.includes("layer_data.scaleY")||f.includes("layer_data.radius")||f.includes("layer_data.innerRadius")||f.includes("layer_data.outerRadius")||f.includes("layer_data.pointerLength")||f.includes("layer_data.pointerWidth")?Object(A.jsxs)(We.a,{expanded:h,onChange:function(){return O(!h)},children:[Object(A.jsx)(Ye.a,{expandIcon:Object(A.jsx)(Je.a,{}),children:Object(A.jsx)(v.a,{children:"Size"})}),Object(A.jsx)(Xe.a,{children:Object(A.jsxs)(m.a,{display:"flex",flexDirection:"column",width:"100%",children:[Object(A.jsxs)(m.a,{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center",children:[f.includes("layer_data.width")?Object(A.jsx)(An,{name:"layer_data.width",label:c.layer_data.type!==x.f.ELLIPSE?"Width":"RadiusX",variant:"outlined",type:"number",value:Object(oe.h)(c.layer_data.width),error:Boolean(o.layer_data&&o.layer_data.width&&t.layer_data&&t.layer_data.width),helperText:o.layer_data&&o.layer_data.width&&t.layer_data&&t.layer_data.width,onBlur:a,onChange:p,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{}),f.includes("layer_data.width")&&f.includes("layer_data.height")?Object(A.jsx)(zn,{onClick:function(){return l("sizeLocked")},children:c.layer_data.sizeLocked||y?Object(A.jsx)(Nn.a,{}):Object(A.jsx)(Pn.a,{})}):Object(A.jsx)(A.Fragment,{}),f.includes("layer_data.height")?Object(A.jsx)(An,{name:"layer_data.height",label:c.layer_data.type!==x.f.ELLIPSE?"Height":"RadiusY",variant:"outlined",type:"number",value:Object(oe.h)(c.layer_data.height),error:Boolean(o.layer_data&&o.layer_data.height&&t.layer_data&&t.layer_data.height),helperText:o.layer_data&&o.layer_data.height&&t.layer_data&&t.layer_data.height,onBlur:a,onChange:g,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{})]}),Object(A.jsxs)(m.a,{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center",children:[f.includes("layer_data.scaleX")?Object(A.jsx)(An,{name:"layer_data.scaleX",label:"ScaleX",variant:"outlined",type:"number",value:Object(oe.h)(c.layer_data.scaleX),error:Boolean(o.layer_data&&o.layer_data.scaleX&&t.layer_data&&t.layer_data.scaleX),helperText:o.layer_data&&o.layer_data.scaleX&&t.layer_data&&t.layer_data.scaleX,onBlur:a,onChange:_,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{}),f.includes("layer_data.scaleX")&&f.includes("layer_data.scaleY")?Object(A.jsx)(zn,{onClick:function(){return l("scaleLocked")},children:c.layer_data.scaleLocked||y?Object(A.jsx)(Nn.a,{}):Object(A.jsx)(Pn.a,{})}):Object(A.jsx)(A.Fragment,{}),f.includes("layer_data.scaleY")?Object(A.jsx)(An,{name:"layer_data.scaleY",label:"ScaleY",variant:"outlined",type:"number",value:Object(oe.h)(c.layer_data.scaleY),error:Boolean(o.layer_data&&o.layer_data.scaleY&&t.layer_data&&t.layer_data.scaleY),helperText:o.layer_data&&o.layer_data.scaleY&&t.layer_data&&t.layer_data.scaleY,onBlur:a,onChange:C,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{})]}),Object(A.jsxs)(m.a,{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center",children:[f.includes("layer_data.innerRadius")?Object(A.jsx)(An,{name:"layer_data.innerRadius",label:"Inner Radius",variant:"outlined",type:"number",value:Object(oe.h)(c.layer_data.innerRadius),error:Boolean(o.layer_data&&o.layer_data.innerRadius&&t.layer_data&&t.layer_data.innerRadius),helperText:o.layer_data&&o.layer_data.innerRadius&&t.layer_data&&t.layer_data.innerRadius,onBlur:a,onChange:w,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{}),f.includes("layer_data.innerRadius")&&f.includes("layer_data.outerRadius")?Object(A.jsx)(zn,{onClick:function(){return l("scaleLocked")},children:c.layer_data.scaleLocked||y?Object(A.jsx)(Nn.a,{}):Object(A.jsx)(Pn.a,{})}):Object(A.jsx)(A.Fragment,{}),f.includes("layer_data.outerRadius")?Object(A.jsx)(An,{name:"layer_data.outerRadius",label:"Outer Radius",variant:"outlined",type:"number",value:Object(oe.h)(c.layer_data.outerRadius),error:Boolean(o.layer_data&&o.layer_data.outerRadius&&t.layer_data&&t.layer_data.outerRadius),helperText:o.layer_data&&o.layer_data.outerRadius&&t.layer_data&&t.layer_data.outerRadius,onBlur:a,onChange:k,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{})]}),f.includes("layer_data.radius")?Object(A.jsx)(An,{name:"layer_data.radius",label:"Radius",variant:"outlined",type:"number",value:Object(oe.h)(c.layer_data.radius),error:Boolean(o.layer_data&&o.layer_data.radius&&t.layer_data&&t.layer_data.radius),helperText:o.layer_data&&o.layer_data.radius&&t.layer_data&&t.layer_data.radius,onBlur:a,onChange:n,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{}),f.includes("layer_data.pointerWidth")?Object(A.jsx)(An,{name:"layer_data.pointerWidth",label:"Pointer Width",variant:"outlined",type:"number",value:Object(oe.h)(c.layer_data.pointerWidth),error:Boolean(o.layer_data&&o.layer_data.pointerWidth&&t.layer_data&&t.layer_data.pointerWidth),helperText:o.layer_data&&o.layer_data.pointerWidth&&t.layer_data&&t.layer_data.pointerWidth,onBlur:a,onChange:n,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{}),f.includes("layer_data.pointerLength")?Object(A.jsx)(An,{name:"layer_data.pointerLength",label:"Pointer Length",variant:"outlined",type:"number",value:Object(oe.h)(c.layer_data.pointerLength),error:Boolean(o.layer_data&&o.layer_data.pointerLength&&t.layer_data&&t.layer_data.pointerLength),helperText:o.layer_data&&o.layer_data.pointerLength&&t.layer_data&&t.layer_data.pointerLength,onBlur:a,onChange:n,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{})]})})]}):Object(A.jsx)(A.Fragment,{})},Wn=b.a.memo(Yn),Xn=Object(d.c)(Be.a).withConfig({displayName:"PositionProperty__CustomeTextField",componentId:"sc-16v7yid-0"})([".MuiInputBase-input{height:2rem;}"]),Un=function(e){var t=e.errors,a=e.handleBlur,n=e.handleChange,r=(e.setFieldValue,e.touched),o=e.values,c=Object(u.useState)(!0),l=Object(s.a)(c,2),i=l[0],d=l[1],b=Object(u.useMemo)((function(){return o.layer_type!==x.e.SHAPE?x.a[o.layer_type]:x.a[o.layer_type][o.layer_data.type]}),[o]);return b.includes("layer_data.left")||b.includes("layer_data.top")?Object(A.jsxs)(We.a,{expanded:i,onChange:function(){return d(!i)},children:[Object(A.jsx)(Ye.a,{expandIcon:Object(A.jsx)(Je.a,{}),children:Object(A.jsx)(v.a,{children:"Position"})}),Object(A.jsx)(Xe.a,{children:Object(A.jsx)(m.a,{display:"flex",flexDirection:"column",width:"100%",children:Object(A.jsxs)(Ue.a,{container:!0,spacing:1,children:[Object(A.jsx)(Ue.a,{item:!0,sm:6,children:b.includes("layer_data.left")?Object(A.jsx)(Xn,{name:"layer_data.left",label:"X",variant:"outlined",type:"number",value:Object(oe.h)(o.layer_data.left),error:Boolean(r.layer_data&&r.layer_data.left&&t.layer_data&&t.layer_data.left),helperText:r.layer_data&&r.layer_data.left&&t.layer_data&&t.layer_data.left,onBlur:a,onChange:n,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{})}),Object(A.jsx)(Ue.a,{item:!0,sm:6,children:b.includes("layer_data.top")?Object(A.jsx)(Xn,{name:"layer_data.top",label:"Y",variant:"outlined",type:"number",value:Object(oe.h)(o.layer_data.top),error:Boolean(r.layer_data&&r.layer_data.top&&t.layer_data&&t.layer_data.top),helperText:r.layer_data&&r.layer_data.top&&t.layer_data&&t.layer_data.top,onBlur:a,onChange:n,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{})})]})})})]}):Object(A.jsx)(A.Fragment,{})},Gn=b.a.memo(Un),Kn=Object(d.c)(nn.a).withConfig({displayName:"FontProperty__FormControl",componentId:"sc-8xx6kn-0"})(w.b),Hn=function(e){var t=e.errors,a=(e.handleBlur,e.handleChange,e.setFieldValue),n=(e.touched,e.values),r=e.fontList,o=Object(u.useState)(!0),c=Object(s.a)(o,2),l=c[0],i=c[1],d=Object(u.useMemo)((function(){return n.layer_type!==x.e.SHAPE?x.a[n.layer_type]:x.a[n.layer_type][n.layer_data.type]}),[n]);return d.includes("layer_data.font")?Object(A.jsxs)(We.a,{expanded:l,onChange:function(){return i(!l)},children:[Object(A.jsx)(Ye.a,{expandIcon:Object(A.jsx)(Je.a,{}),children:Object(A.jsx)(v.a,{children:"Font"})}),Object(A.jsx)(Xe.a,{children:Object(A.jsxs)(m.a,{display:"flex",flexDirection:"column",width:"100%",children:[d.includes("layer_data.font")?Object(A.jsxs)(Kn,{variant:"outlined",mt:2,children:[Object(A.jsx)(rn.a,{id:"font-select-label",children:"Font"}),Object(A.jsx)(dn,{value:n.layer_data.font,onChange:function(e){return a("layer_data.font",e.target.value)},fontList:r})]}):Object(A.jsx)(A.Fragment,{}),d.includes("layer_data.color")?Object(A.jsxs)(Ue.a,{container:!0,spacing:2,children:[Object(A.jsx)(Ue.a,{item:!0,xs:6,children:Object(A.jsx)(v.a,{variant:"body1",color:"textSecondary",mr:2,children:"Font Color"})}),Object(A.jsx)(Ue.a,{item:!0,xs:6,children:Object(A.jsx)(ot,{value:n.layer_data.color,onChange:function(e){return a("layer_data.color",e)},onInputChange:function(e){return a("layer_data.color",e)},error:Boolean(t.layer_data&&t.layer_data.color),helperText:t.layer_data&&t.layer_data.color})})]}):Object(A.jsx)(A.Fragment,{}),d.includes("layer_data.size")?Object(A.jsx)(at,{label:"Font Size",min:6,max:72,value:n.layer_data.size,setValue:function(e){return a("layer_data.size",e)}}):Object(A.jsx)(A.Fragment,{})]})})]}):Object(A.jsx)(A.Fragment,{})},Vn=b.a.memo(Hn),Jn=function(e){var t=e.errors,a=(e.handleBlur,e.handleChange,e.setFieldValue),n=(e.touched,e.values),r=Object(u.useState)(!0),o=Object(s.a)(r,2),c=o[0],l=o[1],i=Object(u.useMemo)((function(){return n.layer_type!==x.e.SHAPE?x.a[n.layer_type]:x.a[n.layer_type][n.layer_data.type]}),[n]);return i.includes("layer_data.stroke")||i.includes("layer_data.scolor")?Object(A.jsxs)(We.a,{expanded:c,onChange:function(){return l(!c)},children:[Object(A.jsx)(Ye.a,{expandIcon:Object(A.jsx)(Je.a,{}),children:Object(A.jsx)(v.a,{children:"Stroke"})}),Object(A.jsx)(Xe.a,{children:Object(A.jsxs)(m.a,{display:"flex",flexDirection:"column",width:"100%",children:[i.includes("layer_data.scolor")?Object(A.jsxs)(Ue.a,{container:!0,spacing:2,children:[Object(A.jsx)(Ue.a,{item:!0,xs:6,children:Object(A.jsx)(v.a,{variant:"body1",color:"textSecondary",mr:2,children:"Stroke Color"})}),Object(A.jsx)(Ue.a,{item:!0,xs:6,children:Object(A.jsx)(ot,{value:n.layer_data.scolor,onChange:function(e){return a("layer_data.scolor",e)},onInputChange:function(e){return a("layer_data.scolor",e)},error:Boolean(t.layer_data&&t.layer_data.scolor),helperText:t.layer_data&&t.layer_data.scolor})})]}):Object(A.jsx)(A.Fragment,{}),i.includes("layer_data.stroke")?Object(A.jsx)(at,{label:"Stroke Width",min:0,max:10,value:n.layer_data.stroke,setValue:function(e){return a("layer_data.stroke",e)}}):Object(A.jsx)(A.Fragment,{})]})})]}):Object(A.jsx)(A.Fragment,{})},Zn=b.a.memo(Jn),qn=function(e){var t=e.errors,a=(e.handleBlur,e.handleChange,e.setFieldValue),n=(e.touched,e.values),r=Object(u.useState)(!0),o=Object(s.a)(r,2),c=o[0],l=o[1],i=Object(u.useMemo)((function(){return n.layer_type!==x.e.SHAPE?x.a[n.layer_type]:x.a[n.layer_type][n.layer_data.type]}),[n]);return i.includes("layer_data.color")||i.includes("layer_data.opacity")?Object(A.jsxs)(We.a,{expanded:c,onChange:function(){return l(!c)},children:[Object(A.jsx)(Ye.a,{expandIcon:Object(A.jsx)(Je.a,{}),children:Object(A.jsx)(v.a,{children:"Color/Opacity"})}),Object(A.jsx)(Xe.a,{children:Object(A.jsxs)(m.a,{display:"flex",flexDirection:"column",width:"100%",children:[i.includes("layer_data.color")&&n.layer_type!==x.e.TEXT?Object(A.jsxs)(Ue.a,{container:!0,spacing:2,children:[Object(A.jsx)(Ue.a,{item:!0,xs:6,children:Object(A.jsx)(v.a,{variant:"body1",color:"textSecondary",mr:2,children:"Color"})}),Object(A.jsx)(Ue.a,{item:!0,xs:6,children:Object(A.jsx)(ot,{value:n.layer_data.color,onChange:function(e){return a("layer_data.color",e)},onInputChange:function(e){return a("layer_data.color",e)},error:Boolean(t.layer_data&&t.layer_data.color),helperText:t.layer_data&&t.layer_data.color})})]}):Object(A.jsx)(A.Fragment,{}),i.includes("layer_data.opacity")?Object(A.jsx)(at,{label:"Opacity",min:0,max:1,step:.01,value:n.layer_data.opacity,setValue:function(e){return a("layer_data.opacity",e)}}):Object(A.jsx)(A.Fragment,{})]})})]}):Object(A.jsx)(A.Fragment,{})},Qn=b.a.memo(qn),$n=a(1101),er=a(1102),tr=function(e){e.errors,e.handleBlur,e.handleChange;var t=e.setFieldValue,a=(e.toggleField,e.touched,e.values),n=Object(u.useState)(!0),r=Object(s.a)(n,2),o=r[0],c=r[1],l=Object(u.useMemo)((function(){return a.layer_type!==x.e.SHAPE?x.a[a.layer_type]:x.a[a.layer_type][a.layer_data.type]}),[a]);return l.includes("layer_data.rotation")||l.includes("layer_data.flip")||l.includes("layer_data.flop")?Object(A.jsxs)(We.a,{expanded:o,onChange:function(){return c(!o)},children:[Object(A.jsx)(Ye.a,{expandIcon:Object(A.jsx)(Je.a,{}),children:Object(A.jsx)(v.a,{children:"Rotation"})}),Object(A.jsx)(Xe.a,{children:Object(A.jsxs)(m.a,{display:"flex",flexDirection:"column",width:"100%",children:[l.includes("layer_data.rotation")?Object(A.jsx)(at,{label:"Rotation",min:-179,max:179,value:Math.round(a.layer_data.rotation),setValue:function(e){return t("layer_data.rotation",e)}}):Object(A.jsx)(A.Fragment,{}),l.includes("layer_data.flop")?Object(A.jsxs)(m.a,{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"space-between",children:[Object(A.jsx)(v.a,{variant:"body1",color:"textSecondary",mr:2,children:"Flop"}),Object(A.jsx)(k.a,{onClick:function(){return t("layer_data.flop",a.layer_data.flop?0:1)},size:"small",children:a.layer_data.flop?Object(A.jsx)($n.a,{}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)($n.a,{}),Object(A.jsx)(m.a,{position:"absolute",left:"4px",top:"5px",children:Object(A.jsx)(Te.a,{icon:Pe.m,size:"sm"})})]})})]}):Object(A.jsx)(A.Fragment,{}),l.includes("layer_data.flip")?Object(A.jsxs)(m.a,{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"space-between",children:[Object(A.jsx)(v.a,{variant:"body1",color:"textSecondary",mr:2,children:"Flip"}),Object(A.jsx)(k.a,{onClick:function(){return t("layer_data.flip",a.layer_data.flip?0:1)},size:"small",children:a.layer_data.flip?Object(A.jsx)(er.a,{}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(er.a,{}),Object(A.jsx)(m.a,{position:"absolute",left:"4px",top:"5px",children:Object(A.jsx)(Te.a,{icon:Pe.m,size:"sm"})})]})})]}):Object(A.jsx)(A.Fragment,{})]})})]}):Object(A.jsx)(A.Fragment,{})},ar=b.a.memo(tr),nr=Object(d.c)(Be.a).withConfig({displayName:"ShadowProperty__CustomeTextField",componentId:"sc-1d6vteb-0"})([".MuiInputBase-input{height:2rem;}"]),rr=function(e){var t=e.errors,a=e.handleBlur,n=e.handleChange,r=e.setFieldValue,o=e.touched,c=e.values,l=Object(u.useState)(!0),i=Object(s.a)(l,2),d=i[0],b=i[1],j=Object(u.useMemo)((function(){return c.layer_type!==x.e.SHAPE?x.a[c.layer_type]:x.a[c.layer_type][c.layer_data.type]}),[c]),h=Object(u.useCallback)((function(e){c.layer_data.shadowColor&&"transparent"!==c.layer_data.shadowColor||r("layer_data.shadowBlur",5),r("layer_data.shadowColor",e)}),[r]);return j.includes("layer_data.shadowColor")||j.includes("layer_data.shadowBlur")||j.includes("layer_data.shadowOpacity")||j.includes("layer_data.shadowOffsetX")||j.includes("layer_data.shadowOffsetY")?Object(A.jsxs)(We.a,{expanded:d,onChange:function(){return b(!d)},children:[Object(A.jsx)(Ye.a,{expandIcon:Object(A.jsx)(Je.a,{}),children:Object(A.jsx)(v.a,{children:"Shadow"})}),Object(A.jsx)(Xe.a,{children:Object(A.jsxs)(m.a,{display:"flex",flexDirection:"column",width:"100%",children:[j.includes("layer_data.shadowColor")?Object(A.jsxs)(Ue.a,{container:!0,spacing:2,children:[Object(A.jsx)(Ue.a,{item:!0,xs:6,children:Object(A.jsx)(v.a,{variant:"body1",color:"textSecondary",mr:2,children:"Shadow Color"})}),Object(A.jsx)(Ue.a,{item:!0,xs:6,children:Object(A.jsx)(ot,{value:c.layer_data.shadowColor,onChange:function(e){return h(e)},onInputChange:function(e){return h(e)},error:Boolean(t.layer_data&&t.layer_data.shadowColor),helperText:t.layer_data&&t.layer_data.shadowColor})})]}):Object(A.jsx)(A.Fragment,{}),j.includes("layer_data.shadowBlur")?Object(A.jsx)(nr,{name:"layer_data.shadowBlur",label:"Shadow Blur",variant:"outlined",type:"number",value:Object(oe.h)(c.layer_data.shadowBlur),error:Boolean(o.layer_data&&o.layer_data.shadowBlur&&t.layer_data&&t.layer_data.shadowBlur),helperText:o.layer_data&&o.layer_data.shadowBlur&&t.layer_data&&t.layer_data.shadowBlur,onBlur:a,onChange:n,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{}),j.includes("layer_data.shadowOpacity")?Object(A.jsx)(at,{label:"Shadow Opacity",min:0,max:1,step:.01,value:c.layer_data.shadowOpacity,setValue:function(e){return r("layer_data.shadowOpacity",e)}}):Object(A.jsx)(A.Fragment,{}),Object(A.jsxs)(Ue.a,{container:!0,spacing:1,children:[Object(A.jsx)(Ue.a,{item:!0,sm:6,children:j.includes("layer_data.shadowOffsetX")?Object(A.jsx)(nr,{name:"layer_data.shadowOffsetX",label:"Shadow OffsetX",variant:"outlined",type:"number",value:Object(oe.h)(c.layer_data.shadowOffsetX),error:Boolean(o.layer_data&&o.layer_data.shadowOffsetX&&t.layer_data&&t.layer_data.shadowOffsetX),helperText:o.layer_data&&o.layer_data.shadowOffsetX&&t.layer_data&&t.layer_data.shadowOffsetX,onBlur:a,onChange:n,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{})}),Object(A.jsx)(Ue.a,{item:!0,sm:6,children:j.includes("layer_data.shadowOffsetY")?Object(A.jsx)(nr,{name:"layer_data.shadowOffsetY",label:"Shadow OffsetY",variant:"outlined",type:"number",value:Object(oe.h)(c.layer_data.shadowOffsetY),error:Boolean(o.layer_data&&o.layer_data.shadowOffsetY&&t.layer_data&&t.layer_data.shadowOffsetY),helperText:o.layer_data&&o.layer_data.shadowOffsetY&&t.layer_data&&t.layer_data.shadowOffsetY,onBlur:a,onChange:n,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{})})]})]})})]}):Object(A.jsx)(A.Fragment,{})},or=b.a.memo(rr),cr=Object(d.c)(Be.a).withConfig({displayName:"CornerProperty__CustomeTextField",componentId:"sc-1szt41-0"})([".MuiInputBase-input{height:2rem;}"]),lr=function(e){var t=e.errors,a=e.handleBlur,n=e.handleChange,r=(e.setFieldValue,e.touched),o=e.values,c=Object(u.useState)(!0),l=Object(s.a)(c,2),i=l[0],d=l[1],b=Object(u.useMemo)((function(){return o.layer_type!==x.e.SHAPE?x.a[o.layer_type]:x.a[o.layer_type][o.layer_data.type]}),[o]);return b.includes("layer_data.cornerTopLeft")||b.includes("layer_data.cornerTopRight")||b.includes("layer_data.cornerBottomLeft")||b.includes("layer_data.cornerBottomRight")?Object(A.jsxs)(We.a,{expanded:i,onChange:function(){return d(!i)},children:[Object(A.jsx)(Ye.a,{expandIcon:Object(A.jsx)(Je.a,{}),children:Object(A.jsx)(v.a,{children:"Corner Radius"})}),Object(A.jsx)(Xe.a,{children:Object(A.jsxs)(Ue.a,{container:!0,spacing:1,children:[Object(A.jsx)(Ue.a,{item:!0,xs:6,children:b.includes("layer_data.cornerTopLeft")?Object(A.jsx)(cr,{name:"layer_data.cornerTopLeft",label:"Top Left",variant:"outlined",type:"number",value:Object(oe.h)(o.layer_data.cornerTopLeft),error:Boolean(r.layer_data&&r.layer_data.cornerTopLeft&&t.layer_data&&t.layer_data.cornerTopLeft),helperText:r.layer_data&&r.layer_data.cornerTopLeft&&t.layer_data&&t.layer_data.cornerTopLeft,onBlur:a,onChange:n,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{})}),Object(A.jsx)(Ue.a,{item:!0,xs:6,children:b.includes("layer_data.cornerTopRight")?Object(A.jsx)(cr,{name:"layer_data.cornerTopRight",label:"Top Right",variant:"outlined",type:"number",value:Object(oe.h)(o.layer_data.cornerTopRight),error:Boolean(r.layer_data&&r.layer_data.cornerTopRight&&t.layer_data&&t.layer_data.cornerTopRight),helperText:r.layer_data&&r.layer_data.cornerTopRight&&t.layer_data&&t.layer_data.cornerTopRight,onBlur:a,onChange:n,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{})}),Object(A.jsx)(Ue.a,{item:!0,xs:6,children:b.includes("layer_data.cornerBottomLeft")?Object(A.jsx)(cr,{name:"layer_data.cornerBottomLeft",label:"Bottom Left",variant:"outlined",type:"number",value:Object(oe.h)(o.layer_data.cornerBottomLeft),error:Boolean(r.layer_data&&r.layer_data.cornerBottomLeft&&t.layer_data&&t.layer_data.cornerBottomLeft),helperText:r.layer_data&&r.layer_data.cornerBottomLeft&&t.layer_data&&t.layer_data.cornerBottomLeft,onBlur:a,onChange:n,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{})}),Object(A.jsx)(Ue.a,{item:!0,xs:6,children:b.includes("layer_data.cornerBottomRight")?Object(A.jsx)(cr,{name:"layer_data.cornerBottomRight",label:"Bottom Right",variant:"outlined",type:"number",value:Object(oe.h)(o.layer_data.cornerBottomRight),error:Boolean(r.layer_data&&r.layer_data.cornerBottomRight&&t.layer_data&&t.layer_data.cornerBottomRight),helperText:r.layer_data&&r.layer_data.cornerBottomRight&&t.layer_data&&t.layer_data.cornerBottomRight,onBlur:a,onChange:n,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(A.jsx)(A.Fragment,{})})]})})]}):Object(A.jsx)(A.Fragment,{})},ir=b.a.memo(lr),sr=Object(d.c)(m.a).withConfig({displayName:"propertyBar__Wrapper",componentId:"sc-1e4csol-0"})(["width:350px;position:fixed;right:0;top:0;background:#666666;height:calc(100% - 50px);overflow:auto;"]),dr=b.a.memo((function(e){var t=e.fontList,a=e.toggleField,n=e.toggleLayerDataField,r=e.currentLayer,o=e.pressedKey,c=Object(te.a)(e,["fontList","toggleField","toggleLayerDataField","currentLayer","pressedKey"]),l=Object(u.useMemo)((function(){for(var e in c.values.layer_data)if(c.values.layer_data[e]!=r.layer_data[e])return!0;for(var t in c.values)if("layer_data"!=t&&c.values[t]!=r[t])return!0;return!1}),[c.values,r]);return Object(A.jsxs)(ze.a,{onSubmit:c.handleSubmit,noValidate:!0,children:[Object(A.jsxs)(m.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",height:"34px",children:[Object(A.jsx)(v.a,{variant:"h5",noWrap:!0,children:"Properties"}),c.isValid&&l?Object(A.jsx)(L.a,{type:"submit",color:"primary",variant:"outlined",children:"Apply"}):Object(A.jsx)(A.Fragment,{})]}),Object(A.jsx)(Dn,Object(i.a)(Object(i.a)({},c),{},{toggleField:a})),Object(A.jsx)(Vn,Object(i.a)(Object(i.a)({},c),{},{fontList:t})),Object(A.jsx)(Qn,Object(i.a)({},c)),Object(A.jsx)(Zn,Object(i.a)({},c)),Object(A.jsx)(Wn,Object(i.a)(Object(i.a)({},c),{},{toggleLayerDataField:n,currentLayer:r,pressedKey:o})),Object(A.jsx)(Gn,Object(i.a)({},c)),Object(A.jsx)(ar,Object(i.a)(Object(i.a)({},c),{},{toggleField:a})),Object(A.jsx)(or,Object(i.a)({},c)),Object(A.jsx)(ir,Object(i.a)({},c))]})})),ur=function(){var e=Object(O.d)(),t=Object(O.e)((function(e){return e.layerReducer.current})),a=Object(O.e)((function(e){return e.fontReducer.list})),n=Object(O.e)((function(e){return e.boardReducer.pressedKey})),r=Object(u.useMemo)((function(){return t?t.layer_type!==x.e.SHAPE?x.a[t.layer_type]:x.a[t.layer_type][t.layer_data.type]:[]}),[t]),o=Object(u.useMemo)((function(){return h.a.pick({layer_visible:1,layer_locked:0,layer_data:h.a.pick(x.b.layer_data,r.filter((function(e){return e.includes("layer_data.")})).map((function(e){return e.replace("layer_data.","")})))},r.filter((function(e){return!e.includes("layer_data.")})))}),[r]),c=Object(u.useCallback)((function(t){e(Object(Se.q)(t))}),[e]),s=Object(u.useCallback)((function(a){e(Object(Se.q)(Object(i.a)(Object(i.a)({},t),{},Object(l.a)({},a,t[a]?0:1))))}),[e,t]),d=Object(u.useCallback)((function(a){e(Object(Se.q)(Object(i.a)(Object(i.a)({},t),{},{layer_data:Object(i.a)(Object(i.a)({},t.layer_data),{},Object(l.a)({},a,t.layer_data[a]?0:1))})))}),[e,t]);return t?Object(A.jsx)(sr,{py:5,px:3,children:Object(A.jsx)(ze.b,{initialValues:Object(i.a)(Object(i.a)(Object(i.a)({},o),t),{},{layer_data:Object(i.a)(Object(i.a)({},o.layer_data),t.layer_data)}),validationSchema:Ae.b({layer_order:Ae.a(),layer_visible:Ae.a(),layer_locked:Ae.a(),layer_data:Ae.b(h.a.pick({name:Ae.c().required("Required"),text:Ae.c().test("text-validation","Required",(function(e){return e&&e.length||!r.includes("layer_data.text")})),width:Ae.a().test("width-validation","Required",(function(e){return e||!r.includes("layer_data.width")})),height:Ae.a().test("height-validation","Required",(function(e){return e||!r.includes("layer_data.height")})),left:Ae.a(),top:Ae.a(),rotation:Ae.a().moreThan(-181,"Must be greater than -181").lessThan(181,"Must be less than 181"),flop:Ae.a(),flip:Ae.a(),scaleX:Ae.a().moreThan(0,"Must be greater than 0"),scaleY:Ae.a().moreThan(0,"Must be greater than 0"),color:Ae.c().nullable().test("color-validation","Incorrect Color Format",oe.b),size:Ae.a(),scolor:Ae.c().nullable().test("color-validation","Incorrect Color Format",oe.b),stroke:Ae.a(),font:Ae.a(),opacity:Ae.a(),shadowColor:Ae.c().nullable().test("color-validation","Incorrect Color Format",oe.b),shadowBlur:Ae.a(),shadowOpacity:Ae.a(),shadowOffsetX:Ae.a(),shadowOffsetY:Ae.a(),cornerTopLeft:Ae.a(),cornerTopRight:Ae.a(),cornerBottomLeft:Ae.a(),cornerBottomRight:Ae.a(),radius:Ae.a().moreThan(0,"Must be greater than 0"),innerRadius:Ae.a().moreThan(0,"Must be greater than 0"),outerRadius:Ae.a().moreThan(0,"Must be greater than 0"),numPoints:Ae.a().moreThan(1,"Must be greater than 1"),angle:Ae.a(),pointerLength:Ae.a().moreThan(0,"Must be greater than 0"),pointerWidth:Ae.a().moreThan(0,"Must be greater than 0")},r.filter((function(e){return e.includes("layer_data.")})).map((function(e){return e.replace("layer_data.","")}))))}),enableReinitialize:!0,validate:function(e){return console.log(e),{}},onSubmit:c,children:function(e){return Object(A.jsx)(dr,Object(i.a)(Object(i.a)({},e),{},{fontList:a,toggleField:s,toggleLayerDataField:d,currentLayer:t,pressedKey:n}))}})}):Object(A.jsx)(A.Fragment,{})},br=a(182),jr=a(183),hr=Object(d.c)(m.a).withConfig({displayName:"scheme__Wrapper",componentId:"sc-188wpva-0"})(["background-color:",";"],(function(e){return e.background}));t.default=function(){var e=Object(O.d)(),t=Object(g.g)(),a=Object(u.useState)(""),n=Object(s.a)(a,2),d=n[0],b=n[1],j=Object(u.useState)(null),f=Object(s.a)(j,2),w=f[0],v=f[1],k=Object(u.useState)({}),L=Object(s.a)(k,2),S=L[0],R=L[1],I=Object(u.useRef)(0),F=Object(u.useRef)(0),M=Object(u.useRef)(null),B=Object(u.useRef)(null),T=Object(u.useRef)(null),E=Object(u.useRef)(null),D=Object(O.e)((function(e){return e.authReducer.user})),N=Object(O.e)((function(e){return e.schemeReducer.current})),P=Object(O.e)((function(e){return e.layerReducer.current})),z=Object(O.e)((function(e){return e.layerReducer.clipboard})),Y=Object(O.e)((function(e){return e.overlayReducer.list})),W=Object(O.e)((function(e){return e.logoReducer.list})),X=Object(O.e)((function(e){return e.fontReducer.list})),U=Object(O.e)((function(e){return e.boardReducer.zoom})),G=Object(O.e)((function(e){return e.boardReducer.pressedKey})),K=Object(O.e)((function(e){return e.boardReducer.boardRotate})),H=Object(O.e)((function(e){return e.boardReducer.frameSize})),J=Object(O.e)((function(e){return e.boardReducer.mouseMode})),Z=Object(O.e)((function(e){return e.boardReducer.paintingGuides})),q=Object(u.useRef)(null),Q=Object(u.useRef)(null),$=Object(O.e)((function(e){return e.schemeReducer.loading})),ee=Object(O.e)((function(e){return e.carMakeReducer.loading})),te=Object(O.e)((function(e){return e.fontReducer.loading})),ae=Object(O.e)((function(e){return e.uploadReducer.initialized})),ne=Object(u.useCallback)((function(e,t){R((function(a){return Object(i.a)(Object(i.a)({},a),{},Object(l.a)({},e,t))}))}),[R]),re=Object(u.useCallback)((function(){e(Object(C.j)(Object(oe.i)(Math.max(Math.min(1.25*U,10),.25))))}),[e,U]),ce=Object(u.useCallback)((function(){e(Object(C.j)(Object(oe.i)(Math.max(Math.min(U/1.25,10),.25))))}),[e,U]),le=Object(u.useCallback)((function(){var t=M.current.attrs.width,a=M.current.attrs.height,n=Object(oe.i)(Math.min(t/H.width,a/H.height));M.current.x((t/2-H.width/2)*n+t/2),M.current.y((a/2-H.height/2)*n+a/2),e(Object(C.j)(n))}),[e,M.current&&M.current.attrs&&M.current.attrs.width,M.current&&M.current.attrs&&M.current.attrs.height,H]),ie=Object(u.useCallback)((function(t){e(Object(C.h)(t))}),[]),se=Object(u.useCallback)((function(t){e(Object(C.e)(t))}),[]),de=Object(u.useCallback)((function(e){var t=Object(c.a)(Z),a=t.indexOf(e);a>-1?t.splice(a,1):t.push(e),ie(t)}),[Z,ie]),ue=Object(u.useCallback)((function(){setTimeout((function(){return document.activeElement.blur()}),1e3)}),[]),be=Object(u.useCallback)((function(t,a){if("INPUT"!==a.target.tagName&&"keydown"===a.type&&(G!==t&&e(Object(C.i)(t)),"del"!==t&&"backspace"!==t||!P||P.layer_type===x.e.CAR?"esc"===t&&P?e(Object(Se.n)(null)):"+"===a.key&&a.shiftKey?re():"_"===a.key&&a.shiftKey?ce():")"===a.key&&a.shiftKey?e(Object(C.j)(1)):"("===a.key&&a.shiftKey?le():"D"===a.key&&a.shiftKey?e(Object(C.g)(x.f.DEFAULT)):"B"===a.key&&a.shiftKey?e(Object(C.g)(x.f.PEN)):"R"===a.key&&a.shiftKey?e(Object(C.g)(x.f.RECT)):"C"===a.key&&a.shiftKey?e(Object(C.g)(x.f.CIRCLE)):"E"===a.key&&a.shiftKey?e(Object(C.g)(x.f.ELLIPSE)):"S"===a.key&&a.shiftKey?e(Object(C.g)(x.f.STAR)):"G"===a.key&&a.shiftKey?e(Object(C.g)(x.f.RING)):"O"===a.key&&a.shiftKey?e(Object(C.g)(x.f.REGULARPOLYGON)):"W"===a.key&&a.shiftKey?e(Object(C.g)(x.f.WEDGE)):"A"===a.key&&a.shiftKey?e(Object(C.g)(x.f.ARC)):"P"===a.key&&a.shiftKey?e(Object(C.g)(x.f.POLYGON)):"L"===a.key&&a.shiftKey?e(Object(C.g)(x.f.LINE)):">"===a.key&&a.shiftKey?e(Object(C.g)(x.f.ARROW)):"c"===a.key&&(a.ctrlKey||a.metaKey)&&P?e(Object(Se.m)(P)):"v"===a.key&&(a.ctrlKey||a.metaKey)&&z?e(Object(Se.b)(z)):"z"===a.key&&(a.ctrlKey||a.metaKey)?e(Object(C.b)()):"y"===a.key&&(a.ctrlKey||a.metaKey)?e(Object(C.c)()):"1"===t?de(x.g.CARMASK):"2"===t?de(x.g.WIREFRAME):"3"===t?de(x.g.SPONSORBLOCKS):"4"===t?de(x.g.NUMBERBLOCKS):"5"===t?de(x.g.GRID):"t"===t?v(x.c.TEXT):"s"===t?v(x.c.SHAPE):"l"===t?v(x.c.LOGO):"b"===t?v(x.c.BASEPAINT):"enter"===t&&[x.f.DEFAULT,x.f.LINE,x.f.ARROW,x.f.POLYGON].includes(J)&&e(Object(Se.o)(Se.a.ADD_TO_SHAPE)):b('Are you sure to delete "'.concat(P.layer_data.name,'"?'))),"INPUT"!==a.target.tagName&&("keyup"===a.type&&e(Object(C.i)(null)),["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"].includes(a.key)&&P&&![x.e.CAR,x.e.BASE].includes(P.layer_type))){var n=a.shiftKey?10:1,r="ArrowLeft"===a.key?-n:"ArrowRight"===a.key?n:0,o="ArrowUp"===a.key?-n:"ArrowDown"===a.key?n:0,c=r,l=o;if(90===K?(c=o,l=-r):180===K?(c=-r,l=-o):270===K&&(c=-o,l=r),"keyup"===a.type){var s=Object(i.a)({},P.layer_data);F.current!=I.current&&(s.left=P.layer_data.left+c,s.top=P.layer_data.top+l),e(Object(Se.q)(Object(i.a)(Object(i.a)({},P),{},{layer_data:s})))}else F.current!=I.current&&(F.current=Object.assign(I.current),e(Object(Se.r)(Object(i.a)(Object(i.a)({},P),{},{layer_data:Object(i.a)(Object(i.a)({},P.layer_data),{},{left:P.layer_data.left+c,top:P.layer_data.top+l})}))))}}),[e,G,P,z,F.current,I.current]),je=Object(u.useCallback)((function(){e(Object(Se.k)(P)),b("")}),[e,P,b]),he=Object(u.useCallback)(Object(o.a)(r.a.mark((function e(){var t,a,n,o,c,l,s,d,u,b,j,O,f,y=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(y.length>0&&void 0!==y[0])||y[0],a=document.createElement("canvas"),n=a.getContext("2d"),o=.5,c=Q.current.width*o,l=Q.current.height*o,b=Object(i.a)({},M.current.attrs),M.current.setAttrs({x:0,y:0,offsetX:0,offsetY:0,scaleX:1,scaleY:1,rotation:0,width:Q.current.width,height:Q.current.height}),M.current.draw(),!B.current){e.next=14;break}return j=B.current.toDataURL({pixelRatio:o}),e.next=13,Object(oe.a)(j);case 13:s=e.sent;case 14:if(!T.current){e.next=19;break}return O=T.current.toDataURL({pixelRatio:o}),e.next=18,Object(oe.a)(O);case 18:d=e.sent;case 19:if(!E.current||!t){e.next=24;break}return f=E.current.toDataURL({pixelRatio:o}),e.next=23,Object(oe.a)(f);case 23:u=e.sent;case 24:return M.current.setAttrs(h.a.omit(b,["container"])),M.current.draw(),a.width=c,a.height=l,s&&n.drawImage(s,0,0,s.width,s.height),d&&n.drawImage(d,0,0,d.width,d.height),u&&n.drawImage(u,0,0,u.width,u.height),e.abrupt("return",a.toDataURL("image/png"));case 32:case"end":return e.stop()}}),e)}))),[Q.current,M.current,B.current,T.current,E.current]),Oe=Object(u.useCallback)(Object(o.a)(r.a.mark((function t(){var a,n,o,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!M.current||!q.current){t.next=17;break}return t.prev=1,t.next=4,he();case 4:return a=t.sent,n=Object(oe.c)(a),o=new File([n],"".concat(q.current.id,".png"),{type:"image/png"}),(c=new FormData).append("files",o),c.append("schemeID",q.current.id),t.next=12,Ha.a.uploadThumbnail(c);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),e(Object(Ka.b)({message:t.t0.message}));case 17:case"end":return t.stop()}}),t,null,[[1,14]])}))),[e,q.current&&q.current.id,!M.current,he]);return Object(u.useEffect)((function(){D&&D.id&&t.id&&(N||e(Object(Me.f)(t.id)),ae||e(Object(Ga.c)(D.id)),Y.length||e(Object(br.b)()),W.length||e(Object(jr.b)()),X.length||e(Object(Le.b)()))}),[D]),Object(u.useEffect)((function(){var e=setInterval((function(){I.current+=1}),200),t=setTimeout(Oe,7e3),a=setInterval(Oe,3e5);return function(){clearInterval(e),clearInterval(a),clearTimeout(t)}}),[]),Object(u.useEffect)((function(){q.current=N}),[N]),Object(u.useEffect)((function(){Q.current=H}),[H]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(p.b,{title:N?N.name:null}),$||ee||te||!N?Object(A.jsx)(_.a,{}):Object(A.jsxs)(m.a,{width:"100%",height:"100%",display:"flex",flexDirection:"column",children:[Object(A.jsx)(y.a,{handleKeys:["all"],onKeyEvent:be}),Object(A.jsx)(y.a,{handleKeys:["all"],handleEventType:"keyup",onKeyEvent:be}),Object(A.jsxs)(m.a,{width:"100%",height:"calc(100% - 50px)",display:"flex",children:[Object(A.jsx)(Bn,{dialog:w,setDialog:v,focusBoard:ue,hoveredLayerJSON:S,onChangeHoverJSONItem:ne}),Object(A.jsx)(hr,{width:"calc(100% - 350px)",background:"#282828",overflow:"hidden",children:Object(A.jsx)(Fe,{hoveredLayerJSON:S,onChangeHoverJSONItem:ne,onChangeBoardRotation:se,stageRef:M,baseLayerRef:B,mainLayerRef:T,carMaskLayerRef:E})}),Object(A.jsx)(ur,{})]}),Object(A.jsx)(V,{onZoomIn:re,onZoomOut:ce,onZoomFit:le,onChangePaintingGuides:ie})]}),Object(A.jsx)(Pa,{text:d,open:0!==d.length,onCancel:function(){return b("")},onConfirm:je})]})}},444:function(e,t,a){"use strict";var n=a(19),r=(a(0),a(1067)),o=a(1111),c=a(576),l=a.n(c),i=a(7),s=Object(r.a)((function(e){return{search:Object(n.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:"transparent","&:hover":{backgroundColor:"transparent"},border:"1px solid #8A8A8A",width:"100%"},e.breakpoints.up("sm"),{width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"}}}));t.a=function(e){var t=e.value,a=e.onChange,n=s();return Object(i.jsxs)("div",{className:n.search,children:[Object(i.jsx)("div",{className:n.searchIcon,children:Object(i.jsx)(l.a,{})}),Object(i.jsx)(o.a,{placeholder:"Search",classes:{root:n.inputRoot,input:n.inputInput},value:t,inputProps:{"aria-label":"search"},onChange:function(e){a(e.target.value)}})]})}}}]);
//# sourceMappingURL=6.ffa5095e.chunk.js.map