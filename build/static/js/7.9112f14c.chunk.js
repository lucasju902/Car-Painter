(this["webpackJsonppaint-builder"]=this["webpackJsonppaint-builder"]||[]).push([[7],{1211:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),o=a(6),c=a(19),l=a(9),i=a(28),s=a(198),d=a(25),u=a(0),b=a.n(u),j=a(328),h=a(62),O=a.n(h),p=a(40),f=a(843),y=a.n(f),g=a(111),m=a(22);function x(){if(1==arguments.length){var e=arguments[0];this.header=_(e),C(this.header),v(this.header)}}function _(e){return{idLength:w(e.idLength,0),colorMapType:w(e.colorMapType,0),imageType:w(e.imageType,x.Type.RGB),colorMapIndex:w(e.colorMapIndex,0),colorMapLength:w(e.colorMapLength,0),colorMapDepth:w(e.colorMapDepth,0),offsetX:w(e.offsetX,0),offsetY:w(e.offsetY,0),width:w(e.width,0),height:w(e.height,0),pixelDepth:w(e.pixelDepth,32),flags:w(e.flags,8)}}function w(e,t){return"undefined"!==typeof e?e:t}function C(e){e.hasEncoding=e.imageType===x.Type.RLE_INDEXED||e.imageType===x.Type.RLE_RGB||e.imageType===x.Type.RLE_GREY,e.hasColorMap=e.imageType===x.Type.RLE_INDEXED||e.imageType===x.Type.INDEXED,e.isGreyColor=e.imageType===x.Type.RLE_GREY||e.imageType===x.Type.GREY,e.bytePerPixel=e.pixelDepth>>3,e.origin=(e.flags&x.Origin.MASK)>>x.Origin.SHIFT,e.alphaBits=e.flags&x.Origin.ALPHA}function v(e){if(e.imageType===x.Type.NO_DATA)throw new Error("Targa::checkHeader() - No data");if(e.hasColorMap){if(e.colorMapLength>256||1!==e.colorMapType)throw new Error("Targa::checkHeader() - Unsupported colormap for indexed type");if(16!==e.colorMapDepth&&24!==e.colorMapDepth&&32!==e.colorMapDepth)throw new Error("Targa::checkHeader() - Unsupported colormap depth")}else if(e.colorMapType)throw new Error("Targa::checkHeader() - Why does the image contain a palette ?");if(e.width<=0||e.height<=0)throw new Error("Targa::checkHeader() - Invalid image size");if(8!==e.pixelDepth&&16!==e.pixelDepth&&24!==e.pixelDepth&&32!==e.pixelDepth)throw new Error('Targa::checkHeader() - Invalid pixel size "'+e.pixelDepth+'"');if(0!==e.alphaBits&&1!==e.alphaBits&&8!==e.alphaBits)throw new Error("Targa::checkHeader() - Unsuppported alpha size")}function k(e,t,a,n,r,o,c,l,i,s){var d,u,b,j,h,O,p=this.header.colorMapDepth>>3;for(j=0,O=r;O!==c;O+=o)for(h=l;h!==s;h+=i,j++)b=4*(h+n*O),u=t[j]*p,4===p?(e[b]=a[u+2],e[b+1]=a[u+1],e[b+2]=a[u],e[b+3]=a[u+3]):3===p?(e[b]=a[u+2],e[b+1]=a[u+1],e[b+2]=a[u],e[b+3]=255):2===p&&(d=a[u]|a[u+1]<<8,e[b]=(31744&d)>>7,e[b+1]=(992&d)>>2,e[b+2]=(31&d)<<3,e[b+3]=32768&d?0:255);return e}function L(e,t,a,n,r,o,c,l,i,s){var d,u,b,j,h;for(b=0,h=r;h!==c;h+=o)for(j=l;j!==s;j+=i,b+=2)d=t[b]|t[b+1]<<8,e[u=4*(j+n*h)]=(31744&d)>>7,e[u+1]=(992&d)>>2,e[u+2]=(31&d)<<3,e[u+3]=32768&d?0:255;return e}function S(e,t,a,n,r,o,c,l,i,s){var d,u,b,j,h=this.header.pixelDepth>>3;for(u=0,j=r;j!==c;j+=o)for(b=l;b!==s;b+=i,u+=h)e[(d=4*(b+n*j))+3]=255,e[d+2]=t[u],e[d+1]=t[u+1],e[d]=t[u+2];return e}function R(e,t,a,n,r,o,c,l,i,s){var d,u,b,j;for(d=0,b=r;b!==c;b+=o)for(u=l;u!==s;u+=i,d+=4)e[(j=4*(u+n*b))+2]=t[d],e[j+1]=t[d+1],e[j]=t[d+2],e[j+3]=t[d+3];return e}function I(e,t,a,n,r,o,c,l,i,s){var d,u,b,j,h;for(d=0,b=r;b!==c;b+=o)for(u=l;u!==s;u+=i,d+=4)j=4*(u+n*b),h=255*t[d+3],e[j+2]=t[d]/h,e[j+1]=t[d+1]/h,e[j]=t[d+2]/h,e[j+3]=t[d+3];return e}function D(e,t,a,n,r,o,c,l,i,s){var d,u,b,j,h;for(b=0,h=r;h!==c;h+=o)for(j=l;j!==s;j+=i,b++)d=t[b],e[u=4*(j+n*h)]=d,e[u+1]=d,e[u+2]=d,e[u+3]=255;return e}function E(e,t,a,n,r,o,c,l,i,s){var d,u,b,j,h;for(b=0,h=r;h!==c;h+=o)for(j=l;j!==s;j+=i,b+=2)d=t[b],e[u=4*(j+n*h)]=d,e[u+1]=d,e[u+2]=d,e[u+3]=t[b+1];return e}function T(e){var t=e.byteLength-x.FOOTER_SIZE,a=x.SIGNATURE,n={},r=new Uint8Array(e.buffer,t+8,a.length);return function(e){for(var t=x.SIGNATURE,a=0;a<t.length;a++)if(e.charCodeAt(a)!==t.charCodeAt(a))return!1;return!0}(String.fromCharCode.apply(null,r))?(n.hasFooter=!0,n.extensionOffset=e.getUint32(t,x.LITTLE_ENDIAN),n.developerOffset=e.getUint32(t+4,x.LITTLE_ENDIAN),n.hasExtensionArea=0!==n.extensionOffset,n.hasDeveloperArea=0!==n.developerOffset,n.extensionOffset&&(n.attributeType=e.getUint8(n.extensionOffset+494)),n):(n.hasFooter=!1,n)}x.Type={NO_DATA:0,INDEXED:1,RGB:2,GREY:3,RLE_INDEXED:9,RLE_RGB:10,RLE_GREY:11},x.Origin={BOTTOM_LEFT:0,BOTTOM_RIGHT:1,TOP_LEFT:2,TOP_RIGHT:3,SHIFT:4,MASK:48,ALPHA:8},x.HEADER_SIZE=18,x.FOOTER_SIZE=26,x.LITTLE_ENDIAN=!0,x.RLE_BIT=128,x.RLE_MASK=127,x.RLE_PACKET=1,x.RAW_PACKET=2,x.SIGNATURE="TRUEVISION-XFILE.\0",x.prototype.open=function(e,t){var a,n=this;(a=new XMLHttpRequest).open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){200===this.status&&(n.arrayBuffer=a.response,n.load(n.arrayBuffer),t&&t.call(n))},a.send(null)},x.prototype.load=function(e){var t=new DataView(e);this.headerData=new Uint8Array(e,0,x.HEADER_SIZE),this.header=function(e){var t=x.LITTLE_ENDIAN;if(e.byteLength<18)throw new Error("Targa::load() - Not enough data to contain header");var a={};return a.idLength=e.getUint8(0),a.colorMapType=e.getUint8(1),a.imageType=e.getUint8(2),a.colorMapIndex=e.getUint16(3,t),a.colorMapLength=e.getUint16(5,t),a.colorMapDepth=e.getUint8(7),a.offsetX=e.getUint16(8,t),a.offsetY=e.getUint16(10,t),a.width=e.getUint16(12,t),a.height=e.getUint16(14,t),a.pixelDepth=e.getUint8(16),a.flags=e.getUint8(17),a}(t),C(this.header),v(this.header);var a=x.HEADER_SIZE;if((a+=this.header.idLength)>=e.byteLength)throw new Error("Targa::load() - No data");if(this.header.hasColorMap){var n=this.header.colorMapLength*(this.header.colorMapDepth>>3);this.palette=new Uint8Array(e,a,n),a+=n}var r=this.header.pixelDepth>>3,o=this.header.width*this.header.height,c=o*r;if(this.header.hasEncoding){var l=e.byteLength-a-x.FOOTER_SIZE,i=new Uint8Array(e,a,l);this.imageData=function(e,t,a){var n,r,o,c,l,i,s;for(s=new Uint8Array(a),i=new Uint8Array(t),l=0,n=0;n<a;)if(o=1+((r=e[l++])&x.RLE_MASK),r&x.RLE_BIT){for(c=0;c<t;++c)i[c]=e[l++];for(c=0;c<o;++c)s.set(i,n),n+=t}else for(o*=t,c=0;c<o;++c)s[n++]=e[l++];if(n>a)throw new Error("Targa::decodeRLE() - Read bytes: "+n+" Expected bytes: "+a);return s}(i,r,c)}else this.imageData=new Uint8Array(e,a,this.header.hasColorMap?o:c);this.footer=T(t),(0!==this.header.alphaBits||this.footer.hasExtensionArea&&(3===this.footer.attributeType||4===this.footer.attributeType))&&(this.footer.usesAlpha=!0)},x.prototype.getImageData=function(e){var t,a,n,r,o,c,l,i=this.header.width,s=this.header.height,d=(this.header.flags&x.Origin.MASK)>>x.Origin.SHIFT;switch(e||(e=document?document.createElement("canvas").getContext("2d").createImageData(i,s):{width:i,height:s,data:new Uint8ClampedArray(i*s*4)}),d===x.Origin.TOP_LEFT||d===x.Origin.TOP_RIGHT?(r=0,o=1,c=s):(r=s-1,o=-1,c=-1),d===x.Origin.TOP_LEFT||d===x.Origin.BOTTOM_LEFT?(t=0,a=1,n=i):(t=i-1,a=-1,n=-1),this.header.pixelDepth){case 8:l=this.header.isGreyColor?D:k;break;case 16:l=this.header.isGreyColor?E:L;break;case 24:l=S;break;case 32:l=this.footer.hasExtensionArea?3===this.footer.attributeType?R:4===this.footer.attributeType?I:S:0!==this.header.alphaBits?R:S}return l.call(this,e.data,this.imageData,this.palette,i,r,o,c,t,a,n),e},x.prototype.setImageData=function(e){if(!e)throw new Error("Targa::setImageData() - imageData argument missing");var t,a,n,r,o,c,l=this.header.width,i=this.header.height,s=l*i*(this.header.pixelDepth>>3),d=(this.header.flags&x.Origin.MASK)>>x.Origin.SHIFT;d===x.Origin.TOP_LEFT||d===x.Origin.TOP_RIGHT?(r=0,o=1,c=i):(r=i-1,o=-1,c=-1),d===x.Origin.TOP_LEFT||d===x.Origin.BOTTOM_LEFT?(t=0,a=1,n=l):(t=l-1,a=-1,n=-1),this.imageData||(this.imageData=new Uint8Array(s)),R(this.imageData,e.data,this.palette,l,r,o,c,t,a,n);var u=this.imageData;this.header.hasEncoding&&(u=function(e,t){for(var a,n,r,o,c=t,l=[],i=0,s=e.pixelDepth>>3,d=0,u=e.width*e.height*s,b=function(e,t){for(var a=0;a<s;a++)if(c[e*s+a]!==c[t*s+a])return!1;return!0},j=function(e){return b(e,e+1)?x.RLE_PACKET:x.RAW_PACKET};i*s<c.length&&i*s<u;){if(r=0,(n=j(i))===x.RLE_PACKET)for(;i+r<c.length&&r<128&&b(i,i+r);)r++;else for(;i+r<c.length&&r<128&&j(i+r)===x.RAW_PACKET;)r++;if(o=r-1,n===x.RLE_PACKET&&(o|=x.RLE_BIT),l[d++]=o,n===x.RLE_PACKET){for(a=0;a<s;a++)l[a+d]=c[a+i*s];d+=s}else{for(a=0;a<s*r;a++)l[a+d]=c[a+i*s];d+=s*r}i+=r}return new Uint8Array(l)}(this.header,u));var b=x.HEADER_SIZE+u.length+x.FOOTER_SIZE,j=new ArrayBuffer(b);this.arrayBuffer=j,this.headerData=new Uint8Array(j,0,x.HEADER_SIZE),this.RLEData=new Uint8Array(j,x.HEADER_SIZE,u.length),this.footerData=new Uint8Array(j,x.HEADER_SIZE+u.length,x.FOOTER_SIZE);var h=new DataView(this.headerData.buffer);!function(e,t){var a=x.LITTLE_ENDIAN;t.setUint8(0,e.idLength),t.setUint8(1,e.colorMapType),t.setUint8(2,e.imageType),t.setUint16(3,e.colorMapIndex,a),t.setUint16(5,e.colorMapLength,a),t.setUint8(7,e.colorMapDepth),t.setUint16(8,e.offsetX,a),t.setUint16(10,e.offsetY,a),t.setUint16(12,e.width,a),t.setUint16(14,e.height,a),t.setUint8(16,e.pixelDepth),t.setUint8(17,e.flags)}(this.header,h),this.RLEData.set(u),function(e){for(var t=x.SIGNATURE,a=e.byteLength-t.length,n=0;n<t.length;n++)e[a+n]=t.charCodeAt(n)}(this.footerData)},x.prototype.getCanvas=function(){var e,t,a;return a=(t=(e=document.createElement("canvas")).getContext("2d")).createImageData(this.header.width,this.header.height),e.width=this.header.width,e.height=this.header.height,t.putImageData(this.getImageData(a),0,0),e},x.prototype.getDataURL=function(e){return this.getCanvas().toDataURL(e||"image/png")},x.prototype.getBlobURL=function(){if(!this.arrayBuffer)throw new Error("Targa::getBlobURL() - No data available for blob");var e=new Blob([this.arrayBuffer],{type:"image/x-tga"});return URL.createObjectURL(e)};var M=x,F=a(526),B=a(10),A=a(106),P=a(39),N=a(65),U=a(77),Y=a(381),X=a(380),W=a(1177),G=a(1215),z=a(1178),H=a(1179),K=a(1180),V=a(574),Z=a(494),J=a(484),q=a(519),Q=a(11),$=Object(d.c)(Z.a).withConfig({displayName:"ZoomPopover__CustomOutlinedInput",componentId:"sc-72h4yq-0"})(["&.MuiOutlinedInput-root{width:100px !important;}.MuiOutlinedInput-input{padding:6px 14px;border-bottom:none;width:40px;}"]),ee=function(e){var t=e.anchorEl,a=e.zoom,n=e.setZoom,r=e.onZoomIn,o=e.onZoomOut,c=e.onZoomFit,l=e.onClose,i=Object(u.useCallback)((function(e){13===e.keyCode&&(e.preventDefault(),l())}),[l]),s=Object(u.useCallback)((function(e){n(parseInt(e.target.value||0)/100)}),[n]),d=Object(u.useCallback)((function(e){return e.target.select()}),[]),b=Object(u.useCallback)((function(){n(1)}),[n]);return Object(Q.jsx)(J.a,{open:Boolean(t),anchorEl:t,onClose:l,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"column",p:4,width:"200px",children:[Object(Q.jsxs)(F.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(Q.jsx)(X.a,{onClick:r,children:"Zoom in"}),Object(Q.jsx)(U.a,{variant:"body2",children:"Shift +"})]}),Object(Q.jsxs)(F.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(Q.jsx)(X.a,{onClick:o,children:"Zoom out"}),Object(Q.jsx)(U.a,{variant:"body2",children:"Shift -\xa0"})]}),Object(Q.jsxs)(F.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(Q.jsx)(X.a,{onClick:c,children:"Zoom to fit"}),Object(Q.jsx)(U.a,{variant:"body2",children:"Shift 9"})]}),Object(Q.jsxs)(F.a,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[Object(Q.jsx)(X.a,{onClick:b,children:"Zoom to 100%"}),Object(Q.jsx)(U.a,{variant:"body2",children:"Shift 0"})]}),Object(Q.jsx)($,{id:"zoom-value",value:100*a,onChange:s,onFocus:d,onKeyDown:i,endAdornment:Object(Q.jsx)(q.a,{position:"end",children:"%"}),labelWidth:0,autoFocus:!0})]})})},te=b.a.memo(ee),ae=Object(d.c)(U.a).withConfig({displayName:"Toolbar__Typography",componentId:"sc-1sow5sy-0"})(N.b),ne=Object(d.c)(W.a).withConfig({displayName:"Toolbar__ToggleButton",componentId:"sc-1sow5sy-1"})(N.b),re=Object(d.c)(Y.a).withConfig({displayName:"Toolbar__IconButton",componentId:"sc-1sow5sy-2"})(N.b),oe=d.c.div.withConfig({displayName:"Toolbar__Wrapper",componentId:"sc-1sow5sy-3"})(["width:100%;height:50px;display:flex;padding:10px 20px;background:#151515;z-index:1201;"]),ce=Object(d.c)(X.a).withConfig({displayName:"Toolbar__ZoomButton",componentId:"sc-1sow5sy-4"})(["&.MuiButton-contained{color:#fff;background-color:rgba(255,255,255,0.12);}"]),le=b.a.memo((function(e){var t=e.onZoomIn,a=e.onZoomOut,n=e.onZoomFit,r=e.onChangePaintingGuides,o=e.onDownloadTGA,c=Object(u.useState)(null),l=Object(s.a)(c,2),i=l[0],d=l[1],b=Object(p.d)(),j=Object(p.e)((function(e){return e.boardReducer.paintingGuides})),h=Object(p.e)((function(e){return e.boardReducer.actionHistoryIndex})),O=Object(p.e)((function(e){return e.boardReducer.actionHistory})),f=Object(p.e)((function(e){return e.boardReducer.zoom})),y=Object(u.useCallback)((function(e,t){r(t)}),[r]),g=Object(u.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];b(e?Object(P.c)():Object(P.d)())}),[b]),m=Object(u.useCallback)((function(e){d(e.currentTarget)}),[d]),x=Object(u.useCallback)((function(){d(null)}),[d]),_=Object(u.useCallback)((function(e){b(Object(P.k)(e))}),[b]);return Object(Q.jsx)(oe,{children:Object(Q.jsxs)(F.a,{display:"flex",justifyContent:"space-between",alignContent:"center",width:"100%",children:[Object(Q.jsx)(F.a,{display:"flex",justifyContent:"start",alignContent:"center",children:Object(Q.jsxs)(G.a,{value:j,onChange:y,"aria-label":"Painting Guides",children:[Object(Q.jsx)(ne,{value:B.g.CARMASK,"aria-label":"car-mask",children:Object(Q.jsx)(V.a,{title:"Toggle Car Mask Guide (HotKey: 1)",arrow:!0,children:Object(Q.jsx)(ae,{variant:"caption",children:"car mask"})})}),Object(Q.jsx)(ne,{value:B.g.WIREFRAME,"aria-label":"wireframe",children:Object(Q.jsx)(V.a,{title:"Toggle Wireframe Guide (HotKey: 2)",arrow:!0,children:Object(Q.jsx)(ae,{variant:"caption",children:"wireframe"})})}),Object(Q.jsx)(ne,{value:B.g.SPONSORBLOCKS,"aria-label":"sponsor-blocks",children:Object(Q.jsx)(V.a,{title:"Toggle Sponsor Blocks Guide (HotKey: 3)",arrow:!0,children:Object(Q.jsx)(ae,{variant:"caption",children:"sponsor blocks"})})}),Object(Q.jsx)(ne,{value:B.g.NUMBERBLOCKS,"aria-label":"number-blocks",children:Object(Q.jsx)(V.a,{title:"Toggle Number Blocks Guide (HotKey: 4)",arrow:!0,children:Object(Q.jsx)(ae,{variant:"caption",children:"number blocks"})})}),Object(Q.jsx)(ne,{value:B.g.GRID,"aria-label":"grid",children:Object(Q.jsx)(V.a,{title:"Toggle Grid Guide (HotKey: 5)",arrow:!0,children:Object(Q.jsx)(ae,{variant:"caption",children:"grid"})})})]})}),Object(Q.jsxs)(F.a,{display:"flex",justifyContent:"flex-end",alignContent:"center",children:[Object(Q.jsx)(X.a,{variant:"outlined",onClick:o,children:"Download TGA"}),Object(Q.jsx)(V.a,{title:"Undo",arrow:!0,children:Object(Q.jsx)(re,{disabled:-1===h,onClick:function(){return g(!0)},children:Object(Q.jsx)(z.a,{})})}),Object(Q.jsx)(V.a,{title:"Redo",arrow:!0,children:Object(Q.jsx)(re,{disabled:h===O.length-1,onClick:function(){return g(!1)},children:Object(Q.jsx)(H.a,{})})}),Object(Q.jsxs)(ce,{variant:"contained",endIcon:Object(Q.jsx)(K.a,{}),onClick:m,children:[(100*f).toFixed(2)," %"]}),Object(Q.jsx)(te,{anchorEl:i,zoom:f,setZoom:_,onZoomIn:t,onZoomOut:a,onZoomFit:n,onClose:x})]})]})})})),ie=a(844),se=a.n(ie),de=a(573),ue=a(1135),be=a(1181),je=a(1182),he=a(555),Oe=a(685),pe=a(625),fe=a.n(pe),ye=a(50),ge=function(e){var t=e.id,a=e.src,n=e.filterColor,c=e.frameSize,i=e.allowFit,d=e.layer_data,b=e.loadedStatus,j=e.onLoadLayer,h=e.tellSize,O=e.onSelect,p=e.onChange,f=e.onHover,y=e.onDragStart,g=e.onDragEnd,m=Object(he.a)(e,["id","src","filterColor","frameSize","allowFit","layer_data","loadedStatus","onLoadLayer","tellSize","onSelect","onChange","onHover","onDragStart","onDragEnd"]),x=Object(u.useRef)(null),_=Object(u.useRef)(),w=Object(u.useState)(null),C=Object(s.a)(w,2),v=C[0],k=C[1],L=Object(u.useMemo)((function(){return n&&n.length?[fe.a.Filters.RGBA]:[]}),[n]),S=Object(u.useCallback)((function(e){return x.current?Math.max(1,x.current.width/e.width(),x.current.height/e.height()):1}),[]);Object(u.useEffect)((function(){return!1!==b&&!0!==b&&j&&t&&j(t,!1),I(),function(){x.current&&x.current.removeEventListener("load",R)}}),[]),Object(u.useEffect)((function(){_.current&&(n&&n.length?_.current.cache({pixelRatio:S(_.current),imageSmoothingEnabled:!0}):_.current.clearCache())}),[n]);var R=Object(u.useCallback)(Object(o.a)(r.a.mark((function e(){var o,l,s,d,u,b,O;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!i||x.current.width<=c.width/2&&x.current.height<=c.height/2?x.current.width:c.width/2,l=!i||x.current.width<=c.width/2&&x.current.height<=c.height/2?x.current.height:c.width/2*x.current.height/x.current.width,s=m.width||o,d=m.height||l,!a.toLowerCase().includes(".svg")||x.current.width&&x.current.height){e.next=18;break}return u=document.createElement("canvas"),b=u.getContext("2d"),e.next=9,Oe.a.from(b,a,{enableRedraw:!0});case 9:return O=e.sent,s=s||O.documentElement.node.width.baseVal.value||200,d=d||O.documentElement.node.height.baseVal.value||200,O.resize(s,d,"none"),e.next=15,O.render();case 15:k(u),e.next=19;break;case 18:k(x.current);case 19:!p||m.width||m.height||p({left:Object(ye.p)(m.x-s/2),top:Object(ye.p)(m.y-d/2),width:Object(ye.p)(s),height:Object(ye.p)(d)}),n&&n.length&&_.current.cache({pixelRatio:S(_.current),imageSmoothingEnabled:!0}),h&&h({width:s,height:d}),j&&t&&j(t,!0);case 23:case"end":return e.stop()}}),e)}))),[c,i,m.width,m.height,h,j,p,k,S,ye.p]),I=Object(u.useCallback)(Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new window.Image).src=a+"?timestamp=".concat((new Date).toISOString()),t.crossOrigin="anonymous",x.current=t,x.current.addEventListener("load",R);case 5:case"end":return e.stop()}}),e)}))),[R]),D=Object(u.useCallback)((function(e){O(),y&&y()}),[O,y]),E=Object(u.useCallback)((function(e){p&&p({left:Object(ye.p)(e.target.x()),top:Object(ye.p)(e.target.y())}),g&&g()}),[ye.p,p,g]),T=Object(u.useCallback)((function(e){if(p){var t=_.current,a=t.scaleX(),r=t.scaleY();t.scaleX(a>0?1:-1),t.scaleY(r>0?1:-1);var o=Math.abs(1!==Math.abs(Object(ye.p)(r))?r:a);p({left:Object(ye.p)(t.x()),top:Object(ye.p)(t.y()),width:Object(ye.p)(Math.max(1,t.width()*Math.abs(a))),height:Object(ye.p)(Math.max(1,t.height()*Math.abs(r))),rotation:Object(ye.p)(t.rotation())||0,flop:a>0?0:1,flip:r>0?0:1,shadowBlur:Object(ye.p)(t.shadowBlur()*o),shadowOffsetX:Object(ye.p)(d.shadowOffsetX*Math.abs(a)),shadowOffsetY:Object(ye.p)(d.shadowOffsetY*Math.abs(r))}),n&&n.length?t.cache({pixelRatio:S(_.current),imageSmoothingEnabled:!0}):t.clearCache()}}),[n,ye.p,S,p]);return Object(Q.jsx)(de.f,Object(l.a)(Object(l.a)({},m),{},{image:v,onClick:O,onTap:O,ref:_,draggable:p,filters:L.length?L:null,red:n&&n.length?Object(ye.m)(n).r:null,green:n&&n.length?Object(ye.m)(n).g:null,blue:n&&n.length?Object(ye.m)(n).b:null,alpha:n&&n.length?Object(ye.m)(n).a/255:null,onDragStart:D,onDragEnd:E,onTransformEnd:T,perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,onMouseOver:function(){return m.listening&&f&&f(!0)},onMouseOut:function(){return m.listening&&f&&f(!1)}}))},me=function(e){var t=e.legacyMode,a=e.paintingGuides,n=e.carMake,r=e.handleImageSize,o=e.frameSize,c=e.guideData,l=e.loadedStatuses,i=e.onLoadLayer,s=Object(u.useMemo)((function(){return c.grid_padding||10}),[c]),d=Object(u.useMemo)((function(){return c.grid_stroke||.1}),[c]),b=Object(u.useCallback)((function(e){return(t?Object(ye.o)(n):Object(ye.d)(n))+e}),[t,n]);return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(ge,{id:"guide-wireframe",loadedStatus:l["guide-wireframe"],src:b("wireframe.png"),tellSize:r,filterColor:c.wireframe_color,opacity:c.wireframe_opacity,listening:!1,visible:!!a.includes(B.g.WIREFRAME),onLoadLayer:i}),Array.from(Array(Math.round(o.width/s)),(function(e,t){return Object(Q.jsx)(de.h,{points:[Math.round(t*s),0,Math.round(t*s),o.width],stroke:c.grid_color||"#ddd",opacity:c.grid_opacity||1,strokeWidth:d,listening:!1,visible:!!a.includes(B.g.GRID)},"x-".concat(t))})),Array.from(Array(Math.round(o.height/s)),(function(e,t){return Object(Q.jsx)(de.h,{points:[0,Math.round(t*s),o.height,Math.round(t*s)],stroke:c.grid_color||"#ddd",opacity:c.grid_opacity||1,strokeWidth:d,listening:!1,visible:!!a.includes(B.g.GRID)},"y-".concat(t))}))]})},xe=b.a.memo(me),_e=function(e){var t=e.legacyMode,a=e.paintingGuides,n=e.carMake,r=e.handleImageSize,o=e.guideData,c=e.loadedStatuses,l=e.onLoadLayer,i=Object(u.useCallback)((function(e){return(t?Object(ye.o)(n):Object(ye.d)(n))+e}),[t,n]);return Object(Q.jsx)(ge,{id:"guide-mask",loadedStatus:c["guide-mask"],src:i("mask.png"),tellSize:r,filterColor:o.carmask_color,opacity:o.carmask_opacity,listening:!1,visible:!!a.includes(B.g.CARMASK),onLoadLayer:l})},we=b.a.memo(_e),Ce=function(e){var t=e.legacyMode,a=e.paintingGuides,n=e.carMake,r=e.handleImageSize,o=e.guideData,c=e.loadedStatuses,l=e.onLoadLayer,i=Object(u.useCallback)((function(e){return(t?Object(ye.o)(n):Object(ye.d)(n))+e}),[t,n]);return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(ge,{id:"guide-sponsorblocks",loadedStatus:c["guide-sponsorblocks"],src:i("sponsor_blocks.png"),tellSize:r,filterColor:o.sponsor_color,opacity:o.sponsor_opacity,listening:!1,visible:!!a.includes(B.g.SPONSORBLOCKS),onLoadLayer:l}),Object(Q.jsx)(ge,{id:"guide-numberblocks",loadedStatus:c["guide-numberblocks"],src:i("number_blocks.png"),tellSize:r,filterColor:o.numberblock_color,opacity:o.numberblock_opacity,listening:!1,visible:!!a.includes(B.g.NUMBERBLOCKS),onLoadLayer:l})]})},ve=b.a.memo(Ce),ke=function(e){var t=e.layers,a=e.legacyMode,n=e.carMake,r=e.loadedStatuses,o=e.handleImageSize,c=e.onLoadLayer,l=Object(u.useMemo)((function(){return O.a.orderBy(t.filter((function(e){return e.layer_type===B.e.CAR})),["layer_order"],["desc"])}),[t]),i=Object(u.useCallback)((function(e){return(a?Object(ye.o)(n):Object(ye.d)(n))+e}),[a,n]);return Object(Q.jsx)(Q.Fragment,{children:l.map((function(e){return Object(Q.jsx)(ge,{id:e.id,src:i(e.layer_data.img),filterColor:e.layer_data.color,listening:!1,visible:!!e.layer_visible,loadedStatus:r[e.id],onLoadLayer:c,tellSize:o},e.id)}))})},Le=b.a.memo(ke),Se=function(e){var t=e.legacyMode,a=e.layers,n=e.carMake,r=e.loadedStatuses,o=e.handleImageSize,c=e.onLoadLayer,l=Object(u.useMemo)((function(){return O.a.orderBy(a.filter((function(e){return e.layer_type===B.e.BASE})),["layer_order","desc"])}),[a]),i=Object(u.useCallback)((function(e){return t?Object(ye.n)(e.layer_data)+e.layer_data.img:Object(ye.c)(n,e.layer_data.basePaintIndex)+e.layer_data.img}),[t,n]);return Object(Q.jsx)(Q.Fragment,{children:l.map((function(e){return Object(Q.jsx)(ge,{id:e.id,src:i(e),opacity:e.layer_data.opacity,filterColor:e.layer_data.color,listening:!1,visible:!!e.layer_visible,loadedStatus:r[e.id],tellSize:o,onLoadLayer:c},e.id)}))})},Re=b.a.memo(Se),Ie=function(e){var t=e.id,a=e.src,n=e.bgColor,c=void 0===n?null:n,i=e.paddingX,d=void 0===i?0:i,b=e.paddingY,j=void 0===b?0:b,h=e.filterColor,O=e.frameSize,p=e.allowFit,f=e.layer_data,y=e.loadedStatus,g=e.onLoadLayer,m=e.tellSize,x=e.onSelect,_=e.onChange,w=e.onHover,C=e.onDragStart,v=e.onDragEnd,k=Object(he.a)(e,["id","src","bgColor","paddingX","paddingY","filterColor","frameSize","allowFit","layer_data","loadedStatus","onLoadLayer","tellSize","onSelect","onChange","onHover","onDragStart","onDragEnd"]),L=Object(u.useRef)(null),S=Object(u.useRef)(),R=Object(u.useRef)(),I=Object(u.useState)(null),D=Object(s.a)(I,2),E=D[0],T=D[1],M=Object(u.useMemo)((function(){return h&&h.length?[fe.a.Filters.RGBA]:[]}),[h]),F=Object(u.useCallback)((function(e){return L.current?Math.max(1,L.current.width/e.width(),L.current.height/e.height()):1}),[]);Object(u.useEffect)((function(){return!1!==y&&!0!==y&&g&&t&&g(t,!1),A(),function(){L.current&&L.current.removeEventListener("load",B)}}),[]),Object(u.useEffect)((function(){R.current&&(h&&h.length?R.current.cache({pixelRatio:F(R.current),imageSmoothingEnabled:!0}):R.current.clearCache())}),[h]);var B=Object(u.useCallback)(Object(o.a)(r.a.mark((function e(){var n,o,c,l,i,s,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!p||L.current.width<=O.width/2&&L.current.height<=O.height/2?L.current.width:O.width/2,o=!p||L.current.width<=O.width/2&&L.current.height<=O.height/2?L.current.height:O.width/2*L.current.height/L.current.width,c=k.width||n,l=k.height||o,!a.toLowerCase().includes(".svg")||L.current.width&&L.current.height){e.next=19;break}return i=document.createElement("canvas"),s=i.getContext("2d"),e.next=9,Oe.a.from(s,a,{enableRedraw:!0});case 9:return d=e.sent,console.log(d),c=c||d.documentElement.node.width.baseVal.value||200,l=l||d.documentElement.node.height.baseVal.value||200,d.resize(c,l,"none"),e.next=16,d.render();case 16:T(i),e.next=20;break;case 19:T(L.current);case 20:!_||k.width||k.height||_({left:Object(ye.p)(k.x-c/2),top:Object(ye.p)(k.y-l/2),width:Object(ye.p)(c),height:Object(ye.p)(l)}),h&&h.length&&R.current.cache({pixelRatio:F(R.current),imageSmoothingEnabled:!0}),m&&m({width:c,height:l}),g&&t&&g(t,!0);case 24:case"end":return e.stop()}}),e)}))),[O,p,k.width,k.height,m,g,_,T,F,ye.p]),A=Object(u.useCallback)(Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new window.Image).src=a+"?timestamp=".concat((new Date).toISOString()),t.crossOrigin="anonymous",L.current=t,L.current.addEventListener("load",B);case 5:case"end":return e.stop()}}),e)}))),[B]),P=Object(u.useCallback)((function(e){x(),C&&C()}),[x,C]),N=Object(u.useCallback)((function(e){_&&_({left:Object(ye.p)(e.target.x()),top:Object(ye.p)(e.target.y())}),v&&v()}),[ye.p,_,v]),U=Object(u.useCallback)((function(e){if(_){var t=S.current,a=R.current,n=t.scaleX(),r=t.scaleY();console.log("scaleX, scaleY: ",n,r),t.scaleX(n>0?1:-1),t.scaleY(r>0?1:-1);var o=Math.abs(1!==Math.abs(Object(ye.p)(r))?r:n);_({left:Object(ye.p)(t.x()),top:Object(ye.p)(t.y()),width:Object(ye.p)(Math.max(1,t.width()*Math.abs(n))),height:Object(ye.p)(Math.max(1,t.height()*Math.abs(r))),rotation:Object(ye.p)(t.rotation())||0,flop:n>0?0:1,flip:r>0?0:1,shadowBlur:Object(ye.p)(a.shadowBlur()*o),shadowOffsetX:Object(ye.p)((f.shadowOffsetX||0)*Math.abs(n)),shadowOffsetY:Object(ye.p)((f.shadowOffsetY||0)*Math.abs(r)),paddingX:Object(ye.p)((f.paddingX||0)*Math.abs(n)),paddingY:Object(ye.p)((f.paddingY||0)*Math.abs(r))}),h&&h.length?a.cache({pixelRatio:F(a),imageSmoothingEnabled:!0}):a.clearCache()}}),[h,ye.p,F,_]);return Object(Q.jsxs)(de.e,Object(l.a)(Object(l.a)({},k),{},{ref:S,onClick:x,onTap:x,draggable:_,onDragStart:P,onDragEnd:N,onTransformEnd:U,onMouseOver:function(){return k.listening&&w&&w(!0)},onMouseOut:function(){return k.listening&&w&&w(!1)},children:[Object(Q.jsx)(de.i,{x:-d||0,y:-j||0,width:k.width+2*(d||0),height:k.height+2*(j||0),fill:c}),Object(Q.jsx)(de.f,{x:0,y:0,width:k.width,height:k.height,shadowBlur:k.shadowBlur,shadowOffsetX:k.shadowOffsetX,shadowOffsetY:k.shadowOffsetY,image:E,ref:R,red:h&&h.length?Object(ye.m)(h).r:null,green:h&&h.length?Object(ye.m)(h).g:null,blue:h&&h.length?Object(ye.m)(h).b:null,alpha:h&&h.length?Object(ye.m)(h).a/255:null,filters:M.length?M:null,perfectDrawEnabled:!1,shadowForStrokeEnabled:!1})]}))},De=a(63),Ee=function(e){var t=e.layers,a=e.setCurrentLayer,n=e.frameSize,r=e.mouseMode,o=e.boardRotate,c=e.loadedStatuses,l=e.onChange,i=e.onHover,s=e.onLoadLayer,d=e.onDragStart,b=e.onDragEnd,j=Object(u.useMemo)((function(){return O.a.orderBy(t.filter((function(e){return e.layer_type===B.e.OVERLAY})),["layer_order"],["desc"])}),[t]),h=Object(u.useCallback)((function(e){return Object(ye.i)(o,{x:e.layer_data.shadowOffsetX,y:e.layer_data.shadowOffsetY})}),[o]);return Object(Q.jsx)(Q.Fragment,{children:j.map((function(e){var t=h(e);return Object(Q.jsx)(Ie,{id:e.id,name:e.id.toString(),src:"".concat(De.a.assetsURL,"/").concat(e.layer_data.source_file),x:parseFloat(e.layer_data.left||0),y:parseFloat(e.layer_data.top||0),allowFit:!0,filterColor:e.layer_data.color,width:e.layer_data.width,height:e.layer_data.height,rotation:e.layer_data.rotation,boardRotate:o,loadedStatus:c[e.id],opacity:e.layer_data.opacity,scaleX:1===e.layer_data.flop?-1:1,scaleY:1===e.layer_data.flip?-1:1,skewX:e.layer_data.skewX,skewY:e.layer_data.skewY,bgColor:e.layer_data.bgColor,paddingX:e.layer_data.paddingX,paddingY:e.layer_data.paddingY,shadowColor:e.layer_data.shadowColor,shadowBlur:e.layer_data.shadowBlur,shadowOpacity:e.layer_data.shadowOpacity,shadowOffsetX:t.x,shadowOffsetY:t.y,onSelect:function(){return a(e)},listening:!e.layer_locked&&r===B.f.DEFAULT,frameSize:n,layer_data:e.layer_data,onChange:function(t){return l(e,t)},onHover:function(t){return i(e,t)},visible:!!e.layer_visible,onLoadLayer:s,onDragStart:d,onDragEnd:b},e.id)}))})},Te=b.a.memo(Ee),Me=function(e){var t=e.id,a=e.fontFamily,n=e.fontFile,r=e.loadedFontList,o=(e.loadedList,e.shadowColor),c=e.shadowBlur,i=e.shadowOpacity,d=e.shadowOffsetX,b=e.shadowOffsetY,j=e.onLoadLayer,h=e.onSelect,O=e.onChange,p=e.onFontLoad,f=e.onHover,y=e.onDragStart,g=e.onDragEnd,m=Object(he.a)(e,["id","fontFamily","fontFile","loadedFontList","loadedList","shadowColor","shadowBlur","shadowOpacity","shadowOffsetX","shadowOffsetY","onLoadLayer","onSelect","onChange","onFontLoad","onHover","onDragStart","onDragEnd"]),x=Object(u.useState)(null),_=Object(s.a)(x,2),w=_[0],C=_[1],v=Object(u.useRef)();Object(u.useEffect)((function(){a&&n&&(r.includes(a)?(C(a),j&&t&&j(t,!0)):k())}),[a,n]);var k=Object(u.useCallback)((function(){new FontFace(a,n).load().then((function(e){document.fonts.add(e),p(a),C(a),j&&t&&j(t,!0)})).catch((function(e){console.warn(e,a)}))}),[t,a,n,p,j,C]),L=Object(u.useCallback)((function(e){h(),y&&y()}),[h,y]),S=Object(u.useCallback)((function(e){if(O){var t=v.current;O({left:Object(ye.p)(e.target.x()),top:Object(ye.p)(e.target.y()),width:Object(ye.p)(Math.max(5,t.width())),height:Object(ye.p)(Math.max(5,t.height()))})}g&&g()}),[O,g]),R=Object(u.useCallback)((function(e){if(O){var t=v.current,a=t.scaleX(),n=t.scaleY();O({left:Object(ye.p)(t.x()),top:Object(ye.p)(t.y()),width:Object(ye.p)(Math.max(5,t.width())),height:Object(ye.p)(Math.max(5,t.height())),rotation:Object(ye.p)(t.rotation())||0,scaleX:Object(ye.p)(Math.max(.01,a)),scaleY:Object(ye.p)(Math.max(.01,n)),flop:a>0?0:1,flip:n>0?0:1})}}),[O]);return Object(Q.jsx)(de.n,Object(l.a)(Object(l.a)({},m),{},{fontFamily:w,onClick:h,onTap:h,ref:v,shadowColor:v.current?o:null,shadowBlur:v.current?c:null,shadowOpacity:v.current?i:null,shadowOffsetX:v.current?d:null,shadowOffsetY:v.current?b:null,draggable:O,onDragStart:L,onDragEnd:S,onTransformEnd:R,perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,onMouseOver:function(){return m.listening&&f&&f(!0)},onMouseOut:function(){return m.listening&&f&&f(!1)}}))},Fe=function(e){var t=e.layers,a=e.loadedFontList,n=e.loadedStatuses,r=e.fonts,o=e.frameSize,c=e.mouseMode,l=e.setCurrentLayer,i=e.boardRotate,s=e.onChange,d=e.onFontLoad,b=e.onHover,j=e.onLoadLayer,h=e.onDragStart,p=e.onDragEnd,f=Object(u.useMemo)((function(){return O.a.orderBy(t.filter((function(e){return e.layer_type===B.e.LOGO||e.layer_type===B.e.UPLOAD||e.layer_type===B.e.TEXT})),["layer_order"],["desc"])}),[t]),y=Object(u.useCallback)((function(e){return r.length?r.find((function(t){return t.id===e.layer_data.font})):{}}),[r]),g=Object(u.useCallback)((function(e){return Object(ye.i)(i,{x:e.layer_data.shadowOffsetX,y:e.layer_data.shadowOffsetY})}),[i]);return Object(Q.jsx)(Q.Fragment,{children:f.map((function(e){var t=g(e);if(e.layer_type!==B.e.TEXT)return Object(Q.jsx)(Ie,{id:e.id,name:e.id.toString(),src:"".concat(De.a.assetsURL,"/").concat(e.layer_data.source_file),loadedStatus:n[e.id],x:parseFloat(e.layer_data.left||0),y:parseFloat(e.layer_data.top||0),allowFit:!0,width:e.layer_data.width,height:e.layer_data.height,frameSize:o,rotation:e.layer_data.rotation,boardRotate:i,scaleX:1===e.layer_data.flop?-1:1,scaleY:1===e.layer_data.flip?-1:1,shadowColor:e.layer_data.shadowColor,bgColor:e.layer_data.bgColor,paddingX:e.layer_data.paddingX,paddingY:e.layer_data.paddingY,shadowBlur:e.layer_data.shadowBlur,shadowOpacity:e.layer_data.shadowOpacity,shadowOffsetX:t.x,shadowOffsetY:t.y,skewX:e.layer_data.skewX,skewY:e.layer_data.skewY,opacity:e.layer_data.opacity,layer_data:e.layer_data,onSelect:function(){return l(e)},listening:!e.layer_locked&&c===B.f.DEFAULT,onChange:function(t){return s(e,t)},onHover:function(t){return b(e,t)},visible:!!e.layer_visible,onLoadLayer:j,onDragStart:h,onDragEnd:p},e.id);var r=y(e);return Object(Q.jsx)(Me,{id:e.id,name:e.id.toString(),text:e.layer_data.text,fontFamily:r.font_name,fontFile:r.font_file?"url(".concat(De.a.assetsURL,"/").concat(r.font_file,")"):null,loadedFontList:a,loadedStatus:n[e.id],onFontLoad:d,fontSize:e.layer_data.size,fill:e.layer_data.color,strokeWidth:e.layer_data.stroke,stroke:e.layer_data.scolor,strokeEnabled:!0,x:parseFloat(e.layer_data.left||0),y:parseFloat(e.layer_data.top||0),skewX:e.layer_data.skewX,skewY:e.layer_data.skewY,offsetX:0,offsetY:0,opacity:e.layer_data.opacity,rotation:e.layer_data.rotation,scaleX:(e.layer_data.scaleX||1)*(1===e.layer_data.flop?-1:1),scaleY:(e.layer_data.scaleY||1)*(1===e.layer_data.flip?-1:1),shadowColor:e.layer_data.shadowColor,shadowBlur:e.layer_data.shadowBlur,shadowOpacity:e.layer_data.shadowOpacity,shadowOffsetX:t.x,shadowOffsetY:t.y,visible:!!e.layer_visible,onSelect:function(){return l(e)},listening:!e.layer_locked&&c===B.f.DEFAULT,onChange:function(t){return s(e,t)},onHover:function(t){return b(e,t)},onLoadLayer:j,onDragStart:h,onDragEnd:p},e.id)}))})},Be=b.a.memo(Fe),Ae=function(e){var t=e.id,a=e.type,n=e.x,r=e.y,o=e.width,c=e.height,i=e.radius,s=e.points,d=e.lineCap,b=e.lineJoin,j=e.offsetsFromStroke,h=e.pointerLength,p=e.pointerWidth,f=e.innerRadius,y=e.outerRadius,g=e.cornerRadius,m=e.numPoints,x=e.angle,_=e.shadowColor,w=e.shadowBlur,C=e.shadowOpacity,v=e.shadowOffsetX,k=e.shadowOffsetY,L=e.layer_data,S=e.onSelect,R=e.onChange,I=e.onHover,D=e.onDragStart,E=e.onDragEnd,T=e.onLoadLayer,M=Object(he.a)(e,["id","type","x","y","width","height","radius","points","lineCap","lineJoin","offsetsFromStroke","pointerLength","pointerWidth","innerRadius","outerRadius","cornerRadius","numPoints","angle","shadowColor","shadowBlur","shadowOpacity","shadowOffsetX","shadowOffsetY","layer_data","onSelect","onChange","onHover","onDragStart","onDragEnd","onLoadLayer"]),F=Object(u.useRef)(),A=Object(u.useCallback)((function(e){S(),D&&D()}),[S,D]),P=Object(u.useCallback)((function(e){if(R){var t=B.a[B.e.SHAPE][a];R(O.a.pick({left:Object(ye.p)(e.target.x()-j.x),top:Object(ye.p)(e.target.y()-j.y)},t.filter((function(e){return e.includes("layer_data.")})).map((function(e){return e.replace("layer_data.","")}))))}E&&E()}),[j,R,E]),N=Object(u.useCallback)((function(e){if(R){var t=B.a[B.e.SHAPE][a],n=F.current,r=n.scaleX(),o=n.scaleY(),c=a!==B.f.ELLIPSE?n.width():n.radiusX(),l=a!==B.f.ELLIPSE?n.height():n.radiusY(),i=Math.abs(1!==Math.abs(Object(ye.p)(o))?o:r);n.scaleX(r>0?1:-1),n.scaleY(o>0?1:-1),R(O.a.pick({left:Object(ye.p)(n.x()-j.x),top:Object(ye.p)(n.y()-j.y),width:Object(ye.p)(Math.max(1,c*Math.abs(r))-j.width),height:Object(ye.p)(Math.max(1,l*Math.abs(o))-j.height),radius:n.radius?Object(ye.p)(Math.max(1,n.radius()*Math.abs(o))-j.radius):0,innerRadius:n.innerRadius?Object(ye.p)(Math.max(1,n.innerRadius()*Math.abs(o))-j.innerRadius):0,outerRadius:n.outerRadius?Object(ye.p)(Math.max(1,n.outerRadius()*Math.abs(o))-j.outerRadius):0,rotation:Object(ye.p)(n.rotation())||0,flop:r>0?0:1,flip:o>0?0:1,stroke:Object(ye.p)(n.strokeWidth()*i),shadowBlur:Object(ye.p)(n.shadowBlur()*i),shadowOffsetX:Object(ye.p)(L.shadowOffsetX*Math.abs(r)),shadowOffsetY:Object(ye.p)(L.shadowOffsetY*Math.abs(o)),cornerTopLeft:Object(ye.p)(L.cornerTopLeft*i),cornerTopRight:Object(ye.p)(L.cornerTopRight*i),cornerBottomLeft:Object(ye.p)(L.cornerBottomLeft*i),cornerBottomRight:Object(ye.p)(L.cornerBottomRight*i),points:s.map((function(e,t){return t%2===0?Object(ye.p)(e*Math.abs(r)):Object(ye.p)(e*Math.abs(o))}))},t.filter((function(e){return e.includes("layer_data.")})).map((function(e){return e.replace("layer_data.","")}))))}}),[a,j,L,s,R]);return Object(u.useEffect)((function(){T&&t&&T(t,!0)}),[]),Object(Q.jsx)(Q.Fragment,{children:a===B.f.RECT?Object(Q.jsx)(de.i,Object(l.a)(Object(l.a)({},M),{},{ref:F,shadowColor:F.current?_:null,shadowBlur:F.current?w:null,shadowOpacity:F.current?C:null,shadowOffsetX:F.current?v:null,shadowOffsetY:F.current?k:null,cornerRadius:g,x:n,y:r,width:o,height:c,draggable:R,onClick:S,onDragStart:A,onDragEnd:P,onTransformEnd:N,shadowForStrokeEnabled:!1,onMouseOver:function(){return M.listening&&I&&I(!0)},onMouseOut:function(){return M.listening&&I&&I(!1)}})):a===B.f.CIRCLE?Object(Q.jsx)(de.c,Object(l.a)(Object(l.a)({},M),{},{ref:F,x:n,y:r,radius:i,shadowColor:F.current?_:null,shadowBlur:F.current?w:null,shadowOpacity:F.current?C:null,shadowOffsetX:F.current?v:null,shadowOffsetY:F.current?k:null,draggable:R,onClick:S,onDragStart:A,onDragEnd:P,onTransformEnd:N,shadowForStrokeEnabled:!1,onMouseOver:function(){return M.listening&&I&&I(!0)},onMouseOut:function(){return M.listening&&I&&I(!1)}})):a===B.f.ELLIPSE?Object(Q.jsx)(de.d,Object(l.a)(Object(l.a)({},M),{},{ref:F,x:n,y:r,radiusX:o,radiusY:c,shadowColor:F.current?_:null,shadowBlur:F.current?w:null,shadowOpacity:F.current?C:null,shadowOffsetX:F.current?v:null,shadowOffsetY:F.current?k:null,draggable:R,onClick:S,onDragStart:A,onDragEnd:P,onTransformEnd:N,shadowForStrokeEnabled:!1,onMouseOver:function(){return M.listening&&I&&I(!0)},onMouseOut:function(){return M.listening&&I&&I(!1)}})):a===B.f.STAR?Object(Q.jsx)(de.m,Object(l.a)(Object(l.a)({},M),{},{ref:F,x:n,y:r,innerRadius:f,outerRadius:y,numPoints:m,shadowColor:F.current?_:null,shadowBlur:F.current?w:null,shadowOpacity:F.current?C:null,shadowOffsetX:F.current?v:null,shadowOffsetY:F.current?k:null,draggable:R,onClick:S,onDragStart:A,onDragEnd:P,onTransformEnd:N,shadowForStrokeEnabled:!1,onMouseOver:function(){return M.listening&&I&&I(!0)},onMouseOut:function(){return M.listening&&I&&I(!1)}})):a===B.f.RING?Object(Q.jsx)(de.k,Object(l.a)(Object(l.a)({},M),{},{ref:F,x:n,y:r,innerRadius:f,outerRadius:y,shadowColor:F.current?_:null,shadowBlur:F.current?w:null,shadowOpacity:F.current?C:null,shadowOffsetX:F.current?v:null,shadowOffsetY:F.current?k:null,draggable:R,onClick:S,onDragStart:A,onDragEnd:P,onTransformEnd:N,shadowForStrokeEnabled:!1,onMouseOver:function(){return M.listening&&I&&I(!0)},onMouseOut:function(){return M.listening&&I&&I(!1)}})):a===B.f.REGULARPOLYGON?Object(Q.jsx)(de.j,Object(l.a)(Object(l.a)({},M),{},{ref:F,x:n,y:r,radius:i,sides:m,shadowColor:F.current?_:null,shadowBlur:F.current?w:null,shadowOpacity:F.current?C:null,shadowOffsetX:F.current?v:null,shadowOffsetY:F.current?k:null,draggable:R,onClick:S,onDragStart:A,onDragEnd:P,onTransformEnd:N,shadowForStrokeEnabled:!1,onMouseOver:function(){return M.listening&&I&&I(!0)},onMouseOut:function(){return M.listening&&I&&I(!1)}})):a===B.f.WEDGE?Object(Q.jsx)(de.p,Object(l.a)(Object(l.a)({},M),{},{ref:F,x:n,y:r,radius:i,angle:x,shadowColor:F.current?_:null,shadowBlur:F.current?w:null,shadowOpacity:F.current?C:null,shadowOffsetX:F.current?v:null,shadowOffsetY:F.current?k:null,draggable:R,onClick:S,onDragStart:A,onDragEnd:P,onTransformEnd:N,shadowForStrokeEnabled:!1,onMouseOver:function(){return M.listening&&I&&I(!0)},onMouseOut:function(){return M.listening&&I&&I(!1)}})):a===B.f.ARC?Object(Q.jsx)(de.a,Object(l.a)(Object(l.a)({},M),{},{ref:F,x:n,y:r,innerRadius:f,outerRadius:y,angle:x,shadowColor:F.current?_:null,shadowBlur:F.current?w:null,shadowOpacity:F.current?C:null,shadowOffsetX:F.current?v:null,shadowOffsetY:F.current?k:null,draggable:R,onClick:S,onDragStart:A,onDragEnd:P,onTransformEnd:N,shadowForStrokeEnabled:!1,onMouseOver:function(){return M.listening&&I&&I(!0)},onMouseOut:function(){return M.listening&&I&&I(!1)}})):a===B.f.LINE||a===B.f.PEN?Object(Q.jsx)(de.h,Object(l.a)(Object(l.a)({},M),{},{ref:F,x:n,y:r,points:s,lineCap:d,lineJoin:b,shadowColor:F.current?_:null,shadowBlur:F.current?w:null,shadowOpacity:F.current?C:null,shadowOffsetX:F.current?v:null,shadowOffsetY:F.current?k:null,draggable:R,onClick:S,onDragStart:A,onDragEnd:P,onTransformEnd:N,onMouseOver:function(){return M.listening&&I&&I(!0)},onMouseOut:function(){return M.listening&&I&&I(!1)}})):a===B.f.POLYGON?Object(Q.jsx)(de.h,Object(l.a)(Object(l.a)({},M),{},{ref:F,x:n,y:r,points:s,lineCap:d,lineJoin:b,shadowColor:F.current?_:null,shadowBlur:F.current?w:null,shadowOpacity:F.current?C:null,shadowOffsetX:F.current?v:null,shadowOffsetY:F.current?k:null,draggable:R,closed:!0,onClick:S,onDragStart:A,onDragEnd:P,onTransformEnd:N,onMouseOver:function(){return M.listening&&I&&I(!0)},onMouseOut:function(){return M.listening&&I&&I(!1)}})):a===B.f.ARROW?Object(Q.jsx)(de.b,Object(l.a)(Object(l.a)({},M),{},{ref:F,x:n,y:r,points:s,lineCap:d,lineJoin:b,pointerLength:h,pointerWidth:p,shadowColor:F.current?_:null,shadowBlur:F.current?w:null,shadowOpacity:F.current?C:null,shadowOffsetX:F.current?v:null,shadowOffsetY:F.current?k:null,draggable:R,onClick:S,onDragStart:A,onDragEnd:P,onTransformEnd:N,onMouseOver:function(){return M.listening&&I&&I(!0)},onMouseOut:function(){return M.listening&&I&&I(!1)}})):Object(Q.jsx)(Q.Fragment,{})})},Pe=function(e){var t=e.layers,a=e.drawingLayer,n=e.setCurrentLayer,r=e.boardRotate,o=e.mouseMode,c=e.loadedStatuses,l=e.onChange,i=e.onHover,s=e.onLoadLayer,d=e.onDragStart,b=e.onDragEnd,j=Object(u.useMemo)((function(){return O.a.orderBy(t.filter((function(e){return e.layer_type===B.e.SHAPE})),["layer_order"],["desc"])}),[t]),h=Object(u.useCallback)((function(e){return Object(ye.i)(r,{x:e.layer_data.shadowOffsetX,y:e.layer_data.shadowOffsetY})}),[r]),p=Object(u.useCallback)((function(e){return"inside"===e.layer_data.strokeType?{x:[B.f.RECT,B.f.ELLIPSE].includes(e.layer_type)?e.layer_data.stroke/2:0,y:[B.f.RECT,B.f.ELLIPSE].includes(e.layer_type)?e.layer_data.stroke/2:0,height:-e.layer_data.stroke/2,width:-e.layer_data.stroke/2,radius:-e.layer_data.stroke/2,pointerLength:-e.layer_data.stroke/2,pointerWidth:-e.layer_data.stroke/2,innerRadius:e.layer_data.stroke/2,outerRadius:-e.layer_data.stroke/2}:"outside"===e.layer_data.strokeType?{x:[B.f.RECT,B.f.ELLIPSE].includes(e.layer_type)?-e.layer_data.stroke/2:0,y:[B.f.RECT,B.f.ELLIPSE].includes(e.layer_type)?-e.layer_data.stroke/2:0,height:e.layer_data.stroke/2,width:e.layer_data.stroke/2,radius:e.layer_data.stroke/2,pointerLength:e.layer_data.stroke/2,pointerWidth:e.layer_data.stroke/2,innerRadius:-e.layer_data.stroke/2,outerRadius:e.layer_data.stroke/2}:{x:0,y:0,height:0,width:0,radius:0,pointerLength:0,pointerWidth:0,innerRadius:0,outerRadius:0}}),[]);return Object(Q.jsxs)(Q.Fragment,{children:[j.map((function(e){var t=h(e),a=p(e);return Object(Q.jsx)(Ae,{id:e.id,type:e.layer_data.type,x:parseFloat(e.layer_data.left+a.x||0),y:parseFloat(e.layer_data.top+a.y||0),width:Math.abs(e.layer_data.width+a.width),height:Math.abs(e.layer_data.height+a.height),radius:Math.abs(e.layer_data.radius+a.radius),offsetsFromStroke:a,points:e.layer_data.points?Object(ye.t)(e.layer_data.points):[],loadedStatus:c[e.id],pointerLength:Math.abs(e.layer_data.pointerLength+a.pointerLength),pointerWidth:Math.abs(e.layer_data.pointerWidth+a.pointerWidth),lineCap:e.layer_data.lineCap,lineJoin:e.layer_data.lineJoin,innerRadius:Math.abs(e.layer_data.innerRadius+a.innerRadius),outerRadius:Math.abs(e.layer_data.outerRadius+a.outerRadius),numPoints:e.layer_data.numPoints,cornerRadius:[e.layer_data.cornerTopLeft,e.layer_data.cornerTopRight,e.layer_data.cornerBottomLeft,e.layer_data.cornerBottomRight],rotation:e.layer_data.rotation,angle:e.layer_data.angle,opacity:e.layer_data.opacity,scaleX:1===e.layer_data.flop?-1:1,scaleY:1===e.layer_data.flip?-1:1,shadowColor:e.layer_data.shadowColor,shadowBlur:e.layer_data.shadowBlur,shadowOpacity:e.layer_data.shadowOpacity,shadowOffsetX:t.x,shadowOffsetY:t.y,skewX:e.layer_data.skewX,skewY:e.layer_data.skewY,fill:e.layer_data.color,strokeWidth:e.layer_data.stroke,stroke:e.layer_data.scolor,strokeEnabled:!0,globalCompositeOperation:"normal"===e.layer_data.blendType?null:e.layer_data.blendType,name:e.id.toString(),visible:!!e.layer_visible,layer_data:e.layer_data,perfectDrawEnabled:!1,onSelect:function(){return n(e)},listening:!e.layer_locked&&o===B.f.DEFAULT,onChange:function(t){return l(e,t)},onHover:function(t){return i(e,t)},onLoadLayer:s,onDragStart:d,onDragEnd:b},e.id)})),a?Object(Q.jsx)(Ae,{type:a.layer_data.type,x:parseFloat(a.layer_data.left||0),y:parseFloat(a.layer_data.top||0),width:a.layer_data.width,height:a.layer_data.height,radius:Math.abs(a.layer_data.radius),angle:a.layer_data.angle,points:a.layer_data.points?Object(ye.t)(a.layer_data.points):[],pointerLength:a.layer_data.pointerLength,pointerWidth:a.layer_data.pointerWidth,lineCap:a.layer_data.lineCap,lineJoin:a.layer_data.lineJoin,innerRadius:Math.abs(a.layer_data.innerRadius),outerRadius:Math.abs(a.layer_data.outerRadius),numPoints:a.layer_data.numPoints,fill:a.layer_data.color,strokeWidth:a.layer_data.stroke,stroke:a.layer_data.scolor,strokeEnabled:!0,layer_data:a.layer_data,perfectDrawEnabled:!1}):Object(Q.jsx)(Q.Fragment,{})]})},Ne=b.a.memo(Pe),Ue=function(e){var t=e.trRef,a=e.selectedLayer,n=e.pressedKey,r=e.hoveredTransform,o=Object(u.useMemo)((function(){return a&&(a.layer_data.sizeLocked||a.layer_data.scaleLocked||[B.f.CIRCLE,B.f.STAR,B.f.RING,B.f.REGULARPOLYGON,B.f.WEDGE,B.f.ARC].includes(a.layer_data.type)||"shift"===n)}),[a,n]),c=Object(u.useCallback)((function(){if(a){var e=t.current.getStage().findOne("."+a.id);if(e===t.current.node())return;e?t.current.nodes([e]):t.current.detach(),t.current.getLayer().batchDraw()}}),[a]);Object(u.useEffect)((function(){c()}),[c]);var l=Object(u.useCallback)((function(e,t){var a=Object(ye.j)(t.rotation)-e.rotation;return"shift"===n?t.rotation-e.rotation===0?t:Math.abs(a)>0?Object(ye.u)(e,a):e:t}),[n,ye.j,ye.u]);return a?Object(Q.jsx)(de.o,{id:"defaultTransformer",ref:t,keepRatio:o,enabledAnchors:r||"h"===n?[]:o?["top-left","top-right","bottom-left","bottom-right"]:["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],borderEnabled:"h"!==n,rotateEnabled:!r&&"h"!==n,boundBoxFunc:l,borderStroke:r?"red":null}):Object(Q.jsx)(Q.Fragment,{})},Ye=a(202),Xe=a(45),We=Object(d.c)(Y.a).withConfig({displayName:"Board__IconButton",componentId:"sc-13eabpa-0"})(N.b),Ge=Object(d.c)(We).withConfig({displayName:"Board__RotationButton",componentId:"sc-13eabpa-1"})(["background:black;border-radius:0;&:hover{background:#444;}"]),ze=function(e){var t,a=e.hoveredLayerJSON,n=e.onChangeHoverJSONItem,r=e.onChangeBoardRotation,o=e.stageRef,d=e.baseLayerRef,b=e.mainLayerRef,j=e.carMaskLayerRef,h=e.activeTransformerRef,O=e.hoveredTransformerRef,f=Object(u.useState)({}),y=Object(s.a)(f,2),g=y[0],m=y[1],x=Object(u.useRef)(null),_=Object(u.useRef)(0),w=Object(u.useRef)(0),C=Object(u.useState)(0),v=Object(s.a)(C,2),k=v[0],L=v[1],S=Object(u.useState)([]),R=Object(s.a)(S,2),I=R[0],D=R[1],E=Object(p.d)(),T=Object(ue.a)(),M=T.width,N=T.height,U=T.ref,Y=Object(p.e)((function(e){return e.boardReducer.frameSize})),X=Object(p.e)((function(e){return e.boardReducer.zoom})),W=Object(p.e)((function(e){return e.boardReducer.paintingGuides})),G=Object(p.e)((function(e){return e.boardReducer.pressedKey})),z=Object(p.e)((function(e){return e.boardReducer.boardRotate})),H=Object(p.e)((function(e){return e.boardReducer.mouseMode})),K=Object(p.e)((function(e){return e.carMakeReducer.current})),Z=Object(p.e)((function(e){return e.schemeReducer.current})),J=Object(p.e)((function(e){return e.schemeReducer.saving})),q=Object(p.e)((function(e){return e.schemeReducer.loaded})),$=Object(p.e)((function(e){return e.fontReducer.list})),ee=Object(p.e)((function(e){return e.fontReducer.loadedList})),te=Object(p.e)((function(e){return e.layerReducer.list})),ae=Object(p.e)((function(e){return e.layerReducer.current})),ne=Object(p.e)((function(e){return e.layerReducer.loadedStatuses})),re=Object(p.e)((function(e){return e.layerReducer.drawingStatus}));Object(u.useEffect)((function(){switch(re){case Xe.a.ADD_TO_SHAPE:if(x.current){var e=Object(l.a)(Object(l.a)({},x.current),{},{layer_data:Object(l.a)(Object(l.a)({},x.current.layer_data),{},{points:Object(ye.t)(x.current.layer_data.points)})});E(Object(Xe.g)(Z.id,e)),E(Object(P.h)(B.f.DEFAULT))}break;case Xe.a.CLEAR_COMMAND:x.current=null,E(Object(Xe.o)(null))}}),[re]),se()((function(){H!==B.f.DEFAULT&&L(k+1)}),50*(Math.min(w.current-_.current>4?w.current-_.current:(w.current-_.current)/2,20)||1)),se()((function(){H!==B.f.DEFAULT&&(w.current=w.current+1)}),5);var oe=Object(u.useCallback)((function(e){H===B.f.DEFAULT&&(e.target===e.target.getStage()&&ae&&E(Object(Xe.n)(null)))}),[E,H,ae]),ce=Object(u.useCallback)((function(e){if(H!==B.f.DEFAULT){var t=Object(ye.h)(o.current);if(x.current){if([B.f.LINE,B.f.ARROW,B.f.POLYGON].includes(H)){var a=Object(l.a)(Object(l.a)({},x.current),{},{layer_data:Object(l.a)(Object(l.a)({},x.current.layer_data),{},{points:Object(ye.t)(x.current.layer_data.points)})});a.layer_data.points=a.layer_data.points.concat([t.x-x.current.layer_data.left,t.y-x.current.layer_data.top,t.x-x.current.layer_data.left,t.y-x.current.layer_data.top]),x.current=a}}else{var n=Object(l.a)(Object(l.a)({},B.b),{},{layer_type:B.e.SHAPE,layer_data:Object(l.a)(Object(l.a)({},B.b.layer_data),{},{type:H,name:H,left:t.x,top:t.y,color:Z.guide_data.default_shape_color||"#000000",opacity:Z.guide_data.default_shape_opacity||1,scolor:Z.guide_data.default_shape_scolor||"#000000",stroke:Z.guide_data.default_shape_stroke||0})});[B.f.LINE,B.f.ARROW,B.f.POLYGON].includes(H)&&(n.layer_data.stroke=5,n.layer_data.points=[0,0,0,0]),H===B.f.PEN&&(n.layer_data.stroke=5,n.layer_data.points=[0,0]),x.current=n}}}),[H,Z.guide_data,ye.h,x.current,o.current]),le=Object(u.useCallback)((function(){if(H!==B.f.DEFAULT&&x.current){var e=Object(ye.h)(o.current),t=e.x-x.current.layer_data.left,a=e.y-x.current.layer_data.top,n=e.x-x.current.layer_data.left,r=e.y-x.current.layer_data.top;if((x.current.layer_data.points.length<2||n!==x.current.layer_data.points[x.current.layer_data.points.length-2]||r!==x.current.layer_data.points[x.current.layer_data.points.length-1])&&(w.current-_.current>1||x.current.layer_data.points.length<2||Math.abs(n-x.current.layer_data.points[x.current.layer_data.points.length-2])>10||Math.abs(r-x.current.layer_data.points[x.current.layer_data.points.length-1])>10)){var i=Object(l.a)(Object(l.a)({},x.current),{},{layer_data:Object(l.a)(Object(l.a)({},x.current.layer_data),{},{points:Object(c.a)(x.current.layer_data.points),width:B.f.ELLIPSE!==x.current.layer_type&&t>0?t:0,height:B.f.ELLIPSE!==x.current.layer_type&&a>0?a:0,radius:Math.abs(t),innerRadius:Math.abs(t)/2.5,outerRadius:Math.abs(t)})});[B.f.LINE,B.f.ARROW,B.f.POLYGON].includes(H)&&i.layer_data.points.splice(-2,2,n,r),H===B.f.PEN&&(i.layer_data.points.push(n),i.layer_data.points.push(r)),x.current=i}_.current=w.current}}),[H,x.current,ye.h,o.current,w.current]),ie=Object(u.useCallback)((function(e){[B.f.DEFAULT,B.f.LINE,B.f.ARROW,B.f.POLYGON].includes(H)||E(Object(Xe.o)(Xe.a.ADD_TO_SHAPE));var t=Object(ye.h)(o.current);m(t)}),[E,H,ye.h,m]),he=Object(u.useCallback)((function(e){var t=Object(ye.h)(o.current);[B.f.DEFAULT,B.f.LINE,B.f.ARROW,B.f.POLYGON].includes(H)&&x.current&&g.x===t.x&&g.y===t.y&&E(Object(Xe.o)(Xe.a.ADD_TO_SHAPE))}),[E,H,ye.h,x.current,g]),Oe=Object(u.useCallback)((function(e){if(e.evt.preventDefault(),null!==o.current&&e.evt.ctrlKey){var t=o.current,a=t.scaleX(),n=t.getPointerPosition(),r=n.x,c=n.y,l={x:(r-t.x())/a,y:(c-t.y())/a},i=Math.max(Math.min(e.evt.deltaY>0?a/1.2:1.2*a,10),.25);E(Object(P.k)(i));var s={x:r-l.x*i,y:c-l.y*i};t.position(s),t.batchDraw()}}),[E,o.current]),pe=Object(u.useCallback)((function(e){(Y.width<e.width||Y.height<e.height)&&E(Object(P.g)({width:Math.max(Y.width,e.width),height:Math.max(Y.height,e.height)}))}),[E,Y]),fe=Object(u.useCallback)((function(e,t){E(Object(Xe.s)(Object(l.a)(Object(l.a)({},e),{},{layer_data:Object(l.a)(Object(l.a)({},e.layer_data),t)})))}),[E]),ge=Object(u.useCallback)((function(e){E(Object(Xe.n)(e))}),[E]),me=Object(u.useCallback)((function(e,t){n(e.id,t)}),[n]),_e=Object(u.useCallback)((function(e){E(Object(Ye.c)(e))}),[E]),Ce=Object(u.useCallback)((function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?(e=z+90)>=360&&(e=0):(e=z-90)<0&&(e=270),r(e)}),[z,r]),ke=Object(u.useCallback)((function(e,t){E(Object(Xe.q)({key:e,value:t}))}),[E]),Se=Object(u.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e){if(!I.length){D(Object(c.a)(W));var t=Object(c.a)(W);Z.guide_data.show_wireframe&&!t.includes(B.g.WIREFRAME)&&t.push(B.g.WIREFRAME),Z.guide_data.show_numberBlocks&&!t.includes(B.g.NUMBERBLOCKS)&&t.push(B.g.NUMBERBLOCKS),Z.guide_data.show_sponsor&&!t.includes(B.g.SPONSORBLOCKS)&&t.push(B.g.SPONSORBLOCKS),Z.guide_data.show_grid&&!t.includes(B.g.GRID)&&t.push(B.g.GRID),E(Object(P.i)(t))}}else E(Object(P.i)(Object(c.a)(I))),D([])}),[E,W,I,D,Z]),Ie=Object(u.useCallback)((function(){(Z.guide_data.show_wireframe||Z.guide_data.show_numberBlocks||Z.guide_data.show_sponsor||Z.guide_data.show_grid)&&Se(!0)}),[Se,Z]),De=Object(u.useCallback)((function(){(Z.guide_data.show_wireframe||Z.guide_data.show_numberBlocks||Z.guide_data.show_sponsor||Z.guide_data.show_grid)&&Se(!1)}),[Se,Z]);return Object(Q.jsxs)(F.a,(t={width:"100%",height:"100%",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",margin:"auto",position:"relative",id:"board-wrapper"},Object(i.a)(t,"position","relative"),Object(i.a)(t,"ref",U),Object(i.a)(t,"children",[Object(Q.jsxs)(de.l,{width:M,height:N,onMousedown:oe,onContentMousedown:ce,onContentMousemove:le,onContentMouseup:ie,onDblClick:he,onTouchStart:oe,onWheel:Oe,scaleX:X||1,scaleY:X||1,rotation:z,x:M/2,y:N/2,offsetX:Y.width/2,offsetY:Y.height/2,ref:o,draggable:H===B.f.DEFAULT,style:{cursor:H===B.f.DEFAULT?"default":"crosshair"},children:[Object(Q.jsxs)(de.g,{ref:d,listening:!1,children:[Object(Q.jsx)(de.i,{x:0,y:0,width:Y.width,height:Y.height,fill:"transparent"===Z.base_color?Z.base_color:"#"+Z.base_color,listening:!1}),Object(Q.jsx)(Re,{legacyMode:Z.legacy_mode,carMake:K,layers:te,loadedStatuses:ne,handleImageSize:pe,onLoadLayer:ke})]}),Object(Q.jsx)(de.g,{listening:!1,children:Object(Q.jsx)(ve,{legacyMode:Z.legacy_mode,carMake:K,paintingGuides:W,guideData:Z.guide_data,loadedStatuses:ne,handleImageSize:pe,onLoadLayer:ke})}),Object(Q.jsxs)(de.g,{ref:b,children:[Z.guide_data.show_carparts_on_top?Object(Q.jsx)(Q.Fragment,{}):Object(Q.jsx)(Le,{layers:te,legacyMode:Z.legacy_mode,carMake:K,loadedStatuses:ne,handleImageSize:pe,onLoadLayer:ke}),Object(Q.jsx)(Te,{layers:te,frameSize:Y,boardRotate:z,currentLayer:ae,mouseMode:H,loadedStatuses:ne,handleImageSize:pe,setCurrentLayer:ge,onChange:fe,onHover:me,onLoadLayer:ke,onDragStart:Ie,onDragEnd:De}),Object(Q.jsx)(Ne,{layers:te,drawingLayer:x.current,boardRotate:z,mouseMode:H,currentLayer:ae,loadedStatuses:ne,setCurrentLayer:ge,onChange:fe,onHover:me,onLoadLayer:ke,onDragStart:Ie,onDragEnd:De}),Object(Q.jsx)(Be,{layers:te,fonts:$,loadedFontList:ee,frameSize:Y,mouseMode:H,boardRotate:z,loadedStatuses:ne,currentLayer:ae,setCurrentLayer:ge,onChange:fe,onFontLoad:_e,onHover:me,onLoadLayer:ke,onDragStart:Ie,onDragEnd:De}),Z.guide_data.show_carparts_on_top?Object(Q.jsx)(Le,{layers:te,legacyMode:Z.legacy_mode,carMake:K,loadedStatuses:ne,handleImageSize:pe,onLoadLayer:ke}):Object(Q.jsx)(Q.Fragment,{})]}),Object(Q.jsx)(de.g,{ref:j,listening:!1,children:Object(Q.jsx)(we,{legacyMode:Z.legacy_mode,carMake:K,paintingGuides:W,loadedStatuses:ne,guideData:Z.guide_data,handleImageSize:pe,onLoadLayer:ke})}),Object(Q.jsxs)(de.g,{children:[Object(Q.jsx)(xe,{legacyMode:Z.legacy_mode,carMake:K,paintingGuides:W,loadedStatuses:ne,frameSize:Y,guideData:Z.guide_data,handleImageSize:pe,onLoadLayer:ke}),Object(Q.jsx)(Ue,{trRef:h,selectedLayer:ae,pressedKey:G}),!a||ae&&a[ae.id]?Object(Q.jsx)(Q.Fragment,{}):Object(Q.jsx)(Ue,{trRef:O,selectedLayer:te.find((function(e){return a[e.id]})),hoveredTransform:!0})]})]}),Object(Q.jsxs)(F.a,{position:"absolute",right:0,top:0,children:[Object(Q.jsx)(V.a,{title:"Rotate Left",position:"bottom",arrow:!0,children:Object(Q.jsx)(Ge,{onClick:function(){return Ce(!1)},children:Object(Q.jsx)(be.a,{})})}),Object(Q.jsx)(V.a,{title:"Rotate Right",position:"bottom",arrow:!0,children:Object(Q.jsx)(Ge,{onClick:function(){return Ce(!0)},children:Object(Q.jsx)(je.a,{})})})]}),J||!q?Object(Q.jsx)(F.a,{width:"100%",height:"100%",bgcolor:"#282828",position:"absolute",left:"0",top:"0",display:"flex",justifyContent:"center",alignItems:"center",children:Object(Q.jsx)(A.a,{})}):Object(Q.jsx)(Q.Fragment,{})]),t))},He=a(64),Ke=a(487),Ve=a(613),Ze=a(1187),Je=a(1188),qe=a(1189),Qe=a(651),$e=a(200),et=a(585),tt=a(566),at=a(1185),nt=a(385),rt=a(489),ot=a(1216),ct=a(1176),lt=Object(d.c)(U.a).withConfig({displayName:"SliderInput__Typography",componentId:"sc-7loe1z-0"})(N.b),it=Object(d.c)(nt.a).withConfig({displayName:"SliderInput__CustomInput",componentId:"sc-7loe1z-1"})([".MuiInputBase-inputMarginDense{padding-top:4px;padding-bottom:5px;width:50px;}"]),st=Object(d.c)(F.a).withConfig({displayName:"SliderInput__SliderWrapper",componentId:"sc-7loe1z-2"})(["width:80px;margin-left:8px;margin-right:8px;height:28px;"]),dt=Object(d.c)(rt.a).withConfig({displayName:"SliderInput__Wrapper",componentId:"sc-7loe1z-3"})(["height:100%;align-items:center;"]),ut=function(e){var t=e.label,a=e.min,n=e.max,r=e.value,o=e.setValue,c=e.step,l=Object(u.useCallback)((function(){r<a?o(a):r>n&&o(n)}),[r,a,n,o]);return Object(Q.jsxs)(dt,{container:!0,children:[Object(Q.jsx)(rt.a,{item:!0,xs:6,children:Object(Q.jsx)(lt,{variant:"body1",color:"textSecondary",mr:2,children:t})}),Object(Q.jsx)(rt.a,{item:!0,xs:6,children:Object(Q.jsxs)(F.a,{display:"flex",alignItems:"center",children:[Object(Q.jsx)(st,{children:Object(Q.jsx)(ot.a,{min:a,max:n,step:c,value:r,onChange:function(e,t){return o(t)},"aria-labelledby":"shape-size",ValueLabelComponent:function(e){return Object(Q.jsx)(ct.a,{open:e.open,enterTouchDelay:0,placement:"top",title:e.value,children:e.children})}})}),Object(Q.jsx)(it,{value:r,margin:"dense",type:"number",step:c||1,onChange:function(e){return o(""===e.target.value?Math.max(a,0):Number(e.target.value))},onBlur:l,inputProps:{min:a,max:n,"aria-labelledby":"input-slider"}})]})})]})},bt=a(1139),jt=Object(d.c)(Ke.a).withConfig({displayName:"ColorPickerInput__ColorInputField",componentId:"sc-98haji-0"})(["width:80px;"]),ht=function(e){var t=e.value,a=e.onChange,n=e.onInputChange,r=e.error,o=e.helperText,c=Object(u.useCallback)((function(e){"Enter"===e.key&&a(e.target.value)}),[a]);return Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(Q.jsxs)(F.a,{display:"flex",alignItems:"center",children:[Object(Q.jsx)(bt.a,{value:t||"",onChange:function(e){return a(e.css.backgroundColor)},palette:B.h,deferred:!0,hideTextfield:!0}),Object(Q.jsx)(jt,{value:t||"",onChange:function(e){return n(e.target.value)},onKeyDown:c})]}),r?Object(Q.jsx)(U.a,{color:"secondary",variant:"body2",children:o}):Object(Q.jsx)(Q.Fragment,{})]})},Ot=Object(d.c)($e.c).withConfig({displayName:"styles__CustomAccordionSummary",componentId:"sc-1ux302c-0"})(["background:#3f3f3f;border-radius:5px;"]),pt=function(e){var t=e.label,a=e.colorKey,n=e.opacityKey,r=e.errors,o=(e.handleBlur,e.handleChange,e.setFieldValue),c=(e.touched,e.values),l=e.extraChildren,i=Object(u.useState)(!0),d=Object(s.a)(i,2),b=d[0],j=d[1];return Object(Q.jsxs)($e.a,{expanded:b,onChange:function(){return j(!b)},children:[Object(Q.jsx)(Ot,{expandIcon:Object(Q.jsx)(at.a,{}),children:Object(Q.jsx)($e.y,{children:t})}),Object(Q.jsx)($e.b,{children:Object(Q.jsxs)($e.f,{display:"flex",flexDirection:"column",width:"100%",mb:1,children:[Object(Q.jsxs)($e.p,{container:!0,spacing:2,children:[a?Object(Q.jsx)($e.p,{item:!0,xs:12,sm:6,children:Object(Q.jsxs)($e.f,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[Object(Q.jsx)($e.y,{variant:"body1",color:"textSecondary",mr:2,children:"Color"}),Object(Q.jsx)(ht,{value:c[a],onChange:function(e){return o(a,e)},onInputChange:function(e){return o(a,e)},error:Boolean(r[a]),helperText:r[a]})]})}):Object(Q.jsx)(Q.Fragment,{}),n?Object(Q.jsx)($e.p,{item:!0,xs:12,sm:6,children:Object(Q.jsx)(ut,{label:"Opacity",min:0,max:1,step:.01,value:c[n],setValue:function(e){return o(n,e)}})}):Object(Q.jsx)(Q.Fragment,{})]}),l]})})]})},ft=Object(d.c)($e.n).withConfig({displayName:"styles__CustomFormControlLabel",componentId:"o9v8c6-0"})(["margin-left:0;color:rgba(255,255,255,0.5);"]),yt=Object(d.c)($e.k).withConfig({displayName:"styles__CustomDialogContent",componentId:"o9v8c6-1"})(["padding-right:0;"]),gt=b.a.memo((function(e){var t=e.onCancel,a=Object(he.a)(e,["onCancel"]);return Object(Q.jsxs)(tt.a,{onSubmit:a.handleSubmit,noValidate:!0,children:[Object(Q.jsx)(yt,{dividers:!0,id:"insert-text-dialog-content",children:Object(Q.jsxs)($e.f,{maxHeight:"70vh",pr:5,overflow:"auto",children:[Object(Q.jsx)(pt,Object(l.a)({label:"Car Mask",colorKey:"carmask_color",opacityKey:"carmask_opacity"},a)),Object(Q.jsx)(pt,Object(l.a)(Object(l.a)({label:"Wireframe",colorKey:"wireframe_color",opacityKey:"wireframe_opacity"},a),{},{extraChildren:Object(Q.jsx)($e.p,{container:!0,spacing:2,children:Object(Q.jsx)($e.p,{item:!0,xs:12,sm:12,children:Object(Q.jsx)(ft,{control:Object(Q.jsx)($e.h,{color:"primary",name:"show_wireframe",checked:a.values.show_wireframe,onChange:function(e){return a.setFieldValue("show_wireframe",e.target.checked)}}),label:"Show Wireframe for Repositioning",labelPlacement:"start"})})})})),Object(Q.jsx)(pt,Object(l.a)(Object(l.a)({label:"Sponsor Blocks",colorKey:"sponsor_color",opacityKey:"sponsor_opacity"},a),{},{extraChildren:Object(Q.jsx)($e.p,{container:!0,spacing:2,children:Object(Q.jsx)($e.p,{item:!0,xs:12,sm:12,children:Object(Q.jsx)(ft,{control:Object(Q.jsx)($e.h,{color:"primary",name:"show_sponsor",checked:a.values.show_sponsor,onChange:function(e){return a.setFieldValue("show_sponsor",e.target.checked)}}),label:"Show Sponsor Blocks for Repositioning",labelPlacement:"start"})})})})),Object(Q.jsx)(pt,Object(l.a)(Object(l.a)({label:"Number Blocks",colorKey:"numberblock_color",opacityKey:"numberblock_opacity"},a),{},{extraChildren:Object(Q.jsx)($e.p,{container:!0,spacing:2,children:Object(Q.jsx)($e.p,{item:!0,xs:12,sm:12,children:Object(Q.jsx)(ft,{control:Object(Q.jsx)($e.h,{color:"primary",name:"show_numberBlocks",checked:a.values.show_numberBlocks,onChange:function(e){return a.setFieldValue("show_numberBlocks",e.target.checked)}}),label:"Show Number Blocks for Repositioning",labelPlacement:"start"})})})})),Object(Q.jsx)(pt,Object(l.a)(Object(l.a)({label:"Grid",colorKey:"grid_color",opacityKey:"grid_opacity"},a),{},{extraChildren:Object(Q.jsxs)($e.p,{container:!0,spacing:2,children:[Object(Q.jsx)($e.p,{item:!0,xs:12,sm:6,children:Object(Q.jsx)(ut,{label:"Column Size",min:5,max:50,step:1,value:a.values.grid_padding,setValue:function(e){return a.setFieldValue("grid_padding",e)}})}),Object(Q.jsx)($e.p,{item:!0,xs:12,sm:6,children:Object(Q.jsx)(ut,{label:"Stroke Width",min:.01,max:3,step:.01,value:a.values.grid_stroke,setValue:function(e){return a.setFieldValue("grid_stroke",e)}})}),Object(Q.jsx)($e.p,{item:!0,xs:12,sm:12,children:Object(Q.jsx)(ft,{control:Object(Q.jsx)($e.h,{color:"primary",name:"show_grid",checked:a.values.show_grid,onChange:function(e){return a.setFieldValue("show_grid",e.target.checked)}}),label:"Show Grid for Repositioning",labelPlacement:"start"})})]})})),Object(Q.jsx)(pt,Object(l.a)(Object(l.a)({label:"Car Parts"},a),{},{extraChildren:Object(Q.jsx)($e.p,{container:!0,spacing:2,children:Object(Q.jsx)($e.p,{item:!0,xs:12,sm:12,children:Object(Q.jsx)(ft,{control:Object(Q.jsx)($e.h,{color:"primary",name:"show_carparts_on_top",checked:a.values.show_carparts_on_top,onChange:function(e){return a.setFieldValue("show_carparts_on_top",e.target.checked)}}),label:"Show Car Parts on top of other layers",labelPlacement:"start"})})})}))]})}),Object(Q.jsxs)($e.j,{children:[Object(Q.jsx)($e.g,{onClick:t,color:"secondary",children:"Cancel"}),Object(Q.jsx)($e.g,{type:"submit",color:"primary",variant:"outlined",disabled:a.isSubmitting||!a.isValid,children:"Apply"})]})]})})),mt=b.a.memo((function(e){var t=e.guide_data,a=e.onCancel,n=e.onApply,r=Object(u.useMemo)((function(){return{carmask_color:t.carmask_color||"",carmask_opacity:t.carmask_opacity||1,wireframe_color:t.wireframe_color||"",wireframe_opacity:t.wireframe_opacity||1,sponsor_color:t.sponsor_color||"",sponsor_opacity:t.sponsor_opacity||1,numberblock_color:t.numberblock_color||"",numberblock_opacity:t.numberblock_opacity||1,grid_color:t.grid_color||"",grid_opacity:t.grid_opacity||1,grid_padding:t.grid_padding||10,grid_stroke:t.grid_stroke||.1,show_wireframe:t.show_wireframe||!1,show_sponsor:t.show_sponsor||!1,show_numberBlocks:t.show_numberBlocks||!1,show_grid:t.show_grid||!1,show_carparts_on_top:t.show_carparts_on_top||!1}}),[t]);return Object(Q.jsx)(tt.b,{initialValues:r,validationSchema:et.b().shape({carmask_color:et.c().nullable().test("color-validation","Incorrect Color Format",ye.e),wireframe_color:et.c().nullable().test("color-validation","Incorrect Color Format",ye.e),sponsor_color:et.c().nullable().test("color-validation","Incorrect Color Format",ye.e),numberblock_color:et.c().nullable().test("color-validation","Incorrect Color Format",ye.e),grid_color:et.c().nullable().test("color-validation","Incorrect Color Format",ye.e)}),validate:function(e){return console.log(e),{}},onSubmit:n,children:function(e){return Object(Q.jsx)(gt,Object(l.a)(Object(l.a)({},e),{},{onCancel:a}))}})})),xt=Object(d.c)($e.k).withConfig({displayName:"styles__CustomDialogContent",componentId:"sc-1v9xwdd-0"})(["padding-right:0;"]),_t=Object(d.c)($e.e).withConfig({displayName:"styles__CustomAutocomplete",componentId:"sc-1v9xwdd-1"})([".MuiInputLabel-outlined{transform:translate(14px,12px) scale(1);&.MuiInputLabel-shrink{transform:translate(14px,-6px) scale(0.75);}}.MuiInputBase-root{padding-top:0;padding-bottom:0;}"]),wt=b.a.memo((function(e){var t=e.owner,a=e.schemeID,n=e.premiumUsers,r=e.onCancel,o=Object(he.a)(e,["owner","schemeID","premiumUsers","onCancel"]),c=o.isSubmitting,i=o.isValid,s=o.handleSubmit,d=o.setFieldValue,b=o.values,j=Object(u.useMemo)((function(){return n.filter((function(e){return e.id!==t.id&&!b.sharedUsers.find((function(t){return t.user.id===e.id}))}))}),[n,t,b]),h=Object(u.useCallback)((function(e){d("newUser",e?{user_id:e.id,user:e,scheme_id:a,accepted:0,editable:0}:null)}),[a]),O=Object(u.useCallback)((function(e){d("newUser['editable']",e)}),[]),p=Object(u.useCallback)((function(e,t){d("sharedUsers[".concat(t,"]['editable']"),e)}),[]);return Object(Q.jsxs)(tt.a,{onSubmit:s,noValidate:!0,children:[Object(Q.jsxs)(xt,{dividers:!0,id:"insert-text-dialog-content",children:[Object(Q.jsxs)($e.f,{display:"flex",justifyContent:"space-between",mb:5,pr:5,children:[Object(Q.jsx)(_t,{options:j,getOptionLabel:function(e){return e.id.toString()},style:{width:200},onChange:function(e,t){h(t)},renderInput:function(e){return Object(Q.jsx)($e.x,Object(l.a)(Object(l.a)({},e),{},{label:"Enter Customer ID",variant:"outlined"}))}}),b.newUser?Object(Q.jsxs)($e.f,{display:"flex",justifyContent:"space-between",flexGrow:1,ml:5,children:[Object(Q.jsxs)($e.f,{children:[Object(Q.jsx)($e.y,{children:b.newUser.user.drivername}),Object(Q.jsxs)($e.y,{variant:"body2",color:"textSecondary",children:["ID #",b.newUser.user.id]})]}),Object(Q.jsx)($e.f,{height:"31px",children:Object(Q.jsxs)($e.w,{variant:"outlined",value:b.newUser.editable,onChange:function(e){return O(e.target.value)},children:[Object(Q.jsx)($e.u,{value:0,children:"Can view"}),Object(Q.jsx)($e.u,{value:1,children:"Can view & edit"}),Object(Q.jsx)($e.u,{value:-1,children:"Cancel"})]})})]}):Object(Q.jsx)(Q.Fragment,{})]}),Object(Q.jsxs)($e.f,{maxHeight:"50vh",pr:5,overflow:"auto",children:[Object(Q.jsxs)($e.f,{display:"flex",justifyContent:"space-between",mb:2,children:[Object(Q.jsx)($e.y,{color:"textSecondary",children:t.drivername}),Object(Q.jsx)($e.y,{color:"textSecondary",children:"Owner"})]}),b.sharedUsers.map((function(e,t){return Object(Q.jsxs)($e.f,{display:"flex",justifyContent:"space-between",mb:2,children:[Object(Q.jsx)($e.y,{color:"textSecondary",children:e.user.drivername}),Object(Q.jsxs)($e.w,{variant:"outlined",value:e.editable,onChange:function(e){return p(e.target.value,t)},children:[Object(Q.jsx)($e.u,{value:0,children:"Can view"}),Object(Q.jsx)($e.u,{value:1,children:"Can view & edit"}),Object(Q.jsx)($e.u,{value:-1,children:"Remove"})]})]},t)}))]})]}),Object(Q.jsxs)($e.j,{children:[Object(Q.jsx)($e.g,{onClick:r,color:"secondary",children:"Cancel"}),Object(Q.jsx)($e.g,{type:"submit",color:"primary",variant:"outlined",disabled:c||!i,children:"Apply"})]})]})})),Ct=b.a.memo((function(e){var t=e.ownerID,a=e.schemeID,n=e.userList,r=e.sharedUsers,o=e.onCancel,c=e.onApply,i=Object(u.useMemo)((function(){return n.find((function(e){return e.id===t}))}),[t,n]),s=Object(u.useMemo)((function(){return n.filter((function(e){return e.pro_user}))}),[n]),d=Object(u.useMemo)((function(){return{newUser:null,sharedUsers:r}}),[r]);return Object(Q.jsx)(tt.b,{initialValues:d,validate:function(e){return console.log(e),{}},onSubmit:c,children:function(e){return Object(Q.jsx)(wt,Object(l.a)(Object(l.a)({},e),{},{owner:i,schemeID:a,premiumUsers:s,onCancel:o}))}})})),vt=a(1213),kt=a(1186),Lt=a(7),St=function(e){var t=e.children,a=e.value,n=e.index,r=Object(he.a)(e,["children","value","index"]);return Object(Q.jsx)(F.a,Object(l.a)(Object(l.a)({role:"tabpanel",hidden:a!==n,id:"project-settings-tabpanel-".concat(n),"aria-labelledby":"project-settings-tab-".concat(n)},r),{},{children:a===n&&Object(Q.jsx)(Q.Fragment,{children:t})}))},Rt=function(e){return{id:"project-settings-tab-".concat(e),"aria-controls":"project-settings-tabpanel-".concat(e)}},It=Object(Lt.a)({indicator:{display:"flex",justifyContent:"center",backgroundColor:"transparent","& > span":{width:"100%",backgroundColor:"#635ee7"}},root:{paddingLeft:"24px"}})((function(e){return Object(Q.jsx)(vt.a,Object(l.a)(Object(l.a)({},e),{},{TabIndicatorProps:{children:Object(Q.jsx)("span",{})}}))})),Dt=Object(Lt.a)((function(e){return{root:{textTransform:"none",color:"#fff",fontWeight:e.typography.fontWeightRegular,fontSize:"1rem",marginRight:"10px",padding:"6px 5px",minWidth:120,"&:focus":{opacity:1}}}}))((function(e){return Object(Q.jsx)(kt.a,Object(l.a)({disableRipple:!0},e))})),Et=function(e){var t=e.ownerID,a=e.schemeID,n=e.userList,r=e.sharedUsers,o=e.guide_data,c=e.onCancel,i=e.open,d=e.onApplyGuideSettings,b=e.onApplySharingSetting,j=Object(u.useState)(0),h=Object(s.a)(j,2),O=h[0],p=h[1],f=Object(u.useCallback)((function(e,t){p(t)}),[p]);return Object(Q.jsxs)($e.i,{"aria-labelledby":"insert-text-title",open:i,onClose:c,fullWidth:!0,maxWidth:"sm",children:[Object(Q.jsx)($e.l,{id:"insert-text-title",children:"Project Settings"}),Object(Q.jsxs)(It,{value:O,onChange:f,"aria-label":"Project Settings Tab",children:[Object(Q.jsx)(Dt,Object(l.a)({label:"Painting Guides"},Rt(0))),Object(Q.jsx)(Dt,Object(l.a)({label:"Sharing"},Rt(1)))]}),Object(Q.jsxs)($e.f,{children:[Object(Q.jsx)(St,{value:O,index:0,children:Object(Q.jsx)(mt,{guide_data:o,onApply:d,onCancel:c})}),Object(Q.jsx)(St,{value:O,index:1,children:Object(Q.jsx)(Ct,{ownerID:t,schemeID:a,userList:n,sharedUsers:r,onApply:b,onCancel:c})})]})]})},Tt=b.a.memo(Et),Mt=a(514),Ft=a(518),Bt=a(517),At={DELETE:"Delete Layer",ENTER:"Complete Drawing",1:"Toggle Car Mask Guide",2:"Toggle Wireframe Guide",3:"Toggle Sponsor Block Guide",4:"Toggle Number Block Guide",5:"Toggle Grid Guide",T:"Insert Text",S:"Insert Overlay",L:"Insert Logo",B:"Insert Basepaint",H:"Hide Transformer","\u2191":"Move Layer Up","\u2193":"Move Layer Down","\u2190":"Move Lyer Left","\u2192":"Move Lyer Right","Shift \u2191":"10x Move Layer Up","Shift \u2193":"10x Move Layer Down","Shift \u2190":"10x Move Lyer Left","Shift \u2192":"10x Move Lyer Right","Shift +":"Zoom In","Shift -":"Zoom Out","Shift 9":"Zoom To Fit","Shift 0":"Zoom To 100%","Shift D":"Default Mouse Mode","Shift B":"Brush Drawing Mode","Shift R":"Rectangle Drawing Mode","Shift C":"Circle Drawing Mode","Shift E":"Ellipse Drawing Mode","Shift S":"Star Drawing Mode","Shift G":"Ring Drawing Mode","Shift O":"Regular-Polygon Drawing Mode","Shift W":"Wedge Drawing Mode","Shift A":"Arc Drawing Mode","Shift P":"Polygon Drawing Mode","Shift L":"Line Drawing Mode","Shift >":"Arrow Drawing Mode","Ctrl/Meta C":"Copy Layer To Clipboard","Ctrl/Meta V":"Paste Layer From Clipboard","Ctrl/Meta Z":"Undo Action","Ctrl/Meta Y":"Redo Action"},Pt=Object(d.c)(rt.a).withConfig({displayName:"ShortCutsDialog__Grid",componentId:"sc-3fzz2e-0"})(N.b),Nt=Object(d.c)(U.a).withConfig({displayName:"ShortCutsDialog__KeyText",componentId:"sc-3fzz2e-1"})(["color:#ca812c;background:#000000;width:fit-content;padding:0px 10px;border-radius:3px;"]),Ut=Object(d.c)(U.a).withConfig({displayName:"ShortCutsDialog__DescriptionText",componentId:"sc-3fzz2e-2"})(["width:fit-content;padding:0px;"]),Yt=function(e){var t=e.onCancel,a=e.open;return Object(Q.jsxs)(Mt.a,{"aria-labelledby":"short-cuts-title",open:a,onClose:t,fullWidth:!0,maxWidth:"sm",children:[Object(Q.jsx)(Ft.a,{id:"short-cuts-title",children:"Shortcuts"}),Object(Q.jsx)(Bt.a,{dividers:!0,id:"short-cuts-dialog-content",children:Object.keys(At).map((function(e,t){return Object(Q.jsxs)(Pt,{container:!0,mb:2,children:[Object(Q.jsx)(Pt,{item:!0,xs:6,children:Object(Q.jsx)(Nt,{children:e})}),Object(Q.jsx)(Pt,{item:!0,xs:6,children:Object(Q.jsx)(Ut,{children:At[e]})})]},t)}))})]})},Xt=b.a.memo(Yt),Wt=Object(d.c)(Ve.a).withConfig({displayName:"TitleBar__CustomIcon",componentId:"sc-6ardfy-0"})(["width:20px !important;"]),Gt="SHORTCUTS",zt="SETTINGS",Ht=Object(d.c)(Ke.a).withConfig({displayName:"TitleBar__NameInput",componentId:"sc-6ardfy-1"})(["width:",";"],(function(e){return e.width})),Kt=function(){var e=Object(m.f)(),t=Object(p.d)(),a=Object(u.useState)(""),n=Object(s.a)(a,2),r=n[0],o=n[1],c=Object(u.useState)(null),i=Object(s.a)(c,2),d=i[0],b=i[1],j=Object(p.e)((function(e){return e.schemeReducer.current})),h=Object(p.e)((function(e){return e.schemeReducer.sharedUsers})),O=Object(p.e)((function(e){return e.schemeReducer.current.guide_data})),f=Object(p.e)((function(e){return e.userReducer.list})),y=Object(u.useCallback)((function(e){o(e.target.value)}),[o]),g=Object(u.useCallback)((function(){t(Object(He.b)(j.id,r))}),[t,j&&j.id,r]),x=Object(u.useCallback)((function(e){13===e.keyCode&&(e.preventDefault(),g())}),[g]),_=Object(u.useCallback)((function(){o(j.name)}),[o,j&&j.name]),w=Object(u.useCallback)((function(){t(Object(P.a)()),t(Object(He.o)(!1)),t(Object(He.c)()),e.push("/")}),[e,t]),C=Object(u.useCallback)((function(e){t(Object(He.q)(Object(l.a)(Object(l.a)({},j),{},{guide_data:e}))),b(null)}),[t,j,b]),v=Object(u.useCallback)((function(e){console.log(e),b(null)}),[t,b]);return Object(u.useEffect)((function(){j&&o(j.name)}),[j&&j.name]),Object(Q.jsxs)(F.a,{display:"flex",justifyContent:"space-between",alignItems:"center",px:1,my:1,children:[Object(Q.jsx)(Ht,{value:r,onChange:y,onKeyDown:x,width:j&&r!==j.name?"105px":"185px"}),Object(Q.jsxs)(F.a,{display:"flex",children:[j&&r!==j.name?Object(Q.jsx)(V.a,{title:"Discard Change",arrow:!0,children:Object(Q.jsx)(Y.a,{onClick:_,color:"secondary",children:Object(Q.jsx)(Ze.a,{})})}):Object(Q.jsx)(Q.Fragment,{}),j&&r!==j.name?Object(Q.jsx)(V.a,{title:"Save",arrow:!0,children:Object(Q.jsx)(Y.a,{onClick:g,children:Object(Q.jsx)(Je.a,{})})}):Object(Q.jsx)(Q.Fragment,{}),Object(Q.jsx)(V.a,{title:"Back",arrow:!0,children:Object(Q.jsx)(Y.a,{onClick:w,children:Object(Q.jsx)(Wt,{icon:Qe.b,size:"xs"})})}),Object(Q.jsx)(V.a,{title:"Shortcuts",arrow:!0,children:Object(Q.jsx)(Y.a,{onClick:function(){return b(Gt)},children:Object(Q.jsx)(Wt,{icon:Qe.k,size:"xs"})})}),Object(Q.jsx)(V.a,{title:"Settings",arrow:!0,children:Object(Q.jsx)(Y.a,{onClick:function(){return b(zt)},children:Object(Q.jsx)(qe.a,{})})})]}),Object(Q.jsx)(Xt,{open:d===Gt,onCancel:function(){return b(null)}}),Object(Q.jsx)(Tt,{ownerID:j.user_id,schemeID:j.id,sharedUsers:h,userList:f,guide_data:O,open:d===zt,onApplyGuideSettings:C,onApplySharingSetting:v,onCancel:function(){return b(null)}})]})},Vt=b.a.memo(Kt),Zt=a(4),Jt=a(1140),qt=a(1192),Qt=a(1193),$t=a(1194),ea=a(1195),ta=a(511),aa=a(1196),na=a(1183),ra=a(1190),oa=a(1191),ca=a(1173),la=a(1174),ia=Object(d.c)(F.a).withConfig({displayName:"PartItem__Wrapper",componentId:"sc-1vufzst-0"})(["cursor:pointer;&.sortable-chosen{background:rgba(255,255,255,0.2);}&.activeItem{background:rgba(0,0,0,0.5) !important;}&.hoveredItem{background:rgba(0,0,0,0.2);}"]),sa=Object(d.c)(U.a).withConfig({displayName:"PartItem__CustomTypography",componentId:"sc-1vufzst-1"})(["color:",";"],(function(e){return"true"===e.active?"white":"darkgray"})),da=Object(d.c)(Y.a).withConfig({displayName:"PartItem__SmallIconButton",componentId:"sc-1vufzst-2"})([".MuiSvgIcon-root{width:18px;height:18px;}"]),ua=function(e){var t=e.layer_visible,a=e.layer_locked,n=e.text,r=e.toggleVisible,o=e.toggleLocked,c=e.selected,l=e.disableLock,i=e.onSelect,s=e.hovered,d=e.onHover,b=Object(u.useRef)(null),j=Object(u.useCallback)((function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),r()}),[r]),h=Object(u.useCallback)((function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),o()}),[r]);return Object(Q.jsx)(ia,{ref:b,px:2,py:1,mb:1,display:"flex",width:"100%",border:1,borderColor:"grey.700",borderRadius:5,onClick:i,onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},className:Object(Zt.a)(c&&"activeItem",s&&"hoveredItem"),children:Object(Q.jsxs)(F.a,{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",children:[Object(Q.jsx)(sa,{variant:"body2",active:t?"true":"false",noWrap:!0,children:n}),Object(Q.jsxs)(F.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[!l&&(c||s||a)?Object(Q.jsx)(F.a,{mr:1,children:Object(Q.jsx)(da,{onClick:h,size:"small",children:a?Object(Q.jsx)(ra.a,{}):Object(Q.jsx)(oa.a,{})})}):Object(Q.jsx)(F.a,{width:"24px",height:"24px",mr:1}),c||s||!t?Object(Q.jsx)(da,{onClick:j,size:"small",children:t?Object(Q.jsx)(ca.a,{}):Object(Q.jsx)(la.a,{})}):Object(Q.jsx)(F.a,{width:"24px",height:"24px"})]})]})})},ba=b.a.memo(ua),ja=Object(na.a)((function(e){return{expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}})),ha=Object(d.c)(X.a).withConfig({displayName:"PartGroup__Button",componentId:"d20ix9-0"})(N.b),Oa=Object(d.c)(qt.a).withConfig({displayName:"PartGroup__ButtonGroup",componentId:"d20ix9-1"})(N.b),pa=Object(d.c)(ha).withConfig({displayName:"PartGroup__AddButton",componentId:"d20ix9-2"})(["min-width:40px;padding:3px 5px;.MuiButton-startIcon{margin-right:2px;}.MuiButton-endIcon{margin:0;}.fa-lg{font-size:1.3333333333em !important;}"]),fa=Object(d.c)(Qt.a).withConfig({displayName:"PartGroup__CustomCardHeader",componentId:"d20ix9-3"})([".MuiCardHeader-title{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;}.MuiCardHeader-content{width:calc(100% - 50px);}"]),ya=Object(d.c)($t.a).withConfig({displayName:"PartGroup__CustomCardContent",componentId:"d20ix9-4"})(["padding-top:0;"]),ga=function(e){var t=ja(),a=Object(p.d)(),n=Object(u.useState)(!0),r=Object(s.a)(n,2),o=r[0],c=r[1],d=Object(p.e)((function(e){return e.layerReducer.current})),b=Object(p.e)((function(e){return e.authReducer.user})),j=e.layerList,h=e.title,f=e.actions,y=e.extraChildren,g=e.disableLock,m=e.disableDnd,x=e.hoveredLayerJSON,_=e.onChangeHoverJSONItem,w=Object(u.useMemo)((function(){return O.a.orderBy(j,["layer_order"],["asc"])}),[j]);Object(u.useEffect)((function(){for(var e in w)w[e].layer_order!==parseInt(e)+1&&a(Object(Xe.s)(Object(l.a)(Object(l.a)({},w[e]),{},{layer_order:parseInt(e)+1}),!1))}),[j.length]);var C=Object(u.useCallback)((function(){c((function(e){return!e}))}),[c]),v=Object(u.useCallback)((function(e){var t=function(t){var n=j.find((function(a){return a.id==e[t].id}));n&&n.layer_order!==parseInt(t)+1&&a(Object(Xe.s)(Object(l.a)(Object(l.a)({},n),{},{layer_order:parseInt(t)+1}),!1))};for(var n in e)t(n)}),[j,a]),k=Object(u.useCallback)((function(e,t){var n=j.find((function(t){return t.id===e}));a(Object(Xe.s)(Object(l.a)(Object(l.a)({},n),{},Object(i.a)({},t,n[t]?0:1))))}),[j,a]),L=Object(u.useCallback)((function(e){a(Object(Xe.n)(e)),a(Object(P.h)(B.f.DEFAULT))}),[a]),S=Object(u.useCallback)((function(e,t){_(e.id,t)}),[_]),R=Object(u.useCallback)((function(e,t){return t===B.e.UPLOAD&&0===e.indexOf(b.id.toString())?e.slice(b.id.toString().length+1):e}),[b]);return Object(Q.jsx)(F.a,{mb:2,children:Object(Q.jsxs)(ea.a,{children:[Object(Q.jsx)(fa,{title:h,action:Object(Q.jsxs)(F.a,{display:"flex",children:[f?Object(Q.jsx)(Oa,{mr:1,children:f.map((function(e,t){return Object(Q.jsx)(pa,{onClick:e.onClick,size:"small",startIcon:Object(Q.jsx)(aa.a,{}),endIcon:Object(Q.jsx)(Ve.a,{icon:e.icon,size:"lg"}),variant:"outlined"},t)}))}):Object(Q.jsx)(Q.Fragment,{}),Object(Q.jsx)(Y.a,{onClick:C,className:Object(Zt.a)(t.expand,Object(i.a)({},t.expandOpen,o)),children:Object(Q.jsx)(at.a,{})})]})}),Object(Q.jsx)(ta.a,{in:o,children:Object(Q.jsxs)(ya,{children:[Object(Q.jsx)(Jt.ReactSortable,{list:w,setList:v,animation:150,onChoose:function(e){return console.log(e)},onSelect:function(e){return console.log(e)},sort:!m,children:w.map((function(e){return Object(Q.jsx)(ba,{text:R(e.layer_data.name,e.layer_type),layer_visible:e.layer_visible,layer_locked:e.layer_locked,toggleVisible:function(){return k(e.id,"layer_visible")},toggleLocked:function(){return k(e.id,"layer_locked")},selected:d&&d.id===e.id,hovered:x[e.id],onSelect:function(){return L(e)},onHover:function(t){return S(e,t)},disableLock:g},e.id)}))}),y]})})]})})},ma=a(1184),xa=a(520),_a=a(1204),wa=a(1203),Ca=a(1205),va=a(1206),ka=a(1170),La=a(572),Sa=a(1197),Ra=d.c.div.withConfig({displayName:"Loader__Root",componentId:"sc-1gqft2x-0"})(["justify-content:center;align-items:center;display:flex;min-height:60px;"]),Ia=function(){return Object(Q.jsx)(Ra,{children:Object(Q.jsx)(Sa.a,{m:2,color:"secondary"})})},Da=a(1198),Ea=a(1199),Ta=a(516),Ma=Object(d.c)(X.a).withConfig({displayName:"BasePaintDialog__Button",componentId:"sc-1dconu8-0"})(N.b),Fa=Object(d.c)(La.a).withConfig({displayName:"BasePaintDialog__CustomInfiniteScroll",componentId:"sc-1dconu8-1"})(["&.infinite-scroll-component{overflow:hidden !important;}"]),Ba=Object(d.c)(Da.a).withConfig({displayName:"BasePaintDialog__CustomGridList",componentId:"sc-1dconu8-2"})(["overflow:hidden !important;margin:0 !important;"]),Aa=Object(d.c)(Ea.a).withConfig({displayName:"BasePaintDialog__CustomGridListTile",componentId:"sc-1dconu8-3"})(["cursor:pointer;"]),Pa=d.c.img.withConfig({displayName:"BasePaintDialog__CustomImg",componentId:"sc-1dconu8-4"})(["width:100%;height:100%;position:relative;object-fit:contain;"]),Na=b.a.memo((function(e){var t=Object(u.useState)(30),a=Object(s.a)(t,2),n=a[0],r=a[1],o=e.legacyMode,c=e.basePaints,l=e.carMake,i=e.onCancel,d=e.open,b=e.onOpenBase,j=Object(u.useMemo)((function(){return l?o?c:Array.from({length:l.total_bases},(function(e,t){return t+1})):[]}),[o,c,l]),h=Object(u.useMemo)((function(){return!!l&&(o?n<c.length:n<l.total_bases)}),[o,n,c,l]),O=Object(u.useCallback)((function(e){return o?Object(ye.n)(e)+"preview.jpg":Object(ye.c)(l,e)+"preview.jpg"}),[o,l]),p=Object(u.useCallback)((function(e){return o?e.base_name:"Base Paint ".concat(e)}),[o]),f=Object(u.useCallback)((function(){r(n+30)}),[n,30,r]);return Object(Q.jsxs)(Mt.a,{"aria-labelledby":"base-paints-title",open:d,onClose:i,children:[Object(Q.jsx)(Ft.a,{id:"base-paints-title",children:"Select Base Paint"}),Object(Q.jsx)(Bt.a,{dividers:!0,id:"base-paint-dialog-content",children:Object(Q.jsx)(Fa,{dataLength:n,next:f,hasMore:h,loader:Object(Q.jsx)(Ia,{}),scrollableTarget:"base-paint-dialog-content",children:Object(Q.jsx)(Ba,{cellHeight:178,cols:3,spacing:8,children:j.slice(0,n).map((function(e,t){return Object(Q.jsx)(Aa,{cols:1,onClick:function(){return b(e)},children:Object(Q.jsx)(Pa,{src:O(e),alt:p(e)})},t)}))})})}),Object(Q.jsx)(Ta.a,{children:Object(Q.jsx)(Ma,{onClick:i,color:"secondary",children:"Cancel"})})]})})),Ua=a(1200),Ya=a(614),Xa=Object(d.c)(X.a).withConfig({displayName:"OverlayDialog__Button",componentId:"sc-1w6rbnl-0"})(N.b),Wa=Object(d.c)(La.a).withConfig({displayName:"OverlayDialog__CustomInfiniteScroll",componentId:"sc-1w6rbnl-1"})(["&.infinite-scroll-component{overflow:hidden !important;}"]),Ga=Object(d.c)(Da.a).withConfig({displayName:"OverlayDialog__CustomGridList",componentId:"sc-1w6rbnl-2"})(["overflow:hidden !important;margin:0 !important;"]),za=Object(d.c)(Ea.a).withConfig({displayName:"OverlayDialog__CustomGridListTile",componentId:"sc-1w6rbnl-3"})(["cursor:pointer;"]),Ha=Object(d.c)(Bt.a).withConfig({displayName:"OverlayDialog__CustomDialogContent",componentId:"sc-1w6rbnl-4"})(["width:600px;"]),Ka=d.c.img.withConfig({displayName:"OverlayDialog__CustomImg",componentId:"sc-1w6rbnl-5"})(["width:100%;height:100%;position:relative;object-fit:contain;"]),Va=function(e){var t=Object(u.useState)(30),a=Object(s.a)(t,2),n=a[0],r=a[1],o=Object(u.useState)(""),c=Object(s.a)(o,2),l=c[0],i=c[1],d=e.overlays,b=e.onCancel,j=e.open,h=e.onOpenOverlay,O=Object(u.useCallback)((function(){r(n+30)}),[n,30,r]),p=Object(u.useMemo)((function(){return d.filter((function(e){return e.name.toLowerCase().includes(l.toLowerCase())||e.description.toLowerCase().includes(l.toLowerCase())}))}),[d,l]);return Object(Q.jsxs)(Mt.a,{"aria-labelledby":"shape-title",open:j,onClose:b,children:[Object(Q.jsx)(Ft.a,{id:"shape-title",children:"Insert Overlay"}),Object(Q.jsxs)(Ha,{dividers:!0,children:[Object(Q.jsx)(F.a,{mb:2,children:Object(Q.jsx)(Ya.a,{value:l,onChange:function(e){return i(e)}})}),Object(Q.jsx)(F.a,{id:"shape-dialog-content",overflow:"auto",height:"70vh",children:Object(Q.jsx)(Wa,{dataLength:n,next:O,hasMore:n<p.length,loader:Object(Q.jsx)(Ia,{}),scrollableTarget:"shape-dialog-content",children:Object(Q.jsx)(Ga,{cellHeight:178,cols:3,children:p.slice(0,n).map((function(e){return Object(Q.jsxs)(za,{cols:1,onClick:function(){return h(e)},children:[Object(Q.jsx)(Ka,{src:"".concat(De.a.assetsURL,"/").concat(e.overlay_thumb),alt:e.name}),Object(Q.jsx)(Ua.a,{title:e.name,subtitle:e.description})]},e.id)}))})})})]}),Object(Q.jsx)(Ta.a,{children:Object(Q.jsx)(Xa,{onClick:b,color:"secondary",children:"Cancel"})})]})},Za=b.a.memo(Va),Ja=Object(d.c)(X.a).withConfig({displayName:"LogoDialog__Button",componentId:"sc-39n1mp-0"})(N.b),qa=Object(d.c)(U.a).withConfig({displayName:"LogoDialog__Typography",componentId:"sc-39n1mp-1"})(N.b),Qa=Object(d.c)(La.a).withConfig({displayName:"LogoDialog__CustomInfiniteScroll",componentId:"sc-39n1mp-2"})(["&.infinite-scroll-component{overflow:hidden !important;}"]),$a=Object(d.c)(Da.a).withConfig({displayName:"LogoDialog__CustomGridList",componentId:"sc-39n1mp-3"})(["overflow:hidden !important;margin:0 !important;"]),en=Object(d.c)(Ea.a).withConfig({displayName:"LogoDialog__CustomGridListTile",componentId:"sc-39n1mp-4"})(["cursor:pointer;"]),tn=Object(d.c)(Bt.a).withConfig({displayName:"LogoDialog__CustomDialogContent",componentId:"sc-39n1mp-5"})(["width:600px;"]),an=d.c.img.withConfig({displayName:"LogoDialog__CustomImg",componentId:"sc-39n1mp-6"})(["width:100%;height:100%;position:relative;object-fit:contain;"]),nn=Object(Lt.a)({indicator:{display:"flex",justifyContent:"center",backgroundColor:"transparent","& > span":{maxWidth:40,width:"100%",backgroundColor:"#635ee7"}}})((function(e){return Object(Q.jsx)(vt.a,Object(l.a)(Object(l.a)({},e),{},{TabIndicatorProps:{children:Object(Q.jsx)("span",{})}}))})),rn=Object(Lt.a)((function(e){return{root:{textTransform:"none",color:"#fff",fontWeight:e.typography.fontWeightRegular,fontSize:"1rem",marginRight:0,padding:"6px 5px",minWidth:60,"&:focus":{opacity:1}}}}))((function(e){return Object(Q.jsx)(kt.a,Object(l.a)({disableRipple:!0},e))})),on=function(e){var t=e.children,a=e.value,n=e.index,r=Object(he.a)(e,["children","value","index"]);return Object(Q.jsx)("div",Object(l.a)(Object(l.a)({role:"tabpanel",hidden:a!==n,id:"logo-tabpanel-".concat(n),"aria-labelledby":"logo-tab-".concat(n)},r),{},{children:a===n&&Object(Q.jsx)(Q.Fragment,{children:t})}))};function cn(e){return{id:"logo-tab-".concat(e),"aria-controls":"logo-tabpanel-".concat(e)}}var ln=function(e){var t=30,a=Object(u.useState)(t),n=Object(s.a)(a,2),r=n[0],o=n[1],c=Object(u.useState)(t),i=Object(s.a)(c,2),d=i[0],b=i[1],j=Object(u.useState)(0),h=Object(s.a)(j,2),O=h[0],p=h[1],f=Object(u.useState)(""),y=Object(s.a)(f,2),g=y[0],m=y[1],x=e.logos,_=e.onCancel,w=e.open,C=e.onOpenLogo,v=Object(u.useMemo)((function(){return x.filter((function(e){return e.name.toLowerCase().includes(g.toLowerCase())&&"flag"!==e.type}))}),[x,g]),k=Object(u.useMemo)((function(){return x.filter((function(e){return e.name.toLowerCase().includes(g.toLowerCase())&&"flag"===e.type}))}),[x,g]),L=Object(u.useCallback)((function(){o(r+t)}),[r,t,o]),S=Object(u.useCallback)((function(){b(d+t)}),[d,t,b]),R=Object(u.useCallback)((function(e,t){p(t),m("")}),[p,m]);return Object(Q.jsxs)(Mt.a,{"aria-labelledby":"logo-title",open:w,onClose:_,children:[Object(Q.jsx)(Ft.a,{id:"logo-title",children:Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"row",alignItems:"center",children:[Object(Q.jsx)(qa,{variant:"h5",mr:2,children:"Insert:"}),Object(Q.jsxs)(nn,{value:O,onChange:R,"aria-label":"logo tab",children:[Object(Q.jsx)(rn,Object(l.a)({label:"Logo"},cn(0))),Object(Q.jsx)(rn,Object(l.a)({label:"Flag"},cn(1)))]})]})}),Object(Q.jsxs)(tn,{dividers:!0,children:[Object(Q.jsx)(F.a,{mb:2,children:Object(Q.jsx)(Ya.a,{value:g,onChange:function(e){return m(e)}})}),Object(Q.jsx)(on,{value:O,index:0,children:Object(Q.jsx)(F.a,{id:"logo-dialog-content",overflow:"auto",height:"70vh",children:Object(Q.jsx)(Qa,{dataLength:r,next:L,hasMore:r<v.length,loader:Object(Q.jsx)(Ia,{}),scrollableTarget:"logo-dialog-content",children:Object(Q.jsx)($a,{cellHeight:178,cols:3,children:v.slice(0,r).map((function(e){return Object(Q.jsxs)(en,{cols:1,onClick:function(){return C(e)},children:[Object(Q.jsx)(an,{src:"".concat(De.a.assetsURL,"/").concat(e.preview_file),alt:e.name}),Object(Q.jsx)(Ua.a,{title:e.name})]},e.id)}))})})})}),Object(Q.jsx)(on,{value:O,index:1,children:Object(Q.jsx)(F.a,{id:"flag-dialog-content",overflow:"auto",height:"70vh",children:Object(Q.jsx)(Qa,{dataLength:d,next:S,hasMore:d<k.length,loader:Object(Q.jsx)(Ia,{}),scrollableTarget:"flag-dialog-content",children:Object(Q.jsx)($a,{cellHeight:178,cols:3,children:k.slice(0,d).map((function(e){return Object(Q.jsxs)(en,{cols:1,onClick:function(){return C(e)},children:[Object(Q.jsx)(an,{src:"".concat(De.a.assetsURL,"/").concat(e.preview_file),alt:e.name}),Object(Q.jsx)(Ua.a,{title:e.name})]},e.id)}))})})})})]}),Object(Q.jsx)(Ta.a,{children:Object(Q.jsx)(Ja,{onClick:_,color:"secondary",children:"Cancel"})})]})},sn=b.a.memo(ln),dn=a(615),un=Object(d.c)(X.a).withConfig({displayName:"YesNoDialog__Button",componentId:"uvsbdx-0"})(N.b),bn=Object(d.c)(F.a).withConfig({displayName:"YesNoDialog__TextWrapper",componentId:"uvsbdx-1"})(["font-size:1rem;"]),jn=function(e){var t=e.text,a=e.open,n=e.onYes,r=e.onNo;return Object(Q.jsxs)(Mt.a,{"aria-labelledby":"confirm-title",open:a,children:[Object(Q.jsx)(Ft.a,{id:"confirm-title",children:"Confirm"}),Object(Q.jsx)(Bt.a,{dividers:!0,children:Object(Q.jsx)(bn,{children:t})}),Object(Q.jsxs)(Ta.a,{children:[Object(Q.jsx)(un,{onClick:n,color:"secondary",variant:"outlined",autoFocus:!0,children:"Yes"}),Object(Q.jsx)(un,{onClick:r,color:"primary",variant:"outlined",children:"No"})]})]})},hn=b.a.memo(jn),On=a(1202),pn=a(1171),fn=a(218),yn=a(12),gn=a(61),mn=Object(d.c)(X.a).withConfig({displayName:"UploadDialog__Button",componentId:"vk7mct-0"})(N.b),xn=Object(d.c)(La.a).withConfig({displayName:"UploadDialog__CustomInfiniteScroll",componentId:"vk7mct-1"})(["&.infinite-scroll-component{overflow:hidden !important;}"]),_n=Object(d.c)(Da.a).withConfig({displayName:"UploadDialog__CustomGridList",componentId:"vk7mct-2"})(["overflow:hidden !important;margin:0 !important;"]),wn=Object(d.c)(Ea.a).withConfig({displayName:"UploadDialog__CustomGridListTile",componentId:"vk7mct-3"})(["cursor:pointer;"]),Cn=Object(d.c)(Bt.a).withConfig({displayName:"UploadDialog__CustomDialogContent",componentId:"vk7mct-4"})(["width:600px;"]),vn=d.c.img.withConfig({displayName:"UploadDialog__CustomImg",componentId:"vk7mct-5"})(["width:100%;height:100%;position:relative;object-fit:contain;"]),kn=Object(d.c)(Y.a).withConfig({displayName:"UploadDialog__DeleteButton",componentId:"vk7mct-6"})(["color:#ccc;"]),Ln=function(e){var t=Object(p.d)(),a=Object(p.e)((function(e){return e.authReducer.user})),n=Object(p.e)((function(e){return e.schemeReducer.current})),c=Object(u.useState)(null),l=Object(s.a)(c,2),i=l[0],d=l[1],b=Object(u.useState)([]),j=Object(s.a)(b,2),h=j[0],O=j[1],f=Object(u.useState)(30),y=Object(s.a)(f,2),g=y[0],m=y[1],x=Object(u.useState)([]),_=Object(s.a)(x,2),w=_[0],C=_[1],v=Object(u.useState)(1),k=Object(s.a)(v,2),L=k[0],S=k[1],R=e.uploads,I=e.onCancel,D=e.open,E=e.onOpenUpload,T=Object(u.useCallback)((function(){m(g+30)}),[m,g]),M=Object(u.useCallback)((function(e){var t=e.substring(e.lastIndexOf("uploads/")+"uploads/".length,e.lastIndexOf("."));return 0===t.indexOf(a.id.toString())?t.slice(a.id.toString().length+1):t}),[a.id]),B=Object(u.useCallback)((function(e){C(e),console.log(e)}),[C]),A=Object(u.useCallback)((function(){console.log(w),t(Object(fn.d)(a.id,n.id,w)),C([]),S(L+1)}),[t,a.id,n.id,w,C,L,S]),P=Object(u.useCallback)((function(e,t){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),d(t)}),[d]),N=Object(u.useCallback)(Object(o.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Deleting: ",i),e.prev=1,e.next=4,gn.a.getSchemeListByUploadID(i.id);case 4:(a=e.sent).length?O(a):(t(Object(fn.b)(i,!0)),d(null)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),t(Object(yn.b)({message:e.t0.message})),d(null);case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),[t,i,O,d]),U=Object(u.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(t(Object(Xe.j)(i.id)),t(Object(Xe.n)(null))),t(Object(fn.b)(i,e)),d(null),O([])}),[t,i,d,O]);return Object(Q.jsxs)(Mt.a,{"aria-labelledby":"upload-title",open:D,onClose:I,children:[Object(Q.jsx)(Ft.a,{id:"upload-title",children:"My Uploads"}),Object(Q.jsxs)(Cn,{dividers:!0,children:[Object(Q.jsx)(pn.a,{onChange:B,value:w,showFileNamesInPreview:!0,showFileNames:!0,maxFiles:10},L),w.length?Object(Q.jsx)(F.a,{mt:1,width:"100%",display:"flex",justifyContent:"center",children:Object(Q.jsx)(mn,{variant:"contained",color:"primary",onClick:A,children:"Save To My Upload List"})}):Object(Q.jsx)(Q.Fragment,{}),Object(Q.jsx)(F.a,{id:"upload-dialog-content",overflow:"auto",height:"40vh",mt:1,children:Object(Q.jsx)(xn,{dataLength:g,next:T,hasMore:g<R.length,loader:Object(Q.jsx)(Ia,{}),scrollableTarget:"upload-dialog-content",children:Object(Q.jsx)(_n,{cellHeight:178,cols:3,children:R.slice(0,g).map((function(e){return Object(Q.jsxs)(wn,{cols:1,onClick:function(){return E(e)},children:[Object(Q.jsx)(vn,{src:"".concat(De.a.assetsURL,"/").concat(e.file_name),alt:M(e.file_name)}),Object(Q.jsx)(Ua.a,{title:M(e.file_name),actionIcon:Object(Q.jsx)(kn,{onClick:function(t){return P(t,e)},children:Object(Q.jsx)(On.a,{})})})]},e.id)}))})})})]}),Object(Q.jsx)(Ta.a,{children:Object(Q.jsx)(mn,{onClick:I,color:"secondary",children:"Cancel"})}),Object(Q.jsx)(dn.a,{text:i?'Are you sure to delete "'.concat(M(i.file_name),'"?'):"",open:!!i,onCancel:function(){return d(null)},onConfirm:N}),Object(Q.jsx)(hn,{text:h.length?Object(Q.jsxs)(Q.Fragment,{children:["The Projects below have the associated file:",Object(Q.jsx)("ul",{children:h.map((function(e,t){return Object(Q.jsx)("li",{children:e.name},t)}))}),"Would you like delete all of them?"]}):"",open:!!h.length,onYes:function(){return U(!0)},onNo:function(){return U(!1)}})]})},Sn=b.a.memo(Ln),Rn=a(477),In=a(479),Dn=a(495),En=Object(d.c)(Dn.a).withConfig({displayName:"FontSelect__Select",componentId:"sc-79nr26-0"})(N.b),Tn=Object(d.c)(En).withConfig({displayName:"FontSelect__CustomSelect",componentId:"sc-79nr26-1"})([".MuiSelect-selectMenu{display:flex;align-items:center;height:2rem;}"]),Mn=d.c.img.withConfig({displayName:"FontSelect__FontImage",componentId:"sc-79nr26-2"})(["width:506px;filter:invert(1);"]),Fn=function(e){var t=e.fontList,a=e.value,n=e.onChange;return Object(Q.jsx)(Tn,{labelId:"font-select-label",id:"font-select-outlined",value:a,onChange:n,label:"Font",mb:4,renderValue:function(e){var a=t.find((function(t){return t.id===e}));return a?Object(Q.jsx)(Mn,{src:"".concat(De.a.assetsURL,"/").concat(a.font_preview),alt:a.font_name}):Object(Q.jsx)(Q.Fragment,{children:"Select Font"})},children:t.map((function(e){return Object(Q.jsx)(xa.a,{value:e.id,children:Object(Q.jsx)(Mn,{src:"".concat(De.a.assetsURL,"/").concat(e.font_preview),alt:e.font_name})},e.id)}))})},Bn=Object(d.c)(X.a).withConfig({displayName:"TextDialog__Button",componentId:"sc-18v4ol9-0"})(N.b),An=Object(d.c)(Ke.a).withConfig({displayName:"TextDialog__TextField",componentId:"sc-18v4ol9-1"})(N.b),Pn=Object(d.c)(U.a).withConfig({displayName:"TextDialog__Typography",componentId:"sc-18v4ol9-2"})(N.b),Nn=Object(d.c)(An).withConfig({displayName:"TextDialog__CustomeTextField",componentId:"sc-18v4ol9-3"})([".MuiInputBase-input{height:2rem;}"]),Un=Object(d.c)(F.a).withConfig({displayName:"TextDialog__TextPreviewWrapper",componentId:"sc-18v4ol9-4"})(["overflow:auto;background:#",";"],(function(e){return e.backcolor})),Yn=Object(d.c)(F.a).withConfig({displayName:"TextDialog__TextPreview",componentId:"sc-18v4ol9-5"})(["color:",";-webkit-text-stroke-width:","px;-webkit-text-stroke-color:",";font-size:","px;font-family:",";transform:rotate(","deg);"],(function(e){return e.color}),(function(e){return e.stroke}),(function(e){return e.scolor}),(function(e){return e.size}),(function(e){return e.font}),(function(e){return e.rotate})),Xn=b.a.memo((function(e){var t=e.fontList,a=e.errors,n=e.handleBlur,r=e.handleChange,o=e.setFieldValue,c=e.touched,l=e.values,i=e.baseColor,s=Object(p.d)(),d=Object(p.e)((function(e){return e.fontReducer.loadedList})),b=Object(u.useCallback)((function(e,t){new FontFace(e,t).load().then((function(t){document.fonts.add(t),s(Object(Ye.c)(e))})).catch((function(t){console.warn(t,e)}))}),[Ye.c]);return Object(u.useEffect)((function(){var e=t.length?t.find((function(e){return e.id===l.font})):null;e&&!d.includes(e.font_name)&&b(e.font_name,"url(".concat(De.a.assetsURL,"/").concat(e.font_file,")"))}),[l.font]),Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(Nn,{name:"text",label:"Text",placeholder:"Input Text here",variant:"outlined",value:l.text,error:Boolean(c.text&&a.text),helperText:c.text&&a.text,onBlur:n,onChange:r,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0},autoFocus:!0}),Object(Q.jsxs)(Rn.a,{variant:"outlined",children:[Object(Q.jsx)(In.a,{id:"font-select-label",children:"Font"}),Object(Q.jsx)(Fn,{value:l.font,onChange:function(e){return o("font",e.target.value)},fontList:t})]}),Object(Q.jsxs)(rt.a,{container:!0,spacing:2,children:[Object(Q.jsx)(rt.a,{item:!0,xs:12,sm:6,children:Object(Q.jsx)(ut,{label:"Font Size",min:6,max:72,value:l.size,setValue:function(e){return o("size",e)}})}),Object(Q.jsx)(rt.a,{item:!0,xs:12,sm:6,children:Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[Object(Q.jsx)(Pn,{variant:"body1",color:"textSecondary",mr:2,children:"Font Color"}),Object(Q.jsx)(ht,{value:l.color,onChange:function(e){return o("color",e)},onInputChange:function(e){return o("color",e)},error:Boolean(a.color),helperText:a.color})]})})]}),Object(Q.jsxs)(rt.a,{container:!0,spacing:2,children:[Object(Q.jsx)(rt.a,{item:!0,xs:12,sm:6,children:Object(Q.jsx)(ut,{label:"Stroke Width",min:0,max:10,value:l.stroke,setValue:function(e){return o("stroke",e)}})}),Object(Q.jsx)(rt.a,{item:!0,xs:12,sm:6,children:Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[Object(Q.jsx)(Pn,{variant:"body1",color:"textSecondary",mr:2,children:"Stroke Color"}),Object(Q.jsx)(ht,{value:l.scolor,onChange:function(e){return o("scolor",e)},onInputChange:function(e){return o("scolor",e)},error:Boolean(a.scolor),helperText:a.scolor})]})})]}),Object(Q.jsx)(rt.a,{container:!0,spacing:2,children:Object(Q.jsx)(rt.a,{item:!0,xs:12,sm:6,children:Object(Q.jsx)(ut,{label:"Rotation",min:-179,max:179,value:l.rotation,setValue:function(e){return o("rotation",e)}})})}),Object(Q.jsx)(Un,{width:"100%",height:"200px",my:2,display:"flex",justifyContent:"center",alignItems:"center",backcolor:i,children:Object(Q.jsx)(Yn,{color:l.color,stroke:l.stroke,scolor:l.scolor,size:l.size,rotate:l.rotation,font:t.find((function(e){return e.id===l.font})).font_name,children:l.text})})]})})),Wn=function(e){var t=e.fontList,a=e.onCancel,n=e.open,r=e.baseColor,o=e.defaultColor,c=e.defaultStrokeColor,i=e.onCreate;return Object(Q.jsxs)(Mt.a,{"aria-labelledby":"insert-text-title",open:n,onClose:a,children:[Object(Q.jsx)(Ft.a,{id:"insert-text-title",children:"Insert Text"}),Object(Q.jsx)(tt.b,{initialValues:{text:"",font:1,size:14,color:o||"#000000",stroke:0,scolor:c||"#000000",rotation:0},validationSchema:et.b().shape({text:et.c().required("Required"),color:et.c().nullable().test("color-validation","Incorrect Color Format",ye.e),scolor:et.c().nullable().test("color-validation","Incorrect Color Format",ye.e)}),validate:function(e){return console.log(e),{}},onSubmit:i,children:function(e){return Object(Q.jsxs)(tt.a,{onSubmit:e.handleSubmit,children:[Object(Q.jsx)(Bt.a,{dividers:!0,id:"insert-text-dialog-content",children:Object(Q.jsx)(Xn,Object(l.a)(Object(l.a)({},e),{},{fontList:t,baseColor:r}))}),Object(Q.jsxs)(Ta.a,{children:[Object(Q.jsx)(Bn,{onClick:a,color:"secondary",children:"Cancel"}),Object(Q.jsx)(Bn,{type:"submit",color:"primary",variant:"outlined",disabled:e.isSubmitting,children:"Create"})]})]})}})]})},Gn=b.a.memo(Wn),zn=Object(d.c)(X.a).withConfig({displayName:"DefaultSettingsDialog__Button",componentId:"ol0j2l-0"})(N.b),Hn=Object(d.c)(U.a).withConfig({displayName:"DefaultSettingsDialog__Typography",componentId:"ol0j2l-1"})(N.b),Kn=function(e){e.label;var t=e.colorKey,a=e.opacityKey,n=e.errors,r=(e.handleBlur,e.handleChange,e.setFieldValue),o=(e.touched,e.values),c=e.extraChildren;return Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"column",width:"100%",mb:1,children:[Object(Q.jsxs)(rt.a,{container:!0,spacing:2,children:[Object(Q.jsx)(rt.a,{item:!0,xs:12,sm:6,children:Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[Object(Q.jsx)(Hn,{variant:"body1",color:"textSecondary",mr:2,children:"Color"}),Object(Q.jsx)(ht,{value:o[t],onChange:function(e){return r(t,e)},onInputChange:function(e){return r(t,e)},error:Boolean(n[t]),helperText:n[t]})]})}),Object(Q.jsx)(rt.a,{item:!0,xs:12,sm:6,children:Object(Q.jsx)(ut,{label:"Opacity",min:0,max:1,step:.01,value:o[a],setValue:function(e){return r(a,e)}})})]}),c]})},Vn=function(e){var t=e.onCancel,a=e.open,n=e.onApply,r=Object(p.e)((function(e){return e.schemeReducer.current.guide_data}));return Object(Q.jsxs)(Mt.a,{"aria-labelledby":"insert-text-title",open:a,onClose:t,fullWidth:!0,maxWidth:"sm",children:[Object(Q.jsx)(Ft.a,{id:"insert-text-title",children:"Default Shape Settings"}),Object(Q.jsx)(tt.b,{initialValues:{default_shape_color:r.default_shape_color||"#000000",default_shape_opacity:r.default_shape_opacity||1,default_shape_scolor:r.default_shape_scolor||"#000000",default_shape_stroke:r.default_shape_stroke||0},validationSchema:et.b().shape({default_shape_color:et.c().nullable().test("color-validation","Incorrect Color Format",ye.e),default_shape_scolor:et.c().nullable().test("color-validation","Incorrect Color Format",ye.e)}),validate:function(e){return console.log(e),{}},onSubmit:n,children:function(e){return Object(Q.jsxs)(tt.a,{onSubmit:e.handleSubmit,noValidate:!0,children:[Object(Q.jsx)(Bt.a,{dividers:!0,id:"insert-text-dialog-content",children:Object(Q.jsx)(Kn,Object(l.a)(Object(l.a)({label:"Default Shapes",colorKey:"default_shape_color",opacityKey:"default_shape_opacity"},e),{},{extraChildren:Object(Q.jsxs)(rt.a,{container:!0,spacing:2,children:[Object(Q.jsx)(rt.a,{item:!0,xs:12,sm:6,children:Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[Object(Q.jsx)(Hn,{variant:"body1",color:"textSecondary",mr:2,children:"Stroke Color"}),Object(Q.jsx)(ht,{value:e.values.default_shape_scolor,onChange:function(t){return e.setFieldValue("default_shape_scolor",t)},onInputChange:function(t){return e.setFieldValue("default_shape_scolor",t)},error:Boolean(e.errors.default_shape_scolor),helperText:e.errors.default_shape_scolor})]})}),Object(Q.jsx)(rt.a,{item:!0,xs:12,sm:6,children:Object(Q.jsx)(ut,{label:"Stroke Width",min:0,max:10,step:1,value:e.values.default_shape_stroke,setValue:function(t){return e.setFieldValue("default_shape_stroke",t)}})})]})}))}),Object(Q.jsxs)(Ta.a,{children:[Object(Q.jsx)(zn,{onClick:t,color:"secondary",children:"Cancel"}),Object(Q.jsx)(zn,{type:"submit",color:"primary",variant:"outlined",disabled:e.isSubmitting||!e.isValid,children:"Apply"})]})]})}})]})},Zn=b.a.memo(Vn),Jn=Object(d.c)(ma.a).withConfig({displayName:"DrawerBar__Divider",componentId:"sc-1d7p22o-0"})(N.b),qn=Object(d.c)(F.a).withConfig({displayName:"DrawerBar__Wrapper",componentId:"sc-1d7p22o-1"})(["background:#666666;padding:0px 10px 0 15px;"]),Qn=Object(d.c)(F.a).withConfig({displayName:"DrawerBar__ToolWrapper",componentId:"sc-1d7p22o-2"})(["background:#444;border-radius:5px;padding:5px 1px;"]),$n=Object(d.c)(xa.a).withConfig({displayName:"DrawerBar__CustomItem",componentId:"sc-1d7p22o-3"})(["display:flex;justify-content:center;padding:7px 10px;background-color:",";"],(function(e){return"true"===e.active?"rgba(255, 255, 255, 0.08)":"none"})),er=Object(d.c)(Ve.a).withConfig({displayName:"DrawerBar__CustomFontAwesomeIcon",componentId:"sc-1d7p22o-4"})(["transform:",";"],(function(e){return"true"===e.isstretch?"scaleX(1.2) scaleY(0.8)":"none"})),tr=Object(d.c)(F.a).withConfig({displayName:"DrawerBar__DefaultSettingsButton",componentId:"sc-1d7p22o-5"})(["outline:",";cursor:pointer;"],(function(e){return e.outline})),ar=[{value:B.f.DEFAULT,label:"Default Mode",icon:Object(Q.jsx)(er,{icon:Qe.i})},{value:B.f.POLYGON,label:"Polygon Mode",icon:Object(Q.jsx)(er,{icon:Qe.e})},{value:B.f.LINE,label:"Line Mode",icon:Object(Q.jsx)(wa.a,{})},{value:B.f.PEN,label:"Brush Mode",icon:Object(Q.jsx)(er,{icon:Qe.j})},{value:B.f.RECT,label:"Rectangle Mode",icon:Object(Q.jsx)(er,{icon:Qe.n})},{value:B.f.CIRCLE,label:"Circle Mode",icon:Object(Q.jsx)(er,{icon:Qe.c})},{value:B.f.ELLIPSE,label:"Ellipse Mode",icon:Object(Q.jsx)(er,{icon:Qe.c,isstretch:"true"})},{value:B.f.STAR,label:"Star Mode",icon:Object(Q.jsx)(er,{icon:Qe.o})},{value:B.f.RING,label:"Ring Mode",icon:Object(Q.jsx)(er,{icon:Qe.d})},{value:B.f.REGULARPOLYGON,label:"Regular Polygon Mode",icon:Object(Q.jsx)(_a.a,{size:17})},{value:B.f.WEDGE,label:"Wedge Mode",icon:Object(Q.jsx)(Ca.a,{fontSize:"small"})},{value:B.f.ARC,label:"Arc Mode",icon:Object(Q.jsx)(er,{icon:ka.a})},{value:B.f.ARROW,label:"Arrow Mode",icon:Object(Q.jsx)(va.a,{fontSize:"small"})}],nr=[{value:B.c.UPLOAD,label:"Insert My Logo/Upload New Logo",icon:Object(Q.jsx)(er,{icon:Qe.f})},{value:B.c.LOGO,label:"Insert Logo",icon:Object(Q.jsx)(er,{icon:Qe.h})},{value:B.c.TEXT,label:"Insert Text",icon:Object(Q.jsx)(er,{icon:Qe.g})},{value:B.c.SHAPE,label:"Insert Overlay",icon:Object(Q.jsx)(er,{icon:Qe.l})},{value:B.c.BASEPAINT,label:"Insert BasePaint",icon:Object(Q.jsx)(er,{icon:Qe.a})}],rr=function(e){var t=e.dialog,a=e.setDialog,n=e.focusBoard,r=e.stageRef,o=Object(p.d)(),c=Object(p.e)((function(e){return e.boardReducer.mouseMode})),i=Object(p.e)((function(e){return e.schemeReducer.current})),s=Object(p.e)((function(e){return e.carMakeReducer.current})),d=Object(p.e)((function(e){return e.overlayReducer.list})),b=Object(p.e)((function(e){return e.logoReducer.list})),j=Object(p.e)((function(e){return e.uploadReducer.list})),h=Object(p.e)((function(e){return e.fontReducer.list})),O=Object(p.e)((function(e){return e.boardReducer.frameSize})),f=Object(p.e)((function(e){return e.boardReducer.zoom})),y=Object(p.e)((function(e){return e.basePaintReducer.list})),g=Object(u.useCallback)((function(e){o(Object(P.h)(e)),e!==B.f.DEFAULT&&o(Object(Xe.n)(null))}),[o]),m=Object(u.useCallback)((function(e){o(Object(P.h)(B.f.DEFAULT)),o(Object(Xe.f)(i.id,e,i.legacy_mode)),a(null),n()}),[o,a,n,i&&i.id]),x=Object(u.useCallback)((function(e){o(Object(P.h)(B.f.DEFAULT)),o(Object(Xe.d)(i.id,e,Object(ye.l)(r,O,f))),a(null),n()}),[o,a,n,i&&i.id,ye.l,r,O,f]),_=Object(u.useCallback)((function(e){o(Object(P.h)(B.f.DEFAULT)),o(Object(Xe.c)(i.id,e,Object(ye.l)(r,O,f))),a(null),n()}),[o,a,n,i&&i.id,ye.l,r,O,f]),w=Object(u.useCallback)((function(e){o(Object(P.h)(B.f.DEFAULT)),o(Object(Xe.e)(i.id,e,Object(ye.l)(r,O,f))),a(null),n()}),[o,a,n,i&&i.id,ye.l,r,O,f]),C=Object(u.useCallback)((function(e){o(Object(P.h)(B.f.DEFAULT)),console.log(Object(ye.l)(r,O,f)),o(Object(Xe.h)(i.id,e,Object(ye.l)(r,O,f))),a(null),n()}),[o,a,n,i&&i.id,ye.l,r,O,f]),v=Object(u.useCallback)((function(e){o(Object(He.q)(Object(l.a)(Object(l.a)({},i),{},{guide_data:e}))),a(null)}),[o,i,a]);return Object(Q.jsxs)(qn,{children:[Object(Q.jsxs)(Qn,{children:[ar.map((function(e){return Object(Q.jsx)(V.a,{title:e.label,arrow:!0,placement:"right",children:Object(Q.jsx)($n,{value:e.value,onClick:function(){return g(e.value)},active:e.value===c?"true":"false",children:e.icon})},e.value)})),Object(Q.jsx)(Jn,{my:1}),nr.map((function(e){return Object(Q.jsx)(V.a,{title:e.label,arrow:!0,placement:"right",children:Object(Q.jsx)($n,{value:e.value,onClick:function(){return a(e.value)},children:e.icon})},e.value)})),Object(Q.jsx)(Jn,{my:1}),Object(Q.jsx)(F.a,{display:"flex",justifyContent:"center",width:"45px",height:"45px",alignItems:"center",children:Object(Q.jsx)(V.a,{title:"Default Shape Settings",arrow:!0,placement:"right",children:Object(Q.jsx)(F.a,{bgcolor:"#FFFFFF",height:"25px",children:Object(Q.jsx)(tr,{width:"25px",height:"25px",bgcolor:(i.guide_data.default_shape_color||"#000000")+Object(ye.b)(i.guide_data.default_shape_opacity||1),outline:"".concat(i.guide_data.default_shape_stroke||0,"px solid ").concat(i.guide_data.default_shape_scolor||"#000000"),onClick:function(){return a(B.c.DEFAULT_SHAPE_SETTINGS)}})})})})]}),Object(Q.jsx)(Na,{open:t===B.c.BASEPAINT,legacyMode:i.legacy_mode,carMake:s,basePaints:y,onOpenBase:m,onCancel:function(){return a(null)}}),Object(Q.jsx)(Za,{open:t===B.c.SHAPE,overlays:d,onOpenOverlay:x,onCancel:function(){return a(null)}}),Object(Q.jsx)(sn,{open:t===B.c.LOGO,logos:b,onOpenLogo:_,onCancel:function(){return a(null)}}),Object(Q.jsx)(Sn,{open:t===B.c.UPLOAD,uploads:j,onOpenUpload:w,onCancel:function(){return a(null)}}),Object(Q.jsx)(Gn,{open:t===B.c.TEXT,fontList:h,baseColor:i.base_color,defaultColor:i.guide_data.default_shape_color,defaultStrokeColor:i.guide_data.default_shape_scolor,onCreate:C,onCancel:function(){return a(null)}}),Object(Q.jsx)(Zn,{open:t===B.c.DEFAULT_SHAPE_SETTINGS,onApply:v,onCancel:function(){return a(null)}})]})},or=b.a.memo(rr),cr=Object(d.c)(F.a).withConfig({displayName:"sideBar__LayerWrapper",componentId:"sc-10zcfrv-0"})(["width:300px;background:#666666;overflow:auto;"]),lr=Object(d.c)(F.a).withConfig({displayName:"sideBar__TitleWrapper",componentId:"sc-10zcfrv-1"})(["background:#666666;"]),ir=Object(d.c)(F.a).withConfig({displayName:"sideBar__Wrapper",componentId:"sc-10zcfrv-2"})(["height:calc(100% - 46px);position:relative;"]),sr=Object(d.c)(X.a).withConfig({displayName:"sideBar__ColorApplyButton",componentId:"sc-10zcfrv-3"})(["padding:3px 15px 5px;"]),dr=function(e){var t=e.dialog,a=e.setDialog,n=e.stageRef,r=e.focusBoard,o=e.hoveredLayerJSON,c=e.onChangeHoverJSONItem,l=Object(p.d)(),i=Object(p.e)((function(e){return e.schemeReducer.current})),d=Object(p.e)((function(e){return e.layerReducer.list})),b=Object(p.e)((function(e){return e.carMakeReducer.current})),j=Object(u.useMemo)((function(){return"transparent"===i.base_color?i.base_color:"#"+i.base_color}),[i.base_color]),h=Object(u.useState)(j),O=Object(s.a)(h,2),f=O[0],y=O[1],g=Object(u.useState)(!1),m=Object(s.a)(g,2),x=m[0],_=m[1];Object(u.useEffect)((function(){y(j)}),[j]);var w=Object(u.useCallback)((function(e){l(Object(He.a)(i.id,e)),y(e),_(!1)}),[l,i&&i.id,y,_]),C=Object(u.useCallback)((function(e){y(e),_(e!==j)}),[j,y,_]),v=Object(u.useCallback)((function(){l(Object(He.a)(i.id,f)),_(!1)}),[l,i&&i.id,f,_]);return Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"column",children:[Object(Q.jsx)(lr,{px:3,children:Object(Q.jsx)(Vt,{})}),Object(Q.jsxs)(ir,{display:"flex",children:[Object(Q.jsx)(or,{dialog:t,setDialog:a,stageRef:n,focusBoard:r}),Object(Q.jsxs)(cr,{pr:3,pb:2,children:[Object(Q.jsx)(ga,{title:b?b.name:"",layerList:d.filter((function(e){return e.layer_type===B.e.CAR})),disableLock:!0,disableDnd:!0,hoveredLayerJSON:o,onChangeHoverJSONItem:c}),Object(Q.jsx)(ga,{title:"Logos & Text",layerList:d.filter((function(e){return e.layer_type===B.e.LOGO||e.layer_type===B.e.TEXT||e.layer_type===B.e.UPLOAD})),hoveredLayerJSON:o,onChangeHoverJSONItem:c}),Object(Q.jsx)(ga,{title:"Shapes",layerList:d.filter((function(e){return e.layer_type===B.e.SHAPE})),hoveredLayerJSON:o,onChangeHoverJSONItem:c}),Object(Q.jsx)(ga,{title:"Overlays",layerList:d.filter((function(e){return e.layer_type===B.e.OVERLAY})),hoveredLayerJSON:o,onChangeHoverJSONItem:c}),Object(Q.jsx)(ga,{title:"Base Paint",layerList:d.filter((function(e){return e.layer_type===B.e.BASE})),disableLock:!0,hoveredLayerJSON:o,onChangeHoverJSONItem:c,extraChildren:Object(Q.jsxs)(F.a,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[Object(Q.jsx)(ht,{value:f,onChange:w,onInputChange:C}),x&&Object(ye.e)(f)?Object(Q.jsx)(sr,{onClick:v,variant:"outlined",children:"Apply"}):Object(ye.e)(f)?Object(Q.jsx)(Q.Fragment,{}):Object(Q.jsx)(U.a,{color:"secondary",variant:"body2",children:"Invalid Color"})]})})]})]})]})},ur=a(46),br=a(529),jr=a(513),hr=a(512),Or=Object(d.c)(Ke.a).withConfig({displayName:"GeneralProperty__CustomeTextField",componentId:"sc-55yoxm-0"})([".MuiInputBase-input{height:2rem;}"]),pr=function(e){var t=e.user,a=e.errors,n=e.isValid,r=e.checkLayerDataDirty,o=e.handleBlur,c=e.handleChange,l=e.setFieldValue,i=e.touched,d=e.values,b=e.toggleField,j=["name","text","numPoints","angle"],h=Object(u.useState)(!0),O=Object(s.a)(h,2),p=O[0],f=O[1],y=Object(u.useMemo)((function(){return d.layer_type?d.layer_type!==B.e.SHAPE?B.a[d.layer_type]:B.a[d.layer_type][d.layer_data.type]:[]}),[d]),g=Object(u.useCallback)((function(e,a){return a===B.e.UPLOAD&&0===e.indexOf(t.id.toString())?e.slice(t.id.toString().length+1):e}),[t]);return"{}"!==JSON.stringify(a)&&console.log(a),j.every((function(e){return!y.includes("layer_data."+e)}))?Object(Q.jsx)(Q.Fragment,{}):Object(Q.jsxs)(br.a,{expanded:p,onChange:function(){return f(!p)},children:[Object(Q.jsx)(jr.a,{expandIcon:Object(Q.jsx)(at.a,{}),children:Object(Q.jsx)(U.a,{children:"General"})}),Object(Q.jsx)(hr.a,{children:Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"column",width:"100%",children:[y.includes("layer_data.name")?Object(Q.jsx)(Or,{name:"layer_data.name",label:"Name",variant:"outlined",value:g(d.layer_data.name,d.layer_type),error:Boolean(i.layer_data&&i.layer_data.name&&a.layer_data&&a.layer_data.name),helperText:i.layer_data&&i.layer_data.name&&a.layer_data&&a.layer_data.name,onBlur:o,onChange:c,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{}),y.includes("layer_data.text")?Object(Q.jsx)(Or,{name:"layer_data.text",label:"Text",variant:"outlined",value:d.layer_data.text,error:Boolean(i.layer_data&&i.layer_data.text&&a.layer_data&&a.layer_data.text),helperText:i.layer_data&&i.layer_data.text&&a.layer_data&&a.layer_data.text,onBlur:o,onChange:c,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{}),y.includes("layer_data.numPoints")?Object(Q.jsx)(Or,{name:"layer_data.numPoints",label:"Number of Points",variant:"outlined",type:"number",value:Math.round(d.layer_data.numPoints),error:Boolean(i.layer_data&&i.layer_data.numPoints&&a.layer_data&&a.layer_data.numPoints),helperText:i.layer_data&&i.layer_data.numPoints&&a.layer_data&&a.layer_data.numPoints,onBlur:o,onChange:c,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{}),y.includes("layer_data.angle")?Object(Q.jsx)(ut,{label:"Angle",min:0,max:360,value:Math.round(d.layer_data.angle),setValue:function(e){return l("layer_data.angle",e)}}):Object(Q.jsx)(Q.Fragment,{}),y.includes("layer_visible")?Object(Q.jsxs)(F.a,{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"space-between",children:[Object(Q.jsx)(U.a,{variant:"body1",color:"textSecondary",mr:2,children:"Visibility"}),Object(Q.jsx)(Y.a,{onClick:function(){return b("layer_visible")},size:"small",children:d.layer_visible?Object(Q.jsx)(ca.a,{}):Object(Q.jsx)(la.a,{})})]}):Object(Q.jsx)(Q.Fragment,{}),y.includes("layer_locked")?Object(Q.jsxs)(F.a,{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"space-between",children:[Object(Q.jsx)(U.a,{variant:"body1",color:"textSecondary",mr:2,children:"Locking"}),Object(Q.jsx)(Y.a,{onClick:function(){return b("layer_locked")},size:"small",children:d.layer_locked?Object(Q.jsx)(ra.a,{}):Object(Q.jsx)(oa.a,{})})]}):Object(Q.jsx)(Q.Fragment,{}),n&&r(j)?Object(Q.jsx)(F.a,{mt:2,width:"100%",children:Object(Q.jsx)(X.a,{type:"submit",color:"primary",variant:"outlined",fullWidth:!0,children:"Apply"})}):Object(Q.jsx)(Q.Fragment,{})]})})]})},fr=b.a.memo(pr),yr=a(1207),gr=a(1208),mr=Object(d.c)(Ke.a).withConfig({displayName:"SizeProperty__CustomeTextField",componentId:"sc-8yv6lk-0"})([".MuiInputBase-input{height:2rem;}"]),xr=Object(d.c)(Y.a).withConfig({displayName:"SizeProperty__CustomIconButton",componentId:"sc-8yv6lk-1"})(["margin:0 5px;height:50px;"]),_r=function(e){var t=e.errors,a=e.isValid,n=e.checkLayerDataDirty,r=e.handleBlur,o=e.handleChange,c=e.setFieldValue,l=e.touched,i=e.values,d=e.toggleLayerDataField,b=e.currentLayer,j=e.pressedKey,h=["width","height","scaleX","scaleY","radius","innerRadius","outerRadius","pointerLength","pointerWidth"],O=Object(u.useState)(!0),p=Object(s.a)(O,2),f=p[0],y=p[1],g=Object(u.useMemo)((function(){return i.layer_type?i.layer_type!==B.e.SHAPE?B.a[i.layer_type]:B.a[i.layer_type][i.layer_data.type]:[]}),[i]),m=Object(u.useMemo)((function(){return"shift"===j}),[j]),x=Object(u.useCallback)((function(e){var t=parseFloat(e.target.value)||0;i.layer_data.sizeLocked&&c("layer_data.height",t*b.layer_data.height/b.layer_data.width),c("layer_data.width",parseFloat(e.target.value)||0)}),[c,b&&b.layer_data.height,b&&b.layer_data.width]),_=Object(u.useCallback)((function(e){var t=parseFloat(e.target.value)||0;i.layer_data.sizeLocked&&c("layer_data.width",t*b.layer_data.width/b.layer_data.height),c("layer_data.height",parseFloat(e.target.value)||0)}),[c,b&&b.layer_data.height,b&&b.layer_data.width]),w=Object(u.useCallback)((function(e){var t=parseFloat(e.target.value)||0;i.layer_data.scaleLocked&&c("layer_data.scaleY",t*b.layer_data.scaleY/b.layer_data.scaleX),c("layer_data.scaleX",parseFloat(e.target.value)||0)}),[c,b&&b.layer_data.scaleY,b&&b.layer_data.scaleX]),C=Object(u.useCallback)((function(e){var t=parseFloat(e.target.value)||0;i.layer_data.scaleLocked&&c("layer_data.scaleX",t*b.layer_data.scaleX/b.layer_data.scaleY),c("layer_data.scaleY",parseFloat(e.target.value)||0)}),[c,b&&b.layer_data.scaleY,b&&b.layer_data.scaleX]),v=Object(u.useCallback)((function(e){var t=parseFloat(e.target.value)||0;i.layer_data.scaleLocked&&c("layer_data.outerRadius",t*b.layer_data.outerRadius/b.layer_data.innerRadius),c("layer_data.innerRadius",parseFloat(e.target.value)||0)}),[c,b&&b.layer_data.outerRadius,b&&b.layer_data.innerRadius]),k=Object(u.useCallback)((function(e){var t=parseFloat(e.target.value)||0;i.layer_data.scaleLocked&&c("layer_data.innerRadius",t*b.layer_data.innerRadius/b.layer_data.outerRadius),c("layer_data.outerRadius",parseFloat(e.target.value)||0)}),[c,b&&b.layer_data.outerRadius,b&&b.layer_data.innerRadius]);return h.every((function(e){return!g.includes("layer_data."+e)}))?Object(Q.jsx)(Q.Fragment,{}):Object(Q.jsxs)(br.a,{expanded:f,onChange:function(){return y(!f)},children:[Object(Q.jsx)(jr.a,{expandIcon:Object(Q.jsx)(at.a,{}),children:Object(Q.jsx)(U.a,{children:"Size"})}),Object(Q.jsx)(hr.a,{children:Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"column",width:"100%",children:[Object(Q.jsxs)(F.a,{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center",children:[g.includes("layer_data.width")?Object(Q.jsx)(mr,{name:"layer_data.width",label:i.layer_data.type!==B.f.ELLIPSE?"Width":"RadiusX",variant:"outlined",type:"number",value:Object(ye.p)(i.layer_data.width),error:Boolean(l.layer_data&&l.layer_data.width&&t.layer_data&&t.layer_data.width),helperText:l.layer_data&&l.layer_data.width&&t.layer_data&&t.layer_data.width,onBlur:r,onChange:x,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{}),g.includes("layer_data.width")&&g.includes("layer_data.height")?Object(Q.jsx)(xr,{onClick:function(){return d("sizeLocked")},children:i.layer_data.sizeLocked||m?Object(Q.jsx)(yr.a,{}):Object(Q.jsx)(gr.a,{})}):Object(Q.jsx)(Q.Fragment,{}),g.includes("layer_data.height")?Object(Q.jsx)(mr,{name:"layer_data.height",label:i.layer_data.type!==B.f.ELLIPSE?"Height":"RadiusY",variant:"outlined",type:"number",value:Object(ye.p)(i.layer_data.height),error:Boolean(l.layer_data&&l.layer_data.height&&t.layer_data&&t.layer_data.height),helperText:l.layer_data&&l.layer_data.height&&t.layer_data&&t.layer_data.height,onBlur:r,onChange:_,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{})]}),Object(Q.jsxs)(F.a,{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center",children:[g.includes("layer_data.scaleX")?Object(Q.jsx)(mr,{name:"layer_data.scaleX",label:"ScaleX",variant:"outlined",type:"number",value:Object(ye.p)(i.layer_data.scaleX),error:Boolean(l.layer_data&&l.layer_data.scaleX&&t.layer_data&&t.layer_data.scaleX),helperText:l.layer_data&&l.layer_data.scaleX&&t.layer_data&&t.layer_data.scaleX,onBlur:r,onChange:w,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{}),g.includes("layer_data.scaleX")&&g.includes("layer_data.scaleY")?Object(Q.jsx)(xr,{onClick:function(){return d("scaleLocked")},children:i.layer_data.scaleLocked||m?Object(Q.jsx)(yr.a,{}):Object(Q.jsx)(gr.a,{})}):Object(Q.jsx)(Q.Fragment,{}),g.includes("layer_data.scaleY")?Object(Q.jsx)(mr,{name:"layer_data.scaleY",label:"ScaleY",variant:"outlined",type:"number",value:Object(ye.p)(i.layer_data.scaleY),error:Boolean(l.layer_data&&l.layer_data.scaleY&&t.layer_data&&t.layer_data.scaleY),helperText:l.layer_data&&l.layer_data.scaleY&&t.layer_data&&t.layer_data.scaleY,onBlur:r,onChange:C,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{})]}),Object(Q.jsxs)(F.a,{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center",children:[g.includes("layer_data.innerRadius")?Object(Q.jsx)(mr,{name:"layer_data.innerRadius",label:"Inner Radius",variant:"outlined",type:"number",value:Object(ye.p)(i.layer_data.innerRadius),error:Boolean(l.layer_data&&l.layer_data.innerRadius&&t.layer_data&&t.layer_data.innerRadius),helperText:l.layer_data&&l.layer_data.innerRadius&&t.layer_data&&t.layer_data.innerRadius,onBlur:r,onChange:v,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{}),g.includes("layer_data.innerRadius")&&g.includes("layer_data.outerRadius")?Object(Q.jsx)(xr,{onClick:function(){return d("scaleLocked")},children:i.layer_data.scaleLocked||m?Object(Q.jsx)(yr.a,{}):Object(Q.jsx)(gr.a,{})}):Object(Q.jsx)(Q.Fragment,{}),g.includes("layer_data.outerRadius")?Object(Q.jsx)(mr,{name:"layer_data.outerRadius",label:"Outer Radius",variant:"outlined",type:"number",value:Object(ye.p)(i.layer_data.outerRadius),error:Boolean(l.layer_data&&l.layer_data.outerRadius&&t.layer_data&&t.layer_data.outerRadius),helperText:l.layer_data&&l.layer_data.outerRadius&&t.layer_data&&t.layer_data.outerRadius,onBlur:r,onChange:k,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{})]}),g.includes("layer_data.radius")?Object(Q.jsx)(mr,{name:"layer_data.radius",label:"Radius",variant:"outlined",type:"number",value:Object(ye.p)(i.layer_data.radius),error:Boolean(l.layer_data&&l.layer_data.radius&&t.layer_data&&t.layer_data.radius),helperText:l.layer_data&&l.layer_data.radius&&t.layer_data&&t.layer_data.radius,onBlur:r,onChange:o,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{}),g.includes("layer_data.pointerWidth")?Object(Q.jsx)(mr,{name:"layer_data.pointerWidth",label:"Pointer Width",variant:"outlined",type:"number",value:Object(ye.p)(i.layer_data.pointerWidth),error:Boolean(l.layer_data&&l.layer_data.pointerWidth&&t.layer_data&&t.layer_data.pointerWidth),helperText:l.layer_data&&l.layer_data.pointerWidth&&t.layer_data&&t.layer_data.pointerWidth,onBlur:r,onChange:o,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{}),g.includes("layer_data.pointerLength")?Object(Q.jsx)(mr,{name:"layer_data.pointerLength",label:"Pointer Length",variant:"outlined",type:"number",value:Object(ye.p)(i.layer_data.pointerLength),error:Boolean(l.layer_data&&l.layer_data.pointerLength&&t.layer_data&&t.layer_data.pointerLength),helperText:l.layer_data&&l.layer_data.pointerLength&&t.layer_data&&t.layer_data.pointerLength,onBlur:r,onChange:o,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{}),a&&n(h)?Object(Q.jsx)(F.a,{mt:2,width:"100%",children:Object(Q.jsx)(X.a,{type:"submit",color:"primary",variant:"outlined",fullWidth:!0,children:"Apply"})}):Object(Q.jsx)(Q.Fragment,{})]})})]})},wr=b.a.memo(_r),Cr=Object(d.c)(Ke.a).withConfig({displayName:"PositionProperty__CustomeTextField",componentId:"sc-16v7yid-0"})([".MuiInputBase-input{height:2rem;}"]),vr=function(e){var t=e.errors,a=e.isValid,n=e.checkLayerDataDirty,r=e.handleBlur,o=e.handleChange,c=(e.setFieldValue,e.touched),l=e.values,i=["left","top"],d=Object(u.useState)(!0),b=Object(s.a)(d,2),j=b[0],h=b[1],O=Object(u.useMemo)((function(){return l.layer_type?l.layer_type!==B.e.SHAPE?B.a[l.layer_type]:B.a[l.layer_type][l.layer_data.type]:[]}),[l]);return i.every((function(e){return!O.includes("layer_data."+e)}))?Object(Q.jsx)(Q.Fragment,{}):Object(Q.jsxs)(br.a,{expanded:j,onChange:function(){return h(!j)},children:[Object(Q.jsx)(jr.a,{expandIcon:Object(Q.jsx)(at.a,{}),children:Object(Q.jsx)(U.a,{children:"Position"})}),Object(Q.jsx)(hr.a,{children:Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"column",width:"100%",children:[Object(Q.jsxs)(rt.a,{container:!0,spacing:1,children:[Object(Q.jsx)(rt.a,{item:!0,sm:6,children:O.includes("layer_data.left")?Object(Q.jsx)(Cr,{name:"layer_data.left",label:"X",variant:"outlined",type:"number",value:Object(ye.p)(l.layer_data.left),error:Boolean(c.layer_data&&c.layer_data.left&&t.layer_data&&t.layer_data.left),helperText:c.layer_data&&c.layer_data.left&&t.layer_data&&t.layer_data.left,onBlur:r,onChange:o,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{})}),Object(Q.jsx)(rt.a,{item:!0,sm:6,children:O.includes("layer_data.top")?Object(Q.jsx)(Cr,{name:"layer_data.top",label:"Y",variant:"outlined",type:"number",value:Object(ye.p)(l.layer_data.top),error:Boolean(c.layer_data&&c.layer_data.top&&t.layer_data&&t.layer_data.top),helperText:c.layer_data&&c.layer_data.top&&t.layer_data&&t.layer_data.top,onBlur:r,onChange:o,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{})})]}),a&&n(i)?Object(Q.jsx)(F.a,{mt:2,width:"100%",children:Object(Q.jsx)(X.a,{type:"submit",color:"primary",variant:"outlined",fullWidth:!0,children:"Apply"})}):Object(Q.jsx)(Q.Fragment,{})]})})]})},kr=b.a.memo(vr),Lr=Object(d.c)(Rn.a).withConfig({displayName:"FontProperty__FormControl",componentId:"sc-8xx6kn-0"})(N.b),Sr=function(e){var t=e.errors,a=e.isValid,n=e.checkLayerDataDirty,r=(e.handleBlur,e.handleChange,e.setFieldValue),o=(e.touched,e.values),c=e.fontList,l=e.onLayerDataUpdate,i=["font"],d=Object(u.useState)(!0),b=Object(s.a)(d,2),j=b[0],h=b[1],O=Object(u.useMemo)((function(){return o.layer_type?o.layer_type!==B.e.SHAPE?B.a[o.layer_type]:B.a[o.layer_type][o.layer_data.type]:[]}),[o]);return i.every((function(e){return!O.includes("layer_data."+e)}))?Object(Q.jsx)(Q.Fragment,{}):Object(Q.jsxs)(br.a,{expanded:j,onChange:function(){return h(!j)},children:[Object(Q.jsx)(jr.a,{expandIcon:Object(Q.jsx)(at.a,{}),children:Object(Q.jsx)(U.a,{children:"Font"})}),Object(Q.jsx)(hr.a,{children:Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"column",width:"100%",children:[O.includes("layer_data.font")?Object(Q.jsxs)(Lr,{variant:"outlined",mt:2,children:[Object(Q.jsx)(In.a,{id:"font-select-label",children:"Font"}),Object(Q.jsx)(Fn,{value:o.layer_data.font,onChange:function(e){return l("font",e.target.value)},fontList:c})]}):Object(Q.jsx)(Q.Fragment,{}),O.includes("layer_data.color")?Object(Q.jsxs)(rt.a,{container:!0,spacing:2,children:[Object(Q.jsx)(rt.a,{item:!0,xs:6,children:Object(Q.jsx)(U.a,{variant:"body1",color:"textSecondary",mr:2,children:"Font Color"})}),Object(Q.jsx)(rt.a,{item:!0,xs:6,children:Object(Q.jsx)(ht,{value:o.layer_data.color,onChange:function(e){return l("color",e)},onInputChange:function(e){return r("layer_data.color",e)},error:Boolean(t.layer_data&&t.layer_data.color),helperText:t.layer_data&&t.layer_data.color})})]}):Object(Q.jsx)(Q.Fragment,{}),O.includes("layer_data.size")?Object(Q.jsx)(ut,{label:"Font Size",min:6,max:72,value:o.layer_data.size,setValue:function(e){return r("layer_data.size",e)}}):Object(Q.jsx)(Q.Fragment,{}),a&&n(i)?Object(Q.jsx)(F.a,{mt:2,width:"100%",children:Object(Q.jsx)(X.a,{type:"submit",color:"primary",variant:"outlined",fullWidth:!0,children:"Apply"})}):Object(Q.jsx)(Q.Fragment,{})]})})]})},Rr=b.a.memo(Sr),Ir=function(e){var t=e.errors,a=e.isValid,n=e.checkLayerDataDirty,r=(e.handleBlur,e.handleChange,e.setFieldValue),o=(e.touched,e.values),c=e.onLayerDataUpdate,l=["stroke","scolor","strokeType"],i=Object(u.useState)(!0),d=Object(s.a)(i,2),b=d[0],j=d[1],h=Object(u.useMemo)((function(){return o.layer_type?o.layer_type!==B.e.SHAPE?B.a[o.layer_type]:B.a[o.layer_type][o.layer_data.type]:[]}),[o]);return l.every((function(e){return!h.includes("layer_data."+e)}))?Object(Q.jsx)(Q.Fragment,{}):Object(Q.jsxs)(br.a,{expanded:b,onChange:function(){return j(!b)},children:[Object(Q.jsx)(jr.a,{expandIcon:Object(Q.jsx)(at.a,{}),children:Object(Q.jsx)(U.a,{children:"Stroke"})}),Object(Q.jsx)(hr.a,{children:Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"column",width:"100%",children:[h.includes("layer_data.scolor")?Object(Q.jsxs)(rt.a,{container:!0,spacing:2,children:[Object(Q.jsx)(rt.a,{item:!0,xs:6,children:Object(Q.jsx)(U.a,{variant:"body1",color:"textSecondary",mr:2,children:"Stroke Color"})}),Object(Q.jsx)(rt.a,{item:!0,xs:6,children:Object(Q.jsx)(ht,{value:o.layer_data.scolor,onChange:function(e){return c("scolor",e)},onInputChange:function(e){return r("layer_data.scolor",e)},error:Boolean(t.layer_data&&t.layer_data.scolor),helperText:t.layer_data&&t.layer_data.scolor})})]}):Object(Q.jsx)(Q.Fragment,{}),h.includes("layer_data.stroke")?Object(Q.jsx)(F.a,{mb:2,children:Object(Q.jsx)(ut,{label:"Stroke Width",min:0,max:10,value:o.layer_data.stroke,setValue:function(e){return r("layer_data.stroke",e)}})}):Object(Q.jsx)(Q.Fragment,{}),h.includes("layer_data.strokeType")?Object(Q.jsxs)(rt.a,{container:!0,spacing:2,children:[Object(Q.jsx)(rt.a,{item:!0,xs:6,children:Object(Q.jsx)(U.a,{variant:"body1",color:"textSecondary",mr:2,children:"Stroke Type"})}),Object(Q.jsx)(rt.a,{item:!0,xs:6,children:Object(Q.jsxs)(Dn.a,{name:"layer_data.strokeType",variant:"outlined",value:o.layer_data.strokeType,onChange:function(e){return c("strokeType",e.target.value)},fullWidth:!0,children:[Object(Q.jsx)(xa.a,{value:"inside",children:"Inside"}),Object(Q.jsx)(xa.a,{value:"middle",children:"Middle"}),Object(Q.jsx)(xa.a,{value:"outside",children:"Outside"})]})})]}):Object(Q.jsx)(Q.Fragment,{}),a&&n(l)?Object(Q.jsx)(F.a,{mt:2,width:"100%",children:Object(Q.jsx)(X.a,{type:"submit",color:"primary",variant:"outlined",fullWidth:!0,children:"Apply"})}):Object(Q.jsx)(Q.Fragment,{})]})})]})},Dr=b.a.memo(Ir),Er=function(e){var t=e.errors,a=(e.handleBlur,e.handleChange,e.isValid),n=e.checkLayerDataDirty,r=e.setFieldValue,o=(e.touched,e.values),c=e.onLayerDataUpdate,l=["color","opacity","blendType"],i=Object(u.useState)(!0),d=Object(s.a)(i,2),b=d[0],j=d[1],h=Object(u.useMemo)((function(){return o.layer_type?o.layer_type!==B.e.SHAPE?B.a[o.layer_type]:B.a[o.layer_type][o.layer_data.type]:[]}),[o]);return l.every((function(e){return!h.includes("layer_data."+e)}))?Object(Q.jsx)(Q.Fragment,{}):Object(Q.jsxs)(br.a,{expanded:b,onChange:function(){return j(!b)},children:[Object(Q.jsx)(jr.a,{expandIcon:Object(Q.jsx)(at.a,{}),children:Object(Q.jsx)(U.a,{children:"Colors"})}),Object(Q.jsx)(hr.a,{children:Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"column",width:"100%",children:[h.includes("layer_data.color")&&o.layer_type!==B.e.TEXT?Object(Q.jsxs)(rt.a,{container:!0,spacing:2,children:[Object(Q.jsx)(rt.a,{item:!0,xs:6,children:Object(Q.jsx)(U.a,{variant:"body1",color:"textSecondary",mr:2,children:"Color"})}),Object(Q.jsx)(rt.a,{item:!0,xs:6,children:Object(Q.jsx)(ht,{value:o.layer_data.color,onChange:function(e){return c("color",e)},onInputChange:function(e){return r("layer_data.color",e)},error:Boolean(t.layer_data&&t.layer_data.color),helperText:t.layer_data&&t.layer_data.color})})]}):Object(Q.jsx)(Q.Fragment,{}),h.includes("layer_data.opacity")?Object(Q.jsx)(F.a,{mb:2,children:Object(Q.jsx)(ut,{label:"Opacity",min:0,max:1,step:.01,value:o.layer_data.opacity,setValue:function(e){return r("layer_data.opacity",e)}})}):Object(Q.jsx)(Q.Fragment,{}),h.includes("layer_data.blendType")?Object(Q.jsxs)(rt.a,{container:!0,spacing:2,children:[Object(Q.jsx)(rt.a,{item:!0,xs:6,children:Object(Q.jsx)(U.a,{variant:"body1",color:"textSecondary",mr:2,children:"Blend Type"})}),Object(Q.jsx)(rt.a,{item:!0,xs:6,children:Object(Q.jsxs)(Dn.a,{name:"layer_data.blendType",variant:"outlined",value:o.layer_data.blendType,onChange:function(e){return c("blendType",e.target.value)},fullWidth:!0,children:[Object(Q.jsx)(xa.a,{value:"normal",children:"Normal"}),Object(Q.jsx)(xa.a,{value:"multiply",children:"Multiply"}),Object(Q.jsx)(xa.a,{value:"darken",children:"Darken"}),Object(Q.jsx)(xa.a,{value:"lighten",children:"Lighten"}),Object(Q.jsx)(xa.a,{value:"color-burn",children:"Color Burn"}),Object(Q.jsx)(xa.a,{value:"color",children:"Color"}),Object(Q.jsx)(xa.a,{value:"screen",children:"Screen"}),Object(Q.jsx)(xa.a,{value:"overlay",children:"Overlay"}),Object(Q.jsx)(xa.a,{value:"hue",children:"Hue"}),Object(Q.jsx)(xa.a,{value:"saturation",children:"Saturation"}),Object(Q.jsx)(xa.a,{value:"luminosity",children:"Luminosity"}),Object(Q.jsx)(xa.a,{value:"xor",children:"Xor"})]})})]}):Object(Q.jsx)(Q.Fragment,{}),a&&n(l)?Object(Q.jsx)(F.a,{mt:2,width:"100%",children:Object(Q.jsx)(X.a,{type:"submit",color:"primary",variant:"outlined",fullWidth:!0,children:"Apply"})}):Object(Q.jsx)(Q.Fragment,{})]})})]})},Tr=b.a.memo(Er),Mr=Object(d.c)(Ke.a).withConfig({displayName:"BackgroundProperty__CustomeTextField",componentId:"sc-8gty0c-0"})([".MuiInputBase-input{height:2rem;}"]),Fr=function(e){var t=e.errors,a=e.handleBlur,n=e.handleChange,r=e.isValid,o=e.checkLayerDataDirty,c=e.setFieldValue,l=e.touched,i=e.values,d=e.onLayerDataUpdate,b=["bgColor","paddingX","paddingY"],j=Object(u.useState)(!0),h=Object(s.a)(j,2),O=h[0],p=h[1],f=Object(u.useMemo)((function(){return i.layer_type?i.layer_type!==B.e.SHAPE?B.a[i.layer_type]:B.a[i.layer_type][i.layer_data.type]:[]}),[i]);return b.every((function(e){return!f.includes("layer_data."+e)}))?Object(Q.jsx)(Q.Fragment,{}):Object(Q.jsxs)(br.a,{expanded:O,onChange:function(){return p(!O)},children:[Object(Q.jsx)(jr.a,{expandIcon:Object(Q.jsx)(at.a,{}),children:Object(Q.jsx)(U.a,{children:"Background"})}),Object(Q.jsx)(hr.a,{children:Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"column",width:"100%",children:[f.includes("layer_data.bgColor")?Object(Q.jsxs)(rt.a,{container:!0,spacing:2,children:[Object(Q.jsx)(rt.a,{item:!0,xs:6,children:Object(Q.jsx)(U.a,{variant:"body1",color:"textSecondary",mr:2,children:"Background Color"})}),Object(Q.jsx)(rt.a,{item:!0,xs:6,children:Object(Q.jsx)(ht,{value:i.layer_data.bgColor,onChange:function(e){return d("bgColor",e)},onInputChange:function(e){return c("layer_data.bgColor",e)},error:Boolean(t.layer_data&&t.layer_data.bgColor),helperText:t.layer_data&&t.layer_data.bgColor})})]}):Object(Q.jsx)(Q.Fragment,{}),Object(Q.jsxs)(rt.a,{container:!0,spacing:1,children:[Object(Q.jsx)(rt.a,{item:!0,sm:6,children:f.includes("layer_data.paddingX")?Object(Q.jsx)(Mr,{name:"layer_data.paddingX",label:"PaddingX",variant:"outlined",type:"number",value:Object(ye.p)(i.layer_data.paddingX),error:Boolean(l.layer_data&&l.layer_data.paddingX&&t.layer_data&&t.layer_data.paddingX),helperText:l.layer_data&&l.layer_data.paddingX&&t.layer_data&&t.layer_data.paddingX,onBlur:a,onChange:n,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{})}),Object(Q.jsx)(rt.a,{item:!0,sm:6,children:f.includes("layer_data.paddingY")?Object(Q.jsx)(Mr,{name:"layer_data.paddingY",label:"PaddingY",variant:"outlined",type:"number",value:Object(ye.p)(i.layer_data.paddingY),error:Boolean(l.layer_data&&l.layer_data.paddingY&&t.layer_data&&t.layer_data.paddingY),helperText:l.layer_data&&l.layer_data.paddingY&&t.layer_data&&t.layer_data.paddingY,onBlur:a,onChange:n,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{})})]}),r&&o(b)?Object(Q.jsx)(F.a,{mt:2,width:"100%",children:Object(Q.jsx)(X.a,{type:"submit",color:"primary",variant:"outlined",fullWidth:!0,children:"Apply"})}):Object(Q.jsx)(Q.Fragment,{})]})})]})},Br=b.a.memo(Fr),Ar=a(1209),Pr=a(1210),Nr=function(e){e.errors;var t=e.isValid,a=e.checkLayerDataDirty,n=e.stageRef,r=e.currentLayer,o=(e.handleBlur,e.handleChange,e.setFieldValue),c=(e.toggleField,e.touched,e.values),l=e.onLayerDataUpdate,i=["rotation","flip","flop"],d=Object(u.useState)(!0),b=Object(s.a)(d,2),j=b[0],h=b[1],O=Object(u.useMemo)((function(){return c.layer_type?c.layer_type!==B.e.SHAPE?B.a[c.layer_type]:B.a[c.layer_type][c.layer_data.type]:[]}),[c]),p=Object(u.useCallback)((function(e){if(![B.f.CIRCLE,B.f.ELLIPSE,B.f.STAR,B.f.RING,B.f.REGULARPOLYGON,B.f.WEDGE,B.f.ARC,B.f.ARROW,B.f.PEN].includes(r.layer_data.type)){var t=n.current.findOne("."+r.id),a=e/180*Math.PI,c={x:t.x(),y:t.y(),width:t.width(),height:t.height(),rotation:t.rotation()/180*Math.PI},l=Object(ye.u)(c,a-c.rotation);o("layer_data.left",l.x),o("layer_data.top",l.y)}o("layer_data.rotation",e)}),[r,ye.u]);return i.every((function(e){return!O.includes("layer_data."+e)}))?Object(Q.jsx)(Q.Fragment,{}):Object(Q.jsxs)(br.a,{expanded:j,onChange:function(){return h(!j)},children:[Object(Q.jsx)(jr.a,{expandIcon:Object(Q.jsx)(at.a,{}),children:Object(Q.jsx)(U.a,{children:"Rotation"})}),Object(Q.jsx)(hr.a,{children:Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"column",width:"100%",children:[O.includes("layer_data.rotation")?Object(Q.jsx)(ut,{label:"Rotation",min:-179,max:179,value:Math.round(c.layer_data.rotation),setValue:p}):Object(Q.jsx)(Q.Fragment,{}),O.includes("layer_data.flop")?Object(Q.jsxs)(F.a,{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"space-between",children:[Object(Q.jsx)(U.a,{variant:"body1",color:"textSecondary",mr:2,children:"Flop"}),Object(Q.jsx)(Y.a,{onClick:function(){return l("flop",c.layer_data.flop?0:1)},size:"small",children:c.layer_data.flop?Object(Q.jsx)(Ar.a,{}):Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(Ar.a,{}),Object(Q.jsx)(F.a,{position:"absolute",left:"4px",top:"5px",children:Object(Q.jsx)(Ve.a,{icon:Qe.m,size:"sm"})})]})})]}):Object(Q.jsx)(Q.Fragment,{}),O.includes("layer_data.flip")?Object(Q.jsxs)(F.a,{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"space-between",children:[Object(Q.jsx)(U.a,{variant:"body1",color:"textSecondary",mr:2,children:"Flip"}),Object(Q.jsx)(Y.a,{onClick:function(){return l("flip",c.layer_data.flip?0:1)},size:"small",children:c.layer_data.flip?Object(Q.jsx)(Pr.a,{}):Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(Pr.a,{}),Object(Q.jsx)(F.a,{position:"absolute",left:"4px",top:"5px",children:Object(Q.jsx)(Ve.a,{icon:Qe.m,size:"sm"})})]})})]}):Object(Q.jsx)(Q.Fragment,{}),t&&a(i)?Object(Q.jsx)(F.a,{mt:2,width:"100%",children:Object(Q.jsx)(X.a,{type:"submit",color:"primary",variant:"outlined",fullWidth:!0,children:"Apply"})}):Object(Q.jsx)(Q.Fragment,{})]})})]})},Ur=b.a.memo(Nr),Yr=Object(d.c)(Ke.a).withConfig({displayName:"ShadowProperty__CustomeTextField",componentId:"sc-1d6vteb-0"})([".MuiInputBase-input{height:2rem;}"]),Xr=function(e){var t=e.errors,a=e.isValid,n=e.checkLayerDataDirty,r=e.handleBlur,o=e.handleChange,c=e.setFieldValue,l=e.touched,i=e.values,d=e.onLayerDataUpdate,b=["shadowColor","shadowBlur","shadowOpacity","shadowOffsetX","shadowOffsetY"],j=Object(u.useState)(!0),h=Object(s.a)(j,2),O=h[0],p=h[1],f=Object(u.useMemo)((function(){return i.layer_type?i.layer_type!==B.e.SHAPE?B.a[i.layer_type]:B.a[i.layer_type][i.layer_data.type]:[]}),[i]),y=Object(u.useCallback)((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i.layer_data.shadowColor&&"transparent"!==i.layer_data.shadowColor||c("layer_data.shadowBlur",5),t?d("shadowColor",e):c("layer_data.shadowColor",e)}),[c,d,i.layer_data]);return b.every((function(e){return!f.includes("layer_data."+e)}))?Object(Q.jsx)(Q.Fragment,{}):Object(Q.jsxs)(br.a,{expanded:O,onChange:function(){return p(!O)},children:[Object(Q.jsx)(jr.a,{expandIcon:Object(Q.jsx)(at.a,{}),children:Object(Q.jsx)(U.a,{children:"Shadow"})}),Object(Q.jsx)(hr.a,{children:Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"column",width:"100%",children:[f.includes("layer_data.shadowColor")?Object(Q.jsxs)(rt.a,{container:!0,spacing:2,children:[Object(Q.jsx)(rt.a,{item:!0,xs:6,children:Object(Q.jsx)(U.a,{variant:"body1",color:"textSecondary",mr:2,children:"Shadow Color"})}),Object(Q.jsx)(rt.a,{item:!0,xs:6,children:Object(Q.jsx)(ht,{value:i.layer_data.shadowColor,onChange:function(e){return y(e)},onInputChange:function(e){return y(e,!1)},error:Boolean(t.layer_data&&t.layer_data.shadowColor),helperText:t.layer_data&&t.layer_data.shadowColor})})]}):Object(Q.jsx)(Q.Fragment,{}),f.includes("layer_data.shadowBlur")?Object(Q.jsx)(Yr,{name:"layer_data.shadowBlur",label:"Shadow Blur",variant:"outlined",type:"number",value:Object(ye.p)(i.layer_data.shadowBlur),error:Boolean(l.layer_data&&l.layer_data.shadowBlur&&t.layer_data&&t.layer_data.shadowBlur),helperText:l.layer_data&&l.layer_data.shadowBlur&&t.layer_data&&t.layer_data.shadowBlur,onBlur:r,onChange:o,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{}),f.includes("layer_data.shadowOpacity")?Object(Q.jsx)(ut,{label:"Shadow Opacity",min:0,max:1,step:.01,value:i.layer_data.shadowOpacity,setValue:function(e){return c("layer_data.shadowOpacity",e)}}):Object(Q.jsx)(Q.Fragment,{}),Object(Q.jsxs)(rt.a,{container:!0,spacing:1,children:[Object(Q.jsx)(rt.a,{item:!0,sm:6,children:f.includes("layer_data.shadowOffsetX")?Object(Q.jsx)(Yr,{name:"layer_data.shadowOffsetX",label:"Shadow OffsetX",variant:"outlined",type:"number",value:Object(ye.p)(i.layer_data.shadowOffsetX),error:Boolean(l.layer_data&&l.layer_data.shadowOffsetX&&t.layer_data&&t.layer_data.shadowOffsetX),helperText:l.layer_data&&l.layer_data.shadowOffsetX&&t.layer_data&&t.layer_data.shadowOffsetX,onBlur:r,onChange:o,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{})}),Object(Q.jsx)(rt.a,{item:!0,sm:6,children:f.includes("layer_data.shadowOffsetY")?Object(Q.jsx)(Yr,{name:"layer_data.shadowOffsetY",label:"Shadow OffsetY",variant:"outlined",type:"number",value:Object(ye.p)(i.layer_data.shadowOffsetY),error:Boolean(l.layer_data&&l.layer_data.shadowOffsetY&&t.layer_data&&t.layer_data.shadowOffsetY),helperText:l.layer_data&&l.layer_data.shadowOffsetY&&t.layer_data&&t.layer_data.shadowOffsetY,onBlur:r,onChange:o,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{})})]}),a&&n(b)?Object(Q.jsx)(F.a,{mt:2,width:"100%",children:Object(Q.jsx)(X.a,{type:"submit",color:"primary",variant:"outlined",fullWidth:!0,children:"Apply"})}):Object(Q.jsx)(Q.Fragment,{})]})})]})},Wr=b.a.memo(Xr),Gr=Object(d.c)(Ke.a).withConfig({displayName:"CornerProperty__CustomeTextField",componentId:"sc-1szt41-0"})([".MuiInputBase-input{height:2rem;}"]),zr=function(e){var t=e.errors,a=e.isValid,n=e.checkLayerDataDirty,r=e.handleBlur,o=e.handleChange,c=(e.setFieldValue,e.touched),l=e.values,i=["cornerTopLeft","cornerTopRight","cornerBottomLeft","cornerBottomRight"],d=Object(u.useState)(!0),b=Object(s.a)(d,2),j=b[0],h=b[1],O=Object(u.useMemo)((function(){return l.layer_type?l.layer_type!==B.e.SHAPE?B.a[l.layer_type]:B.a[l.layer_type][l.layer_data.type]:[]}),[l]);return i.every((function(e){return!O.includes("layer_data."+e)}))?Object(Q.jsx)(Q.Fragment,{}):Object(Q.jsxs)(br.a,{expanded:j,onChange:function(){return h(!j)},children:[Object(Q.jsx)(jr.a,{expandIcon:Object(Q.jsx)(at.a,{}),children:Object(Q.jsx)(U.a,{children:"Corner Radius"})}),Object(Q.jsx)(hr.a,{children:Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"column",width:"100%",children:[Object(Q.jsxs)(rt.a,{container:!0,spacing:1,children:[Object(Q.jsx)(rt.a,{item:!0,xs:6,children:O.includes("layer_data.cornerTopLeft")?Object(Q.jsx)(Gr,{name:"layer_data.cornerTopLeft",label:"Top Left",variant:"outlined",type:"number",value:Object(ye.p)(l.layer_data.cornerTopLeft),error:Boolean(c.layer_data&&c.layer_data.cornerTopLeft&&t.layer_data&&t.layer_data.cornerTopLeft),helperText:c.layer_data&&c.layer_data.cornerTopLeft&&t.layer_data&&t.layer_data.cornerTopLeft,onBlur:r,onChange:o,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{})}),Object(Q.jsx)(rt.a,{item:!0,xs:6,children:O.includes("layer_data.cornerTopRight")?Object(Q.jsx)(Gr,{name:"layer_data.cornerTopRight",label:"Top Right",variant:"outlined",type:"number",value:Object(ye.p)(l.layer_data.cornerTopRight),error:Boolean(c.layer_data&&c.layer_data.cornerTopRight&&t.layer_data&&t.layer_data.cornerTopRight),helperText:c.layer_data&&c.layer_data.cornerTopRight&&t.layer_data&&t.layer_data.cornerTopRight,onBlur:r,onChange:o,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{})}),Object(Q.jsx)(rt.a,{item:!0,xs:6,children:O.includes("layer_data.cornerBottomLeft")?Object(Q.jsx)(Gr,{name:"layer_data.cornerBottomLeft",label:"Bottom Left",variant:"outlined",type:"number",value:Object(ye.p)(l.layer_data.cornerBottomLeft),error:Boolean(c.layer_data&&c.layer_data.cornerBottomLeft&&t.layer_data&&t.layer_data.cornerBottomLeft),helperText:c.layer_data&&c.layer_data.cornerBottomLeft&&t.layer_data&&t.layer_data.cornerBottomLeft,onBlur:r,onChange:o,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{})}),Object(Q.jsx)(rt.a,{item:!0,xs:6,children:O.includes("layer_data.cornerBottomRight")?Object(Q.jsx)(Gr,{name:"layer_data.cornerBottomRight",label:"Bottom Right",variant:"outlined",type:"number",value:Object(ye.p)(l.layer_data.cornerBottomRight),error:Boolean(c.layer_data&&c.layer_data.cornerBottomRight&&t.layer_data&&t.layer_data.cornerBottomRight),helperText:c.layer_data&&c.layer_data.cornerBottomRight&&t.layer_data&&t.layer_data.cornerBottomRight,onBlur:r,onChange:o,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{})})]}),a&&n(i)?Object(Q.jsx)(F.a,{mt:2,width:"100%",children:Object(Q.jsx)(X.a,{type:"submit",color:"primary",variant:"outlined",fullWidth:!0,children:"Apply"})}):Object(Q.jsx)(Q.Fragment,{})]})})]})},Hr=b.a.memo(zr),Kr=function(e){e.errors,e.handleBlur,e.handleChange,e.setFieldValue,e.touched;var t=e.values,a=e.onClone,n=e.onDelete,r=Object(u.useMemo)((function(){return t.layer_type?t.layer_type!==B.e.SHAPE?B.a[t.layer_type]:B.a[t.layer_type][t.layer_data.type]:[]}),[t]);return r.includes("clone")||r.includes("delete")?Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"column",width:"100%",children:[r.includes("clone")?Object(Q.jsx)(X.a,{variant:"outlined",onClick:a,children:"Clone"}):Object(Q.jsx)(Q.Fragment,{}),r.includes("delete")?Object(Q.jsx)(F.a,{width:"100%",mt:2,children:Object(Q.jsx)(X.a,{variant:"outlined",color:"secondary",fullWidth:!0,onClick:n,children:"Delete"})}):Object(Q.jsx)(Q.Fragment,{})]}):Object(Q.jsx)(Q.Fragment,{})},Vr=b.a.memo(Kr),Zr=Object(d.c)(Ke.a).withConfig({displayName:"SkewProperty__CustomeTextField",componentId:"sc-1rg1njy-0"})([".MuiInputBase-input{height:2rem;}"]),Jr=function(e){var t=e.errors,a=e.isValid,n=e.checkLayerDataDirty,r=e.handleBlur,o=e.handleChange,c=(e.setFieldValue,e.touched),l=e.values,i=["skewX","skewY"],d=Object(u.useState)(!0),b=Object(s.a)(d,2),j=b[0],h=b[1],O=Object(u.useMemo)((function(){return l.layer_type?l.layer_type!==B.e.SHAPE?B.a[l.layer_type]:B.a[l.layer_type][l.layer_data.type]:[]}),[l]);return i.every((function(e){return!O.includes("layer_data."+e)}))?Object(Q.jsx)(Q.Fragment,{}):Object(Q.jsxs)(br.a,{expanded:j,onChange:function(){return h(!j)},children:[Object(Q.jsx)(jr.a,{expandIcon:Object(Q.jsx)(at.a,{}),children:Object(Q.jsx)(U.a,{children:"Skew"})}),Object(Q.jsx)(hr.a,{children:Object(Q.jsxs)(F.a,{display:"flex",flexDirection:"column",width:"100%",children:[Object(Q.jsxs)(rt.a,{container:!0,spacing:1,children:[Object(Q.jsx)(rt.a,{item:!0,sm:6,children:O.includes("layer_data.skewX")?Object(Q.jsx)(Zr,{name:"layer_data.skewX",label:"SkewX",variant:"outlined",type:"number",inputProps:{step:.1},value:Object(ye.p)(l.layer_data.skewX),error:Boolean(c.layer_data&&c.layer_data.skewX&&t.layer_data&&t.layer_data.skewX),helperText:c.layer_data&&c.layer_data.skewX&&t.layer_data&&t.layer_data.skewX,onBlur:r,onChange:o,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{})}),Object(Q.jsx)(rt.a,{item:!0,sm:6,children:O.includes("layer_data.skewY")?Object(Q.jsx)(Zr,{name:"layer_data.skewY",label:"SkewY",variant:"outlined",type:"number",inputProps:{step:.1},value:Object(ye.p)(l.layer_data.skewY),error:Boolean(c.layer_data&&c.layer_data.skewY&&t.layer_data&&t.layer_data.skewY),helperText:c.layer_data&&c.layer_data.skewY&&t.layer_data&&t.layer_data.skewY,onBlur:r,onChange:o,fullWidth:!0,margin:"normal",mb:4,InputLabelProps:{shrink:!0}}):Object(Q.jsx)(Q.Fragment,{})})]}),a&&n(i)?Object(Q.jsx)(F.a,{mt:2,width:"100%",children:Object(Q.jsx)(X.a,{type:"submit",color:"primary",variant:"outlined",fullWidth:!0,children:"Apply"})}):Object(Q.jsx)(Q.Fragment,{})]})})]})},qr=b.a.memo(Jr),Qr=Object(d.c)(F.a).withConfig({displayName:"propertyBar__Wrapper",componentId:"sc-1e4csol-0"})(["width:300px;background:#666666;overflow:auto;"]),$r=b.a.memo((function(e){var t=e.user,a=e.stageRef,n=e.fontList,r=e.toggleField,o=e.toggleLayerDataField,c=e.currentLayer,s=e.pressedKey,d=e.onClone,b=e.onDelete,j=e.onLayerDataUpdate,h=Object(he.a)(e,["user","stageRef","fontList","toggleField","toggleLayerDataField","currentLayer","pressedKey","onClone","onDelete","onLayerDataUpdate"]),O=Object(u.useCallback)((function(e){if(!c)return!1;var t,a=Object(ur.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(h.values.layer_data[n]!=c.layer_data[n])return!0}}catch(r){a.e(r)}finally{a.f()}return!1}),[h.values,c]);return Object(Q.jsxs)(tt.a,{onSubmit:h.handleSubmit,noValidate:!0,children:[Object(Q.jsx)(F.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",height:"34px",children:Object(Q.jsx)(U.a,{variant:"h5",noWrap:!0,children:"Properties"})}),Object(Q.jsx)(fr,Object(l.a)(Object(l.a)({},h),{},{user:t,toggleField:r,checkLayerDataDirty:O})),Object(Q.jsx)(Rr,Object(l.a)(Object(l.a)({},h),{},{fontList:n,onLayerDataUpdate:j,checkLayerDataDirty:O})),Object(Q.jsx)(Tr,Object(l.a)(Object(l.a)({},h),{},{onLayerDataUpdate:j,checkLayerDataDirty:O})),Object(Q.jsx)(Br,Object(l.a)(Object(l.a)({},h),{},{onLayerDataUpdate:j,checkLayerDataDirty:O})),Object(Q.jsx)(Dr,Object(l.a)(Object(l.a)({},h),{},Object(i.a)({checkLayerDataDirty:O,onLayerDataUpdate:j},"onLayerDataUpdate",j))),Object(Q.jsx)(wr,Object(l.a)(Object(l.a)({},h),{},{toggleLayerDataField:o,currentLayer:c,pressedKey:s,checkLayerDataDirty:O})),Object(Q.jsx)(kr,Object(l.a)(Object(l.a)({},h),{},{checkLayerDataDirty:O})),Object(Q.jsx)(Ur,Object(l.a)(Object(l.a)({},h),{},{stageRef:a,currentLayer:c,toggleField:r,checkLayerDataDirty:O,onLayerDataUpdate:j})),Object(Q.jsx)(qr,Object(l.a)(Object(l.a)({},h),{},{checkLayerDataDirty:O})),Object(Q.jsx)(Wr,Object(l.a)(Object(l.a)({},h),{},{checkLayerDataDirty:O,onLayerDataUpdate:j})),Object(Q.jsx)(Hr,Object(l.a)(Object(l.a)({},h),{},{checkLayerDataDirty:O})),Object(Q.jsx)(Vr,Object(l.a)(Object(l.a)({},h),{},{onClone:d,onDelete:b}))]})})),eo=function(e){var t=e.stageRef,a=e.onClone,n=e.onDelete,r=Object(p.d)(),o=Object(p.e)((function(e){return e.layerReducer.current})),c=Object(p.e)((function(e){return e.fontReducer.list})),s=Object(p.e)((function(e){return e.boardReducer.pressedKey})),d=Object(p.e)((function(e){return e.authReducer.user})),b=Object(u.useMemo)((function(){return o?o.layer_type!==B.e.SHAPE?B.a[o.layer_type]:B.a[o.layer_type][o.layer_data.type]:[]}),[o]),j=Object(u.useMemo)((function(){return O.a.pick({layer_visible:1,layer_locked:0,layer_data:O.a.pick(B.b.layer_data,b.filter((function(e){return e.includes("layer_data.")})).map((function(e){return e.replace("layer_data.","")})))},b.filter((function(e){return!e.includes("layer_data.")})))}),[b]),h=Object(u.useMemo)((function(){return o?Object(l.a)(Object(l.a)(Object(l.a)({},j),o),{},{layer_data:Object(l.a)(Object(l.a)({},j.layer_data),o.layer_data)}):Object(l.a)({},j)}),[j,o]),f=Object(u.useCallback)((function(){o&&a(o)}),[a,o]),y=Object(u.useCallback)((function(){o&&n(o)}),[n,o]),g=Object(u.useCallback)((function(e){r(Object(Xe.s)(e))}),[r]),m=Object(u.useCallback)((function(e){r(Object(Xe.s)(Object(l.a)(Object(l.a)({},o),{},Object(i.a)({},e,o[e]?0:1))))}),[r,o]),x=Object(u.useCallback)((function(e,t){r(Object(Xe.s)(Object(l.a)(Object(l.a)({},o),{},{layer_data:Object(l.a)(Object(l.a)({},o.layer_data),{},Object(i.a)({},e,t))})))}),[r,o]),_=Object(u.useCallback)((function(e){r(Object(Xe.s)(Object(l.a)(Object(l.a)({},o),{},{layer_data:Object(l.a)(Object(l.a)({},o.layer_data),{},Object(i.a)({},e,o.layer_data[e]?0:1))})))}),[r,o]);return o?Object(Q.jsx)(Qr,{py:5,px:3,children:Object(Q.jsx)(tt.b,{initialValues:h,validationSchema:et.b({layer_order:et.a(),layer_visible:et.a(),layer_locked:et.a(),layer_data:et.b(O.a.pick({name:et.c().required("Required"),text:et.c().test("text-validation","Required",(function(e){return e&&e.length||!b.includes("layer_data.text")})),width:et.a().test("width-validation","Required",(function(e){return e||!b.includes("layer_data.width")})),height:et.a().test("height-validation","Required",(function(e){return e||!b.includes("layer_data.height")})),left:et.a(),top:et.a(),rotation:et.a().moreThan(-181,"Must be greater than -181").lessThan(181,"Must be less than 181"),flop:et.a(),flip:et.a(),scaleX:et.a().moreThan(0,"Must be greater than 0"),scaleY:et.a().moreThan(0,"Must be greater than 0"),color:et.c().nullable().test("color-validation","Incorrect Color Format",ye.e),size:et.a(),scolor:et.c().nullable().test("color-validation","Incorrect Color Format",ye.e),stroke:et.a(),font:et.a(),opacity:et.a(),shadowColor:et.c().nullable().test("color-validation","Incorrect Color Format",ye.e),shadowBlur:et.a(),shadowOpacity:et.a(),shadowOffsetX:et.a(),shadowOffsetY:et.a(),skewX:et.a(),skewY:et.a(),cornerTopLeft:et.a(),cornerTopRight:et.a(),cornerBottomLeft:et.a(),cornerBottomRight:et.a(),radius:et.a().moreThan(0,"Must be greater than 0"),innerRadius:et.a().moreThan(0,"Must be greater than 0"),outerRadius:et.a().moreThan(0,"Must be greater than 0"),numPoints:et.a().moreThan(1,"Must be greater than 1"),angle:et.a(),pointerLength:et.a().moreThan(0,"Must be greater than 0"),pointerWidth:et.a().moreThan(0,"Must be greater than 0")},b.filter((function(e){return e.includes("layer_data.")})).map((function(e){return e.replace("layer_data.","")}))))}),enableReinitialize:!0,validate:function(e){return console.log(e),{}},onSubmit:g,children:function(e){return Object(Q.jsx)($r,Object(l.a)(Object(l.a)({},e),{},{user:d,stageRef:t,fontList:c,toggleField:m,toggleLayerDataField:_,currentLayer:o,pressedKey:s,onClone:f,onDelete:y,onLayerDataUpdate:x}))}})}):Object(Q.jsx)(Qr,{py:5,px:3,children:Object(Q.jsx)(F.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",height:"34px",children:Object(Q.jsx)(U.a,{variant:"h5",noWrap:!0,children:"Properties"})})})},to=a(329),ao=a(330),no=a(331),ro=Object(d.c)(F.a).withConfig({displayName:"scheme__Wrapper",componentId:"sc-188wpva-0"})(["background-color:",";"],(function(e){return e.background}));t.default=function(){var e=Object(p.d)(),t=Object(m.g)(),a=Object(u.useState)(""),n=Object(s.a)(a,2),d=n[0],b=n[1],h=Object(u.useState)(null),f=Object(s.a)(h,2),x=f[0],_=f[1],w=Object(u.useState)({}),C=Object(s.a)(w,2),v=C[0],k=C[1],L=Object(u.useRef)(0),S=Object(u.useRef)(0),R=Object(u.useRef)(null),I=Object(u.useRef)(null),D=Object(u.useRef)(null),E=Object(u.useRef)(null),T=Object(u.useRef)(null),N=Object(u.useRef)(null),U=Object(j.a)(Object(p.e)((function(e){return e.authReducer.user}))),Y=Object(s.a)(U,2),X=Y[0],W=Y[1],G=Object(j.a)(Object(p.e)((function(e){return e.schemeReducer.current}))),z=Object(s.a)(G,2),H=z[0],K=z[1],V=Object(j.a)(Object(p.e)((function(e){return e.carMakeReducer.current}))),Z=Object(s.a)(V,2),J=(Z[0],Z[1]),q=Object(p.e)((function(e){return e.schemeReducer.loaded})),$=Object(p.e)((function(e){return e.layerReducer.current})),ee=Object(p.e)((function(e){return e.layerReducer.clipboard})),te=Object(p.e)((function(e){return e.layerReducer.loadedStatuses})),ae=Object(p.e)((function(e){return e.overlayReducer.list})),ne=Object(p.e)((function(e){return e.logoReducer.list})),re=Object(p.e)((function(e){return e.fontReducer.list})),oe=Object(p.e)((function(e){return e.userReducer.list})),ce=Object(p.e)((function(e){return e.schemeReducer.sharedUsers})),ie=Object(p.e)((function(e){return e.boardReducer.zoom})),se=Object(p.e)((function(e){return e.boardReducer.pressedKey})),de=Object(p.e)((function(e){return e.boardReducer.boardRotate})),ue=Object(j.a)(Object(p.e)((function(e){return e.boardReducer.frameSize}))),be=Object(s.a)(ue,2),je=be[0],he=be[1],Oe=Object(p.e)((function(e){return e.boardReducer.mouseMode})),pe=Object(p.e)((function(e){return e.boardReducer.paintingGuides})),fe=Object(p.e)((function(e){return e.schemeReducer.loading})),ge=Object(p.e)((function(e){return e.carMakeReducer.loading})),me=Object(p.e)((function(e){return e.fontReducer.loading})),xe=Object(p.e)((function(e){return e.uploadReducer.initialized})),_e=Object(u.useCallback)((function(e,t){k(!0===t?Object(i.a)({},e,t):function(a){return Object(l.a)(Object(l.a)({},a),{},Object(i.a)({},e,t))})}),[k]),we=Object(u.useCallback)((function(t){if($&&$.layer_data){var a=R.current,n=a.scaleX(),r=a.findOne("."+$.id).getAbsolutePosition(),o=r.x,c=r.y,l={x:(o-a.x())/n,y:(c-a.y())/n};e(Object(P.k)(t));var i={x:o-l.x*t,y:c-l.y*t};a.position(i),a.batchDraw()}else e(Object(P.k)(t))}),[e,$,R.current]),Ce=Object(u.useCallback)((function(){var e=Object(ye.q)(Math.max(Math.min(1.25*ie,10),.25));we(e)}),[ie,we]),ve=Object(u.useCallback)((function(){var e=Object(ye.q)(Math.max(Math.min(ie/1.25,10),.25));we(e)}),[ie,we]),ke=Object(u.useCallback)((function(){var t=R.current.attrs.width,a=R.current.attrs.height,n=Object(ye.q)(Math.min(t/je.width,a/je.height));R.current.x(t/2),R.current.y(a/2),e(Object(P.k)(n))}),[e,R.current&&R.current.attrs&&R.current.attrs.width,R.current&&R.current.attrs&&R.current.attrs.height,je]),Le=Object(u.useCallback)((function(t){e(Object(P.i)(t))}),[]),Se=Object(u.useCallback)((function(t){e(Object(P.f)(t))}),[]),Re=Object(u.useCallback)((function(e){var t=Object(c.a)(pe),a=t.indexOf(e);a>-1?t.splice(a,1):t.push(e),Le(t)}),[pe,Le]),Ie=Object(u.useCallback)((function(){setTimeout((function(){return document.activeElement.blur()}),1e3)}),[]),De=Object(u.useCallback)((function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e(Object(Xe.b)(t,a,n,Object(ye.l)(R,je,ie)))}),[e,ye.l,R,je,ie]),Ee=Object(u.useCallback)((function(e){b('Are you sure to delete "'.concat(e.layer_data.name,'"?'))}),[b]),Te=Object(u.useCallback)((function(t,a){if("INPUT"!==a.target.tagName&&"keydown"===a.type&&(se!==t&&e(Object(P.j)(t)),"del"!==t&&"backspace"!==t||!$||$.layer_type===B.e.CAR?"esc"===t&&$?e(Object(Xe.n)(null)):"+"===a.key&&a.shiftKey?Ce():"_"===a.key&&a.shiftKey?ve():")"===a.key&&a.shiftKey?e(Object(P.k)(1)):"("===a.key&&a.shiftKey?ke():"D"===a.key&&a.shiftKey?e(Object(P.h)(B.f.DEFAULT)):"B"===a.key&&a.shiftKey?e(Object(P.h)(B.f.PEN)):"R"===a.key&&a.shiftKey?e(Object(P.h)(B.f.RECT)):"C"===a.key&&a.shiftKey?e(Object(P.h)(B.f.CIRCLE)):"E"===a.key&&a.shiftKey?e(Object(P.h)(B.f.ELLIPSE)):"S"===a.key&&a.shiftKey?e(Object(P.h)(B.f.STAR)):"G"===a.key&&a.shiftKey?e(Object(P.h)(B.f.RING)):"O"===a.key&&a.shiftKey?e(Object(P.h)(B.f.REGULARPOLYGON)):"W"===a.key&&a.shiftKey?e(Object(P.h)(B.f.WEDGE)):"A"===a.key&&a.shiftKey?e(Object(P.h)(B.f.ARC)):"P"===a.key&&a.shiftKey?e(Object(P.h)(B.f.POLYGON)):"L"===a.key&&a.shiftKey?e(Object(P.h)(B.f.LINE)):">"===a.key&&a.shiftKey?e(Object(P.h)(B.f.ARROW)):"c"===a.key&&(a.ctrlKey||a.metaKey)&&$?e(Object(Xe.m)($)):"v"===a.key&&(a.ctrlKey||a.metaKey)&&ee?De(ee):"z"===a.key&&(a.ctrlKey||a.metaKey)?e(Object(P.c)()):"y"===a.key&&(a.ctrlKey||a.metaKey)?e(Object(P.d)()):"1"===t?Re(B.g.CARMASK):"2"===t?Re(B.g.WIREFRAME):"3"===t?Re(B.g.SPONSORBLOCKS):"4"===t?Re(B.g.NUMBERBLOCKS):"5"===t?Re(B.g.GRID):"t"===t?_(B.c.TEXT):"s"===t?_(B.c.SHAPE):"l"===t?_(B.c.LOGO):"b"===t?_(B.c.BASEPAINT):"enter"===t&&([B.f.LINE,B.f.ARROW,B.f.POLYGON].includes(Oe)?e(Object(Xe.o)(Xe.a.ADD_TO_SHAPE)):$&&e(Object(Xe.n)(null))):Ee($)),"INPUT"!==a.target.tagName&&("keyup"===a.type&&e(Object(P.j)(null)),["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"].includes(a.key)&&$&&![B.e.CAR,B.e.BASE].includes($.layer_type))){var n=a.shiftKey?10:1,r="ArrowLeft"===a.key?-n:"ArrowRight"===a.key?n:0,o="ArrowUp"===a.key?-n:"ArrowDown"===a.key?n:0,c=r,i=o;if(90===de?(c=o,i=-r):180===de?(c=-r,i=-o):270===de&&(c=-o,i=r),"keyup"===a.type){var s=Object(l.a)({},$.layer_data);S.current!=L.current&&(s.left=$.layer_data.left+c,s.top=$.layer_data.top+i),e(Object(Xe.s)(Object(l.a)(Object(l.a)({},$),{},{layer_data:s})))}else S.current!=L.current&&(S.current=Object.assign(L.current),e(Object(Xe.t)(Object(l.a)(Object(l.a)({},$),{},{layer_data:Object(l.a)(Object(l.a)({},$.layer_data),{},{left:$.layer_data.left+c,top:$.layer_data.top+i})}))))}}),[e,se,$,ee,S.current,L.current,De,Ee]),Me=Object(u.useCallback)((function(){e(Object(Xe.k)($)),b("")}),[e,$,b]),Fe=Object(u.useCallback)(Object(o.a)(r.a.mark((function e(){var t,a,n,o,c,i,s,d,u,b,j,h,p,f,y,g=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(g.length>0&&void 0!==g[0])||g[0],a=document.createElement("canvas"),n=a.getContext("2d"),o=t||"Misc"===J.current.car_type?1024:2048,c=o/he.current.width,i=he.current.width*c,s=he.current.height*c,j=Object(l.a)({},R.current.attrs),R.current.setAttrs({x:0,y:0,offsetX:0,offsetY:0,scaleX:1,scaleY:1,rotation:0,width:he.current.width,height:he.current.height}),R.current.draw(),!I.current){e.next=15;break}return h=I.current.toDataURL({pixelRatio:c}),e.next=14,Object(ye.a)(h);case 14:d=e.sent;case 15:if(!D.current){e.next=20;break}return p=D.current.toDataURL({pixelRatio:c}),e.next=19,Object(ye.a)(p);case 19:u=e.sent;case 20:if(!E.current||!t){e.next=25;break}return f=E.current.toDataURL({pixelRatio:c}),e.next=24,Object(ye.a)(f);case 24:b=e.sent;case 25:if(R.current.setAttrs(O.a.omit(j,["container"])),R.current.draw(),a.width=i,a.height=s,d&&n.drawImage(d,0,0,i,s),u&&n.drawImage(u,0,0,i,s),b&&t&&n.drawImage(b,0,0,i,s),!t){e.next=34;break}return e.abrupt("return",a.toDataURL("image/png"));case 34:return y=n.getImageData(0,0,i,s),e.abrupt("return",y);case 36:case"end":return e.stop()}}),e)}))),[he.current,J.current,R.current,I.current,D.current,E.current]),Be=Object(u.useCallback)(Object(o.a)(r.a.mark((function t(){var a,n,o,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!R.current||!K.current){t.next=19;break}return t.prev=1,e(Object(He.p)(!0)),t.next=5,Fe();case 5:return a=t.sent,e(Object(He.p)(!1)),n=Object(ye.f)(a),o=new File([n],"".concat(K.current.id,".png"),{type:"image/png"}),(c=new FormData).append("files",o),c.append("schemeID",K.current.id),t.next=14,gn.a.uploadThumbnail(c);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),e(Object(yn.b)({message:t.t0.message}));case 19:case"end":return t.stop()}}),t,null,[[1,16]])}))),[e,K.current,!R.current,Fe]),Ae=Object(u.useCallback)(Object(o.a)(r.a.mark((function t(){var a,n,o,c,l,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!R.current||!K.current){t.next=24;break}return t.prev=1,e(Object(He.p)(!0)),t.next=5,Fe(!1);case 5:a=t.sent,e(Object(He.p)(!1)),n="Misc"===J.current.car_type?1024:2048,o="Misc"===J.current.car_type?1024:2048,(c=new M({width:n,height:o,imageType:M.Type.RLE_RGB})).setImageData(a),l=c.getBlobURL(),(i=document.createElement("a")).style="display: none",i.href=l,i.download="car_".concat(W.current.id,".tga"),i.click(),window.URL.revokeObjectURL(l),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(1),console.log(t.t0),e(Object(yn.b)({message:t.t0.message}));case 24:case"end":return t.stop()}}),t,null,[[1,20]])}))),[e,K.current,W.current,J.current,he.current,!R.current,Fe]);return Object(u.useEffect)((function(){X&&X.id&&t.id&&(H||e(Object(He.k)(t.id,(function(){xe||e(Object(fn.c)(X.id)),ae.length||e(Object(to.b)()),ne.length||e(Object(ao.b)()),re.length||e(Object(Ye.b)()),oe.length||e(Object(no.b)()),ce.length||e(Object(He.n)(t.id))}))))}),[X]),Object(u.useEffect)((function(){var e=setInterval((function(){L.current+=1}),200),t=setTimeout(Be,7e3),a=setInterval(Be,3e5);return function(){clearInterval(e),clearInterval(a),clearTimeout(t)}}),[]),Object(u.useEffect)((function(){!q&&Object.keys(te).every((function(e){return te[e]}))&&R.current&&(e(Object(He.o)(!0)),ke())}),[te,q]),Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(g.b,{title:H?H.name:null}),fe||ge||me||!H?Object(Q.jsx)(A.a,{}):Object(Q.jsxs)(F.a,{width:"100%",height:"100%",display:"flex",flexDirection:"column",children:[Object(Q.jsx)(y.a,{handleKeys:["all"],onKeyEvent:Te}),Object(Q.jsx)(y.a,{handleKeys:["all"],handleEventType:"keyup",onKeyEvent:Te}),Object(Q.jsxs)(F.a,{width:"100%",height:"calc(100% - 50px)",display:"flex",justifyContent:"space-between",children:[Object(Q.jsx)(dr,{dialog:x,setDialog:_,focusBoard:Ie,hoveredLayerJSON:v,stageRef:R,onChangeHoverJSONItem:_e}),Object(Q.jsx)(ro,{background:"#282828",overflow:"hidden",flexGrow:"1",children:Object(Q.jsx)(ze,{hoveredLayerJSON:v,onChangeHoverJSONItem:_e,onChangeBoardRotation:Se,stageRef:R,baseLayerRef:I,mainLayerRef:D,carMaskLayerRef:E,activeTransformerRef:T,hoveredTransformerRef:N})}),Object(Q.jsx)(eo,{stageRef:R,onClone:De,onDelete:Ee})]}),Object(Q.jsx)(le,{onZoomIn:Ce,onZoomOut:ve,onZoomFit:ke,onChangePaintingGuides:Le,onDownloadTGA:Ae})]}),Object(Q.jsx)(dn.a,{text:d,open:0!==d.length,onCancel:function(){return b("")},onConfirm:Me})]})}},574:function(e,t,a){"use strict";var n=a(1176),r=a(7),o=Object(r.a)((function(e){return{tooltip:{backgroundColor:"white",color:"rgba(0, 0, 0, 0.87)",boxShadow:"rgba(0, 0, 0, 0.2)",fontSize:11},arrow:{color:"white"}}}))(n.a);t.a=o},614:function(e,t,a){"use strict";var n=a(28),r=a(0),o=a(1183),c=a(384),l=a(735),i=a.n(l),s=a(11),d=Object(o.a)((function(e){return{search:Object(n.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:"transparent","&:hover":{backgroundColor:"transparent"},border:"1px solid #8A8A8A",width:"100%"},e.breakpoints.up("sm"),{width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%",height:"26px"}}}));t.a=function(e){var t=e.value,a=e.onChange,n=d(),o=Object(r.useCallback)((function(e){a(e.target.value)}),[a]);return Object(s.jsxs)("div",{className:n.search,children:[Object(s.jsx)("div",{className:n.searchIcon,children:Object(s.jsx)(i.a,{})}),Object(s.jsx)(c.a,{placeholder:"Search",classes:{root:n.inputRoot,input:n.inputInput},value:t,inputProps:{"aria-label":"search"},onChange:o})]})}},615:function(e,t,a){"use strict";var n=a(25),r=a(0),o=a.n(r),c=a(65),l=a(380),i=a(514),s=a(518),d=a(517),u=a(77),b=a(516),j=a(11),h=Object(n.c)(l.a).withConfig({displayName:"ConfirmDialog__Button",componentId:"sc-1cd3vhn-0"})(c.b),O=o.a.memo((function(e){var t=e.text,a=e.open,n=e.onCancel,r=e.onConfirm;return Object(j.jsxs)(i.a,{"aria-labelledby":"confirm-title",open:a,children:[Object(j.jsx)(s.a,{id:"confirm-title",children:"Confirm"}),Object(j.jsx)(d.a,{dividers:!0,children:Object(j.jsx)(u.a,{variant:"body1",children:t})}),Object(j.jsxs)(b.a,{children:[Object(j.jsx)(h,{onClick:n,color:"primary",children:"Cancel"}),Object(j.jsx)(h,{onClick:r,color:"secondary",variant:"outlined",autoFocus:!0,children:"Confirm"})]})]})}));t.a=O}}]);
//# sourceMappingURL=7.9112f14c.chunk.js.map